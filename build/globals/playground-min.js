(function(){this.metal=this.metal||{},this.metalNamed=this.metalNamed||{};var babelHelpers={};babelHelpers["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},babelHelpers.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},babelHelpers.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),babelHelpers.defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},babelHelpers.get=function e(t,n,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in a)return a.value;var r=a.get;if(void 0!==r)return r.call(i)},babelHelpers.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},babelHelpers.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},babelHelpers.slicedToArray=function(){function e(e,t){var n=[],i=!0,a=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){a=!0,o=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),babelHelpers.toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},function(){function e(){throw Error("Unimplemented abstract method")}function t(){k=void 0}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k=e}function i(){return void 0===k&&"undefined"!=typeof window&&window.__METAL_COMPATIBILITY__&&n(window.__METAL_COMPATIBILITY__),k}function a(e,t){return e||t}function o(e){if(!e.name){var t=e.toString();e.name=t.substring(9,t.indexOf("("))}return e.name}function r(e,t,n){var i=t+"_MERGED";if(!e.hasOwnProperty(i)){var o=e.hasOwnProperty(t)?e[t]:null;if(e.__proto__&&!e.__proto__.isPrototypeOf(Function)){var s=n||a;o=s(o,r(e.__proto__,t,s))}e[i]=o}return e[i]}function s(e,t){if(e){var n=e[N];return t&&!e.hasOwnProperty(N)&&(n=null),n||(e[N]=S++)}return S++}function l(e){return e}function u(e){return"boolean"==typeof e}function c(e){return void 0!==e}function d(e){return c(e)&&!f(e)}function h(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&9===e.nodeType}function g(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&11===e.nodeType}function m(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&1===e.nodeType}function p(e){return"function"==typeof e}function f(e){return null===e}function v(e){return"number"==typeof e}function _(e){return null!==e&&e===e.window}function y(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);return"object"===t&&null!==e||"function"===t}function b(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&"function"==typeof e.then}function E(e){return"string"==typeof e||e instanceof String}function C(){}var k=void 0,S=1,N="core_"+(1e9*Math.random()>>>0);this.metalNamed.coreNamed=this.metalNamed.coreNamed||{},this.metalNamed.coreNamed.UID_PROPERTY=N,this.metalNamed.coreNamed.abstractMethod=e,this.metalNamed.coreNamed.disableCompatibilityMode=t,this.metalNamed.coreNamed.enableCompatibilityMode=n,this.metalNamed.coreNamed.getCompatibilityModeData=i,this.metalNamed.coreNamed.getFunctionName=o,this.metalNamed.coreNamed.getStaticProperty=r,this.metalNamed.coreNamed.getUid=s,this.metalNamed.coreNamed.identityFunction=l,this.metalNamed.coreNamed.isBoolean=u,this.metalNamed.coreNamed.isDef=c,this.metalNamed.coreNamed.isDefAndNotNull=d,this.metalNamed.coreNamed.isDocument=h,this.metalNamed.coreNamed.isDocumentFragment=g,this.metalNamed.coreNamed.isElement=m,this.metalNamed.coreNamed.isFunction=p,this.metalNamed.coreNamed.isNull=f,this.metalNamed.coreNamed.isNumber=v,this.metalNamed.coreNamed.isWindow=_,this.metalNamed.coreNamed.isObject=y,this.metalNamed.coreNamed.isPromise=b,this.metalNamed.coreNamed.isString=E,this.metalNamed.coreNamed.nullFunction=C}.call(this),function(){var e=this.metalNamed.coreNamed;this.metal.core=e,this.metalNamed.core=this.metalNamed.core||{},this.metalNamed.core.core=e,Object.keys(this.metalNamed.coreNamed).forEach(function(e){this.metalNamed.core[e]=this.metalNamed.coreNamed[e]})}.call(this),function(){var e=this.metalNamed.core.isDef,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"equal",value:function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}},{key:"firstDefinedValue",value:function(e){for(var t=0;t<e.length;t++)if(void 0!==e[t])return e[t]}},{key:"flatten",value:function(e,n){for(var i=n||[],a=0;a<e.length;a++)Array.isArray(e[a])?t.flatten(e[a],i):i.push(e[a]);return i}},{key:"remove",value:function(e,n){var i=e.indexOf(n),a=void 0;return(a=i>=0)&&t.removeAt(e,i),a}},{key:"removeAt",value:function(e,t){return 1===Array.prototype.splice.call(e,t,1).length}},{key:"slice",value:function(t,n,i){for(var a=[],o=e(i)?i:t.length,r=n;r<o;r++)a.push(t[r]);return a}}]),t}();this.metal.array=t}.call(this),function(){var e={};e.throwException=function(t){e.nextTick(function(){throw t})},e.run=function(t,n){e.run.workQueueScheduled_||(e.nextTick(e.run.processWorkQueue),e.run.workQueueScheduled_=!0),e.run.workQueue_.push(new e.run.WorkItem_(t,n))},e.run.workQueueScheduled_=!1,e.run.workQueue_=[],e.run.processWorkQueue=function(){for(;e.run.workQueue_.length;){var t=e.run.workQueue_;e.run.workQueue_=[];for(var n=0;n<t.length;n++){var i=t[n];try{i.fn.call(i.scope)}catch(a){e.throwException(a)}}}e.run.workQueueScheduled_=!1},e.run.WorkItem_=function(e,t){this.fn=e,this.scope=t},e.nextTick=function(t,n){var i=t;return n&&(i=t.bind(n)),i=e.nextTick.wrapCallback_(i),"function"==typeof setImmediate?void setImmediate(i):(e.nextTick.setImmediate_||(e.nextTick.setImmediate_=e.nextTick.getSetImmediateEmulator_()),void e.nextTick.setImmediate_(i))},e.nextTick.setImmediate_=null,e.nextTick.getSetImmediateEmulator_=function(){var e=void 0;if("function"==typeof MessageChannel&&(e=MessageChannel),"undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(e=function(){var e=document.createElement("iframe");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow,n=t.document;n.open(),n.write(""),n.close();var i="callImmediate"+Math.random(),a=t.location.protocol+"//"+t.location.host,o=function(e){e.origin!==a&&e.data!==i||this.port1.onmessage()}.bind(this);t.addEventListener("message",o,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(i,a)}}}),"undefined"!=typeof e){var t=function(){var t=new e,n={},i=n;return t.port1.onmessage=function(){n=n.next;var e=n.cb;n.cb=null,e()},{v:function(e){i.next={cb:e},i=i.next,t.port2.postMessage(0)}}}();if("object"===("undefined"==typeof t?"undefined":babelHelpers["typeof"](t)))return t.v}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(e){var t=document.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){setTimeout(e,0)}},e.nextTick.wrapCallback_=function(e){return e},this.metal.async=e}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e),this.disposed_=!1}return babelHelpers.createClass(e,[{key:"dispose",value:function(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)}},{key:"disposeInternal",value:function(){}},{key:"isDisposed",value:function(){return this.disposed_}}]),e}();this.metal.Disposable=e}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"mixin",value:function(e){for(var t=void 0,n=void 0,i=1;i<arguments.length;i++){n=arguments[i];for(t in n)e[t]=n[t]}return e}},{key:"getObjectByName",value:function(e,t){var n=t||window,i=e.split(".");return i.reduce(function(e,t){return e[t]},n)}},{key:"map",value:function(e,t){for(var n={},i=Object.keys(e),a=0;a<i.length;a++)n[i[a]]=t(i[a],e[i[a]]);return n}},{key:"shallowEqual",value:function(e,t){if(e===t)return!0;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(e[n[a]]!==t[n[a]])return!1;return!0}}]),e}();this.metal.object=e}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"caseInsensitiveCompare",value:function(e,t){var n=String(e).toLowerCase(),i=String(t).toLowerCase();return n<i?-1:n===i?0:1}},{key:"collapseBreakingSpaces",value:function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}},{key:"escapeRegex",value:function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}},{key:"getRandomString",value:function(){var e=2147483648;return Math.floor(Math.random()*e).toString(36)+Math.abs(Math.floor(Math.random()*e)^Date.now()).toString(36)}},{key:"hashCode",value:function(e){for(var t=0,n=0,i=e.length;n<i;n++)t=31*t+e.charCodeAt(n),t%=4294967296;return t}},{key:"replaceInterval",value:function(e,t,n,i){return e.substring(0,t)+i+e.substring(n)}}]),e}();this.metal.string=e}.call(this),function(){var e=this.metal.core,t=this.metal.array,n=this.metal.async,i=this.metal.Disposable,a=this.metal.object,o=this.metal.string;this.metalNamed.metal=this.metalNamed.metal||{},Object.keys(this.metalNamed.core).forEach(function(e){this.metalNamed.metal[e]=this.metalNamed.core[e]}),this.metalNamed.metal.array=t,this.metalNamed.metal.async=n,this.metalNamed.metal.Disposable=i,this.metalNamed.metal.object=a,this.metalNamed.metal.string=o,this.metal.metal=e}.call(this),function(){function e(e){var t=a(r.bind(null,e));return function(){return 0===arguments.length?t:t.apply(void 0,arguments)}}function t(e,t,n){var i=n?s(n.constructor):null,a=n&&n.getRenderer&&n.getRenderer(),o=a&&a.getParent&&a.getParent(),r=o?s(o.constructor):null,l=r?"Check render method of '"+r+"'.":"";return new Error("Warning: Invalid state passed to '"+t+"'. "+(e+" Passed to '"+i+"'. "+l))}function n(e){return Array.isArray(e)?"array":"undefined"==typeof e?"undefined":babelHelpers["typeof"](e)}function i(e){return e instanceof Error}function a(e){return function(t,n,i){return!l(t)||e(t,n,i)}}function o(e,n,a,o){for(var r=0;r<n.length;r++)if(i(e(n[r],a,o)))return t(u,a,o);return!0}function r(e,i,a,o){var r=n(i);if(r!==e){var s="Expected type '"+e+"', but received type '"+r+"'.";return t(s,a,o)}return!0}var s=this.metalNamed.metal.getFunctionName,l=this.metalNamed.metal.isDefAndNotNull,u="Expected an array of single type.",c="Expected object of one type.",d="Expected one of given values.",h="Expected one of given types.",g="Expected object with a specific shape.",m={any:function(){return function(){return!0}},array:e("array"),bool:e("boolean"),func:e("function"),number:e("number"),object:e("object"),string:e("string"),arrayOf:function(e){return a(function(t,n,a){var r=m.array(t,n,a);return i(r)?r:o(e,t,n,a)})},instanceOf:function(e){return a(function(n,i,a){if(n instanceof e)return!0;var o="Expected instance of "+e;return t(o,i,a)})},objectOf:function(e){return a(function(n,a,o){for(var r in n)if(i(e(n[r])))return t(c,a,o);return!0})},oneOf:function(e){return a(function(n,a,o){var r=m.array(e,a,o);return i(r)?r:e.indexOf(n)!==-1||t(d,a,o)})},oneOfType:function(e){return a(function(n,a,o){var r=m.array(e,a,o);if(i(r))return r;for(var s=0;s<e.length;s++)if(!i(e[s](n,a,o)))return!0;return t(h,a,o)})},shapeOf:function(e){return a(function(n,a,o){var r=m.object(e,a,o);if(i(r))return r;for(var s in e){var u=e[s],c=!1;if(u.config&&(c=u.config.required,u=u.config.validator),c&&!l(n[s])||i(u(n[s])))return t(g,a,o)}return!0})}};this.metal.validators=m}.call(this),function(){function e(e,n){var a=e;return a===i&&(a=Object.create(i),a.config={}),t.mixin(a.config,n),a}var t=this.metalNamed.metal.object,n=this.metal.validators,i={internal:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e(this,{internal:t})},required:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e(this,{required:t})},setter:function(t){return e(this,{setter:t})},validator:function(t){return e(this,{validator:t})},value:function(t){return e(this,{value:t})}},a=Object.keys(n);a.forEach(function(e){return i[e]=function(){return this.validator(n[e])}}),this.metal.Config=i}.call(this),function(){var e=this.metalNamed.metal.Disposable,t=function(e){function t(e,n,i){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.emitter_=e,a.event_=n,a.listener_=i,a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"disposeInternal",value:function(){this.removeListener(),this.emitter_=null,this.listener_=null}},{key:"removeListener",value:function(){this.emitter_.isDisposed()||this.emitter_.removeListener(this.event_,this.listener_)}}]),t}(e);this.metal.EventHandle=t}.call(this),function(){function e(e){return e=e||[],Array.isArray(e)?e:[e]}var t=this.metalNamed.metal.array,n=this.metalNamed.metal.Disposable,i=this.metalNamed.metal.isFunction,a=this.metalNamed.metal.isString,o=this.metal.EventHandle,r=[0],s=function(n){function s(){babelHelpers.classCallCheck(this,s);var e=babelHelpers.possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));return e.events_=null,e.listenerHandlers_=null,e.shouldUseFacade_=!1,e}return babelHelpers.inherits(s,n),babelHelpers.createClass(s,[{key:"addHandler_",value:function(e,t){return e?(Array.isArray(e)||(e=[e]),e.push(t)):e=t,e}},{key:"addListener",value:function(e,t,n){this.validateListener_(t);for(var i=this.toEventsArray_(e),a=0;a<i.length;a++)this.addSingleListener_(i[a],t,n);return new o(this,e,t)}},{key:"addSingleListener_",value:function(e,t,n,i){this.runListenerHandlers_(e),(n||i)&&(t={"default":n,fn:t,origin:i}),this.events_=this.events_||{},this.events_[e]=this.addHandler_(this.events_[e],t)}},{key:"buildFacade_",value:function(e){var t=this;if(this.getShouldUseFacade()){var n=function(){var n={preventDefault:function(){n.preventedDefault=!0},target:t,type:e};return{v:n}}();if("object"===("undefined"==typeof n?"undefined":babelHelpers["typeof"](n)))return n.v}}},{key:"disposeInternal",value:function(){this.events_=null}},{key:"emit",value:function(e){var n=this.getRawListeners_(e);if(0===n.length)return!1;var i=t.slice(arguments,1);return this.runListeners_(n,i,this.buildFacade_(e)),!0}},{key:"getRawListeners_",value:function(t){var n=e(this.events_&&this.events_[t]);return n.concat(e(this.events_&&this.events_["*"]))}},{key:"getShouldUseFacade",value:function(){return this.shouldUseFacade_}},{key:"listeners",value:function(e){return this.getRawListeners_(e).map(function(e){return e.fn?e.fn:e})}},{key:"many",value:function(e,t,n){for(var i=this.toEventsArray_(e),a=0;a<i.length;a++)this.many_(i[a],t,n);return new o(this,e,n)}},{key:"many_",value:function(e,t,n){function i(){0===--t&&a.removeListener(e,i),n.apply(a,arguments)}var a=this;t<=0||a.addSingleListener_(e,i,!1,n)}},{key:"matchesListener_",value:function(e,t){var n=e.fn||e;return n===t||e.origin&&e.origin===t}},{key:"off",value:function(t,n){if(this.validateListener_(n),!this.events_)return this;for(var i=this.toEventsArray_(t),a=0;a<i.length;a++)this.events_[i[a]]=this.removeMatchingListenerObjs_(e(this.events_[i[a]]),n);return this}},{key:"on",value:function(){return this.addListener.apply(this,arguments)}},{key:"onListener",value:function(e){this.listenerHandlers_=this.addHandler_(this.listenerHandlers_,e)}},{key:"once",value:function(e,t){return this.many(e,1,t)}},{key:"removeAllListeners",value:function(e){if(this.events_)if(e)for(var t=this.toEventsArray_(e),n=0;n<t.length;n++)this.events_[t[n]]=null;else this.events_=null;return this}},{key:"removeMatchingListenerObjs_",value:function(e,t){for(var n=[],i=0;i<e.length;i++)this.matchesListener_(e[i],t)||n.push(e[i]);return n.length>0?n:null}},{key:"removeListener",value:function(){return this.off.apply(this,arguments)}},{key:"runListenerHandlers_",value:function(t){var n=this.listenerHandlers_;if(n){n=e(n);for(var i=0;i<n.length;i++)n[i](t)}}},{key:"runListeners_",value:function(e,t,n){n&&t.push(n);for(var i=[],a=0;a<e.length;a++){var o=e[a].fn||e[a];e[a]["default"]?i.push(o):o.apply(this,t)}if(!n||!n.preventedDefault)for(var r=0;r<i.length;r++)i[r].apply(this,t)}},{key:"setShouldUseFacade",value:function(e){return this.shouldUseFacade_=e,this}},{key:"toEventsArray_",value:function(e){return a(e)&&(r[0]=e,e=r),e}},{key:"validateListener_",value:function(e){if(!i(e))throw new TypeError("Listener must be a function")}}]),s}(n);this.metal.EventEmitter=s}.call(this),function(){var e=this.metalNamed.metal.Disposable,t=function(e){function t(e,n,i,a){babelHelpers.classCallCheck(this,t);var o=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.blacklist_=i,o.originEmitter_=e,o.pendingEvents_=null,o.proxiedEvents_=null,o.targetEmitter_=n,o.whitelist_=a,o.startProxy_(),o}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"addListener_",value:function(e,t){return this.originEmitter_.on(e,t)}},{key:"disposeInternal",value:function(){this.removeListeners_(),this.proxiedEvents_=null,this.originEmitter_=null,this.targetEmitter_=null}},{key:"emitOnTarget_",value:function(){this.targetEmitter_.emit.apply(this.targetEmitter_,arguments)}},{key:"proxyEvent",value:function(e){this.shouldProxyEvent_(e)&&this.tryToAddListener_(e)}},{key:"removeListeners_",value:function(){if(this.proxiedEvents_){for(var e=Object.keys(this.proxiedEvents_),t=0;t<e.length;t++)this.proxiedEvents_[e[t]].removeListener();this.proxiedEvents_=null}this.pendingEvents_=null}},{key:"setOriginEmitter",value:function(e){var t=this,n=this.originEmitter_&&this.proxiedEvents_?Object.keys(this.proxiedEvents_):this.pendingEvents_;this.originEmitter_=e,n&&(this.removeListeners_(),n.forEach(function(e){return t.proxyEvent(e)}))}},{key:"shouldProxyEvent_",value:function(e){return!(this.whitelist_&&!this.whitelist_[e])&&((!this.blacklist_||!this.blacklist_[e])&&(!this.proxiedEvents_||!this.proxiedEvents_[e]))}},{key:"startProxy_",value:function(){this.targetEmitter_.onListener(this.proxyEvent.bind(this))}},{key:"tryToAddListener_",value:function(e){this.originEmitter_?(this.proxiedEvents_=this.proxiedEvents_||{},this.proxiedEvents_[e]=this.addListener_(e,this.emitOnTarget_.bind(this,e))):(this.pendingEvents_=this.pendingEvents_||[],this.pendingEvents_.push(e))}}]),t}(e);this.metal.EventEmitterProxy=t}.call(this),function(){var e=this.metalNamed.metal.Disposable,t=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.eventHandles_=[],e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"add",value:function(){for(var e=0;e<arguments.length;e++)this.eventHandles_.push(arguments[e])}},{key:"disposeInternal",value:function(){this.eventHandles_=null}},{key:"removeAllListeners",value:function(){for(var e=0;e<this.eventHandles_.length;e++)this.eventHandles_[e].removeListener();this.eventHandles_=[]}}]),t}(e);this.metal.EventHandler=t}.call(this),function(){var e=this.metal.EventEmitter,t=this.metal.EventEmitterProxy,n=this.metal.EventHandle,i=this.metal.EventHandler;this.metal.events=e,this.metalNamed.events=this.metalNamed.events||{},this.metalNamed.events.EventEmitter=e,this.metalNamed.events.EventEmitterProxy=t,this.metalNamed.events.EventHandle=n,this.metalNamed.events.EventHandler=i}.call(this),function(){var e=this.metalNamed.metal.async,t=this.metalNamed.metal.getStaticProperty,n=this.metalNamed.metal.isDefAndNotNull,i=this.metalNamed.metal.isFunction,a=this.metalNamed.metal.isObject,o=this.metalNamed.metal.isString,r=this.metalNamed.metal.object,s=this.metalNamed.events.EventEmitter,l=function(s){function l(e,t,n){babelHelpers.classCallCheck(this,l);var i=babelHelpers.possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return i.context_=n||i,i.keysBlacklist_=null,i.obj_=t||i,i.eventData_=null,i.scheduledBatchData_=null,i.stateInfo_={},i.stateConfigs_={},i.initialValues_=r.mixin({},e),i.setShouldUseFacade(!0),i.configStateFromStaticHint_(),Object.defineProperty(i.obj_,l.STATE_REF_KEY,{configurable:!0,enumerable:!1,value:i}),i}return babelHelpers.inherits(l,s),babelHelpers.createClass(l,[{key:"assertGivenIfRequired_",value:function(e){var t=this.stateConfigs_[e];if(t.required){var i=this.getStateInfo(e),a=i.state===l.KeyStates.INITIALIZED?this.get(e):this.initialValues_[e];if(!n(a)){var o='The property called "'+e+"\" is required but didn't receive a value.";if(this.shouldThrowValidationError())throw new Error(o)}}}},{key:"assertValidatorReturnInstanceOfError_",value:function(e){if(e instanceof Error&&this.shouldThrowValidationError())throw e}},{key:"assertValidStateKeyName_",value:function(e){if(this.keysBlacklist_&&this.keysBlacklist_[e])throw new Error("It's not allowed to create a state key with the name \""+e+'".')}},{key:"buildKeyPropertyDef_",value:function(e){return{configurable:!0,enumerable:!0,get:function(){return this[l.STATE_REF_KEY].getStateKeyValue_(e)},set:function(t){this[l.STATE_REF_KEY].setStateKeyValue_(e,t)}}}},{key:"callFunction_",value:function(e,t){return o(e)?this.context_[e].apply(this.context_,t):i(e)?e.apply(this.context_,t):void 0}},{key:"callSetter_",value:function(e,t,n){var i=this.stateConfigs_[e];return i.setter&&(t=this.callFunction_(i.setter,[t,n])),t}},{key:"callValidator_",value:function(e,t){var n=this.stateConfigs_[e];if(n.validator){var i=this.callFunction_(n.validator,[t,e,this.context_]);return this.assertValidatorReturnInstanceOfError_(i),i}return!0}},{key:"canSetState",value:function(e){var t=this.getStateInfo(e);return!this.stateConfigs_[e].writeOnce||!t.written}},{key:"configState",value:function(e,t){var n=Object.keys(e);if(0!==n.length){if(t!==!1){for(var i={},a=0;a<n.length;a++){var o=n[a];this.assertValidStateKeyName_(o),i[o]=this.buildKeyPropertyDef_(o)}Object.defineProperties(t||this.obj_,i)}this.stateConfigs_=e;for(var r=0;r<n.length;r++){var s=n[r];e[s]=e[s].config?e[s].config:e[s],this.assertGivenIfRequired_(n[r]),this.validateInitialValue_(n[r])}}}},{key:"configStateFromStaticHint_",value:function(){var e=this.constructor;if(e!==l){var t=void 0;this.obj_===this&&(t=!e.hasConfiguredState_&&e.prototype,e.hasConfiguredState_=!0),this.configState(l.getStateStatic(e),t)}}},{key:"disposeInternal",value:function(){babelHelpers.get(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"disposeInternal",this).call(this),this.initialValues_=null,this.stateInfo_=null,this.stateConfigs_=null,this.scheduledBatchData_=null}},{key:"emitBatchEvent_",value:function(){if(!this.isDisposed()){var e=this.scheduledBatchData_;this.scheduledBatchData_=null,this.context_.emit("stateChanged",e)}}},{key:"get",value:function(e){return this.obj_[e]}},{key:"getState",value:function(e){for(var t={},n=e||this.getStateKeys(),i=0;i<n.length;i++)t[n[i]]=this.get(n[i]);return t}},{key:"getStateInfo",value:function(e){return this.stateInfo_[e]||(this.stateInfo_[e]={}),this.stateInfo_[e]}},{key:"getStateKeyConfig",value:function(e){return this.stateConfigs_?this.stateConfigs_[e]:null}},{key:"getStateKeys",value:function(){return this.stateConfigs_?Object.keys(this.stateConfigs_):[]}},{key:"getStateKeyValue_",value:function(e){if(!this.warnIfDisposed_(e))return this.initStateKey_(e),this.getStateInfo(e).value}},{key:"hasBeenSet",value:function(e){var t=this.getStateInfo(e);return t.state===l.KeyStates.INITIALIZED||this.hasInitialValue_(e)}},{key:"hasInitialValue_",value:function(e){return this.initialValues_.hasOwnProperty(e)}},{key:"hasStateKey",value:function(e){if(!this.warnIfDisposed_(e))return!!this.stateConfigs_[e]}},{key:"informChange_",value:function(e,t){if(this.shouldInformChange_(e,t)){var n=r.mixin({key:e,newVal:this.get(e),prevVal:t},this.eventData_);this.context_.emit(e+"Changed",n),this.context_.emit("stateKeyChanged",n),this.scheduleBatchEvent_(n)}}},{key:"initStateKey_",value:function(e){var t=this.getStateInfo(e);t.state===l.KeyStates.UNINITIALIZED&&(t.state=l.KeyStates.INITIALIZING,this.setInitialValue_(e),t.written||this.setDefaultValue(e),t.state=l.KeyStates.INITIALIZED)}},{key:"removeStateKey",value:function(e){this.stateInfo_[e]=null,this.stateConfigs_[e]=null,delete this.obj_[e]}},{key:"scheduleBatchEvent_",value:function(t){this.scheduledBatchData_||(e.nextTick(this.emitBatchEvent_,this),this.scheduledBatchData_=r.mixin({changes:{}},this.eventData_));var n=t.key,i=this.scheduledBatchData_.changes;i[n]?i[n].newVal=t.newVal:i[n]=t}},{key:"set",value:function(e,t){this.hasStateKey(e)&&(this.obj_[e]=t)}},{key:"setDefaultValue",value:function(e){var t=this.stateConfigs_[e];void 0!==t.value?this.set(e,t.value):this.set(e,this.callFunction_(t.valueFn))}},{key:"setEventData",value:function(e){this.eventData_=e}},{key:"setInitialValue_",value:function(e){this.hasInitialValue_(e)&&(this.set(e,this.initialValues_[e]),this.initialValues_[e]=void 0)}},{key:"setKeysBlacklist",value:function(e){this.keysBlacklist_=e}},{key:"setState",value:function(e,t){var n=this;Object.keys(e).forEach(function(t){return n.set(t,e[t])}),t&&this.scheduledBatchData_&&this.context_.once("stateChanged",t)}},{key:"setStateKeyValue_",value:function(e,t){if(!this.warnIfDisposed_(e)&&this.canSetState(e)&&this.validateKeyValue_(e,t)){var n=this.get(e),i=this.getStateInfo(e);i.value=this.callSetter_(e,t,n),this.assertGivenIfRequired_(e),i.written=!0,this.informChange_(e,n)}}},{key:"shouldInformChange_",value:function(e,t){var n=this.getStateInfo(e);return n.state===l.KeyStates.INITIALIZED&&(a(t)||t!==this.get(e))}},{key:"shouldThrowValidationError",value:function(){return!1}},{key:"validateInitialValue_",value:function(e){this.hasInitialValue_(e)&&!this.callValidator_(e,this.initialValues_[e])&&delete this.initialValues_[e]}},{key:"validateKeyValue_",value:function(e,t){var n=this.getStateInfo(e);return n.state===l.KeyStates.INITIALIZING||this.callValidator_(e,t)}},{key:"warnIfDisposed_",value:function(e){var t=this.isDisposed();return t}}],[{key:"getStateStatic",value:function(e){return t(e,"STATE",l.mergeState)}},{key:"mergeState",value:function(e,t){return r.mixin({},t,e)}}]),l}(s);l.STATE_REF_KEY="__METAL_STATE_REF_KEY__",l.KeyStates={UNINITIALIZED:void 0,INITIALIZING:1,INITIALIZED:2},this.metal.State=l}.call(this),function(){var e=this.metal.validators,t=this.metal.Config,n=this.metal.State;this.metal.state=n,this.metalNamed.state=this.metalNamed.state||{},this.metalNamed.state.validators=e,this.metalNamed.state.Config=t,this.metalNamed.state.State=n}.call(this),function(){var e=this.metal.state,t=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"loadMetal",value:function(){var e=this;Ajax.request(this.metal_link,"GET").then(function(t){e.metalSource=t.responseText})}},{key:"createIFrame",value:function(){var e=document.createElement("iframe");try{this.parentElement.removeChild(this.iframe)}catch(t){}e=this.parentElement.appendChild(e);var n=e.contentDocument||e.contentWindow.document;n.open(),n.write("<!DOCTYPE html>"),n.write("<html>"),n.write("<head>"),n.write('<link rel="stylesheet" href="'+this.bootstrap_link+'">'),n.write('<script src="'+this.metal_link+'"></script>'),n.write("<style>"),n.write(this.css),n.write("</style>"),n.write("</head>"),n.write("<body>"),n.write(this.html),n.write("<script>"),n.write(this.js),n.write("</script>"),n.write("</body>"),n.write("</html>"),n.close(),this.iframe=e,this.idocument=n}},{key:"setContent",value:function(e,t,n){e===this.css&&t===this.js&&n==this.html||(this.css=e,this.js=t,this.html=n,this.createIFrame())}}]),t}(e);t.STATE={metal_link:{value:"../build/globals/playground.js"},bootstrap_link:{value:"bootstrap.min.css"},iframe:{value:{}},idocument:{value:{}},metalSource:{value:""},parentElement:{value:{}}},this.metal.IFrame=t}.call(this),function(){function e(e,n){for(var i=Object.keys(n||{}),a=[],o=0;o<i.length;o++){var r=t(e,n[i[o]]);if(r.fn){var s=void 0;s=r.selector?e.delegate(i[o],r.selector,r.fn):e.on(i[o],r.fn),a.push(s)}}return a}function t(e,t){var r={fn:t};return a(t)&&!i(t)&&(r.selector=t.selector,r.fn=t.fn),o(r.fn)&&(r.fn=n(e,r.fn)),r}function n(e,t){if(i(e[t]))return e[t].bind(e)}var i=(this.metalNamed.metal.getFunctionName,this.metalNamed.metal.isFunction),a=this.metalNamed.metal.isObject,o=this.metalNamed.metal.isString;this.metalNamed.events=this.metalNamed.events||{},this.metalNamed.events.addListenersFromObj=e,this.metalNamed.events.getComponentFn=n}.call(this),function(){function e(e){var t=e.constructor;if(t.hasOwnProperty(i))return t[i];for(var n={},a=e.getDataManager().getSyncKeys(e),o=!0,r=0;r<a.length;r++){var s="sync"+a[r].charAt(0).toUpperCase()+a[r].slice(1),l=e[s];l&&(n[a[r]]=l,o=o&&e.constructor.prototype[s])}return o&&(t[i]=n),n}function t(t,i){for(var a=e(t),o=Object.keys(i||a),r=0;r<o.length;r++){var s=a[o[r]];if(n(s)){var l=i&&i[o[r]],u=t.getDataManager();s.call(t,l?l.newVal:u.get(t,o[r]),l?l.prevVal:void 0)}}}var n=this.metalNamed.metal.isFunction,i="__METAL_SYNC_FNS__";this.metalNamed.sync=this.metalNamed.sync||{},this.metalNamed.sync.syncState=t}.call(this),function(){var e="__metal_data__",t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"get",value:function(t,n,i){return t[e]||(t[e]={}),n?(!t[e][n]&&i&&(t[e][n]=i),t[e][n]):t[e]}},{key:"has",value:function(t){return!!t[e]}}]),t}();this.metal.domData=t}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.isString,n=this.metal.domData,i=this.metalNamed.events.EventHandle,a=function(i){function a(e,t,n,i){babelHelpers.classCallCheck(this,a);var o=babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,n));return o.selector_=i,o}return babelHelpers.inherits(a,i),babelHelpers.createClass(a,[{key:"removeListener",value:function(){var i=n.get(this.emitter_,"delegating",{}),a=n.get(this.emitter_,"listeners",{}),o=this.selector_,r=t(o)?i[this.event_].selectors:a,s=t(o)?o:this.event_;e.remove(r[s]||[],this.listener_),r[s]&&0===r[s].length&&delete r[s]}}]),a}(i);this.metal.DomDelegatedEventHandle=a}.call(this),function(){var e=this.metalNamed.events.EventHandle,t=function(e){function t(e,n,i,a){babelHelpers.classCallCheck(this,t);var o=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));return o.capture_=a,
o}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"removeListener",value:function(){this.emitter_.removeEventListener(this.event_,this.listener_,this.capture_)}}]),t}(e);this.metal.DomEventHandle=t}.call(this),function(){function e(e,i){if(Q(e)&&X(i)){e.length||(e=[e]);for(var a=0;a<e.length;a++)"classList"in e[a]?t(e[a],i):n(e[a],i)}}function t(e,t){t.split(" ").forEach(function(t){t&&e.classList.add(t)})}function n(e,t){var n=" "+e.className+" ",i="";t=t.split(" ");for(var a=0;a<t.length;a++){var o=t[a];n.indexOf(" "+o+" ")===-1&&(i+=" "+o)}i&&(e.className=e.className+i)}function i(e,t,n){o(Z.get(e,"listeners",{}),t,n)}function a(e,t,n,i){var a=Z.get(e,"delegating",{});o(a[t].selectors,n,i)}function o(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}function r(e,t){var n=Z.get(e,"delegating",{});n[t]||(n[t]={handle:S(e,t,p,!!re[t]),selectors:{}})}function s(e,t){for(;e&&!b(e,t);)e=e.parentNode;return e}function l(e,t){if(X(t)&&(t=u(t)),t instanceof NodeList)for(var n=Array.prototype.slice.call(t),i=0;i<n.length;i++)e.appendChild(n[i]);else e.appendChild(t);return t}function u(e){var t=document.createElement("div");t.innerHTML="<br>"+e,t.removeChild(t.firstChild);for(var n=document.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n}function c(e,t){return $(e)?e.documentElement.contains(t):e.contains(t)}function d(e,t,n,o,s){var l=ae[t];return l&&l.delegate&&(t=l.originalEvent,o=l.handler.bind(l,o)),s&&(o=o.bind(),o.defaultListener_=!0),r(e,t),X(n)?a(e,t,n,o):i(n,t,o),new ee(X(n)?e:n,t,o,X(n)?n:null)}function h(e,t,n){if(n&&"click"===t&&2===n.button)return!1;var i=["BUTTON","INPUT","SELECT","TEXTAREA","FIELDSET"];return!("click"===t&&i.indexOf(e.tagName)>-1)||!(e.disabled||D(e,"fieldset[disabled]"))}function g(e){e&&l(document.body,e)}function m(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function p(e){k(e);var t=!0,n=e.currentTarget,i=[];return t&=M(n,e,i),t&=x(i,e),e.delegateTarget=null,e[oe]=n,t}function f(e,t){return"classList"in e?v(e,t):_(e,t)}function v(e,t){return e.classList.contains(t)}function _(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0}function y(e){return 0===e.childNodes.length}function b(e,t){if(!e||1!==e.nodeType)return!1;var n=Element.prototype,i=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return i?i.call(e,t):E(e,t)}function E(e,t){for(var n=document.querySelectorAll(t,e.parentNode),i=0;i<n.length;++i)if(n[i]===e)return!0;return!1}function C(e,t){do if(e=e.nextSibling,e&&b(e,t))return e;while(e);return null}function k(e){e.stopPropagation=P,e.stopImmediatePropagation=H}function S(e,t,n,i){if(X(e))return d(document,t,e,n);var a=ae[t];return a&&a.event&&(t=a.originalEvent,n=a.handler.bind(a,n)),e.addEventListener(t,n,i),new te(e,t,n,i)}function N(e,t,n){var i=S(e,t,function(){return i.removeListener(),n.apply(this,arguments)});return i}function D(e,t){return s(e.parentNode,t)}function O(e,t){ae[e]=t}function T(e){for(var t=void 0;t=e.firstChild;)e.removeChild(t)}function A(e,t){if(Q(e)&&X(t)){e.length||(e=[e]);for(var n=0;n<e.length;n++)"classList"in e[n]?R(e[n],t):I(e[n],t)}}function R(e,t){t.split(" ").forEach(function(t){t&&e.classList.remove(t)})}function I(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var i=0;i<t.length;i++)n=n.replace(" "+t[i]+" "," ");e.className=n.trim()}function L(e,t){e&&t&&e!==t&&e.parentNode&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))}function H(){var e=this;e.stopped=!0,e.stoppedImmediate=!0,Event.prototype.stopImmediatePropagation.call(e)}function P(){var e=this;e.stopped=!0,Event.prototype.stopPropagation.call(e)}function w(e,t){if(ae[t])return!0;X(e)&&(ne[e]||(ne[e]=document.createElement(e)),e=ne[e]);var n=e.tagName;return ie[n]&&ie[n].hasOwnProperty(t)||(ie[n]=ie[n]||{},ie[n][t]="on"+t in e),ie[n][t]}function x(e,t){for(var n=!0,i=0;i<e.length&&!t.defaultPrevented;i++)t.delegateTarget=e[i].element,n&=e[i].fn(t);return n}function M(e,t,n){for(var i=!0,a=t.target,o=e.parentNode;a&&a!==o&&!t.stopped;)h(a,t.type,t)&&(t.delegateTarget=a,i&=q(a,t,n),i&=K(e,a,t,n)),a=a.parentNode;return i}function F(e){return W(e)||$(e)||Y(e)?e:X(e)?"#"===e[0]&&e.indexOf(" ")===-1?document.getElementById(e.substr(1)):document.querySelector(e):null}function j(e,t){Q(e)&&X(t)&&("classList"in e?U(e,t):B(e,t))}function U(e,t){t.split(" ").forEach(function(t){e.classList.toggle(t)})}function B(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var i=0;i<t.length;i++){var a=" "+t[i]+" ",o=n.indexOf(a);if(o===-1)n=""+n+t[i]+" ";else{var r=n.substring(0,o),s=n.substring(o+a.length);n=r+" "+s}}e.className=n.trim()}function q(e,t,n){var i=t[oe];if(!z(i)||!c(i,e)){var a=Z.get(e,"listeners",{})[t.type];return G(a,t,e,n)}return!0}function V(e,t,n){if(h(e,t,n)){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),J.mixin(i,n),e.dispatchEvent(i)}}function G(e,t,n,i){var a=!0;e=e||[];for(var o=0;o<e.length&&!t.stoppedImmediate;o++)e[o].defaultListener_?i.push({element:n,fn:e[o]}):a&=e[o](t);return a}function K(e,t,n,i){for(var a=!0,o=Z.get(e,"delegating",{}),r=o[n.type].selectors,s=Object.keys(r),l=0;l<s.length&&!n.stoppedImmediate;l++)if(b(t,s[l])){var u=r[s[l]];a&=G(u,n,t,i)}return a}var z=this.metalNamed.metal.isDef,$=this.metalNamed.metal.isDocument,Y=this.metalNamed.metal.isDocumentFragment,W=this.metalNamed.metal.isElement,Q=this.metalNamed.metal.isObject,X=this.metalNamed.metal.isString,J=this.metalNamed.metal.object,Z=this.metal.domData,ee=this.metal.DomDelegatedEventHandle,te=this.metal.DomEventHandle,ne={},ie={},ae={};this.metalNamed.domNamed=this.metalNamed.domNamed||{},this.metalNamed.domNamed.customEvents=ae;var oe="__metal_last_container__",re={blur:!0,error:!0,focus:!0,invalid:!0,load:!0,scroll:!0};this.metalNamed.domNamed.addClasses=e,this.metalNamed.domNamed.closest=s,this.metalNamed.domNamed.append=l,this.metalNamed.domNamed.buildFragment=u,this.metalNamed.domNamed.contains=c,this.metalNamed.domNamed.delegate=d,this.metalNamed.domNamed.enterDocument=g,this.metalNamed.domNamed.exitDocument=m,this.metalNamed.domNamed.hasClass=f,this.metalNamed.domNamed.isEmpty=y,this.metalNamed.domNamed.match=b,this.metalNamed.domNamed.next=C,this.metalNamed.domNamed.on=S,this.metalNamed.domNamed.once=N,this.metalNamed.domNamed.parent=D,this.metalNamed.domNamed.registerCustomEvent=O,this.metalNamed.domNamed.removeChildren=T,this.metalNamed.domNamed.removeClasses=A,this.metalNamed.domNamed.replace=L,this.metalNamed.domNamed.supportsEvent=w,this.metalNamed.domNamed.toElement=F,this.metalNamed.domNamed.toggleClasses=j,this.metalNamed.domNamed.triggerEvent=V}.call(this),function(){var e=this.metalNamed.domNamed;this.metal.dom=e,this.metalNamed.dom=this.metalNamed.dom||{},this.metalNamed.dom.dom=e,Object.keys(this.metalNamed.domNamed).forEach(function(e){this.metalNamed.dom[e]=this.metalNamed.domNamed[e]})}.call(this),function(){var e=this.metalNamed.dom.delegate,t=this.metalNamed.dom.on,n=this.metalNamed.dom.supportsEvent,i=this.metalNamed.events.EventEmitterProxy,a=function(i){function a(){return babelHelpers.classCallCheck(this,a),babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return babelHelpers.inherits(a,i),babelHelpers.createClass(a,[{key:"addListener_",value:function(n,i){if(this.originEmitter_.addEventListener){if(this.isDelegateEvent_(n)){var o=n.indexOf(":",9),r=n.substring(9,o),s=n.substring(o+1);return e(this.originEmitter_,r,s,i)}return t(this.originEmitter_,n,i)}return babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"addListener_",this).call(this,n,i)}},{key:"isDelegateEvent_",value:function(e){return"delegate:"===e.substr(0,9)}},{key:"isSupportedDomEvent_",value:function(e){return!this.originEmitter_||!this.originEmitter_.addEventListener||(this.isDelegateEvent_(e)&&e.indexOf(":",9)!==-1||n(this.originEmitter_,e))}},{key:"shouldProxyEvent_",value:function(e){return babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"shouldProxyEvent_",this).call(this,e)&&this.isSupportedDomEvent_(e)}}]),a}(i);this.metal.DomEventEmitterProxy=a}.call(this),function(){var e=this.metalNamed.dom.append,t=this.metalNamed.metal.string,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"checkAnimationEventName",value:function(){return void 0===n.animationEventName_&&(n.animationEventName_={animation:n.checkAnimationEventName_("animation"),transition:n.checkAnimationEventName_("transition")}),n.animationEventName_}},{key:"checkAnimationEventName_",value:function(e){for(var i=["Webkit","MS","O",""],a=t.replaceInterval(e,0,1,e.substring(0,1).toUpperCase()),o=[a+"End",a+"End",a+"End",e+"end"],r=0;r<i.length;r++)if(void 0!==n.animationElement_.style[i[r]+a])return i[r].toLowerCase()+o[r];return e+"end"}},{key:"checkAttrOrderChange",value:function(){if(void 0===n.attrOrderChange_){var t='<div data-component="" data-ref=""></div>',i=document.createElement("div");e(i,t),n.attrOrderChange_=t!==i.innerHTML}return n.attrOrderChange_}}]),n}();n.animationElement_=document.createElement("div"),n.animationEventName_=void 0,n.attrOrderChange_=void 0,this.metal.features=n}.call(this),function(){var e=this.metalNamed.metal.async,t=this.metalNamed.dom.exitDocument,n=this.metalNamed.dom.once,i=function(){function i(){babelHelpers.classCallCheck(this,i)}return babelHelpers.createClass(i,null,[{key:"run",value:function(e,n){var i=document.createElement("script");return i.text=e,n?n(i):document.head.appendChild(i),t(i),i}},{key:"runFile",value:function(e,i,a){var o=document.createElement("script");o.src=e;var r=function(){t(o),i&&i()};return n(o,"load",r),n(o,"error",r),a?a(o):document.head.appendChild(o),o}},{key:"runScript",value:function(n,a,o){var r=function(){a&&a()};return n.type&&"text/javascript"!==n.type?void e.nextTick(r):(t(n),n.src?i.runFile(n.src,a,o):(e.nextTick(r),i.run(n.text,o)))}},{key:"runScriptsInElement",value:function(t,n,a){var o=t.querySelectorAll("script");o.length?i.runScriptsInOrder(o,0,n,a):n&&e.nextTick(n)}},{key:"runScriptsInOrder",value:function(t,n,a,o){i.runScript(t.item(n),function(){n<t.length-1?i.runScriptsInOrder(t,n+1,a,o):a&&e.nextTick(a)},o)}}]),i}();this.metal.globalEval=i}.call(this),function(){var e=this.metalNamed.metal.async,t=this.metalNamed.dom.once,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"run",value:function(e,t){var n=document.createElement("style");return n.innerHTML=e,t?t(n):document.head.appendChild(n),n}},{key:"runFile",value:function(e,t,i){var a=document.createElement("link");return a.rel="stylesheet",a.href=e,n.runStyle(a,t,i),a}},{key:"runStyle",value:function(n,i,a){var o=function(){i&&i()};return n.rel&&"stylesheet"!==n.rel?void e.nextTick(o):("STYLE"===n.tagName?e.nextTick(o):(t(n,"load",o),t(n,"error",o)),a?a(n):document.head.appendChild(n),n)}},{key:"runStylesInElement",value:function(t,i,a){var o=t.querySelectorAll("style,link");if(0===o.length&&i)return void e.nextTick(i);for(var r=0,s=function(){i&&++r===o.length&&e.nextTick(i)},l=0;l<o.length;l++)n.runStyle(o[l],s,a)}}]),n}();this.metal.globalEvalStyles=n}.call(this),function(){var e=this.metalNamed.dom.registerCustomEvent,t=this.metal.features,n={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"};Object.keys(n).forEach(function(t){e(t,{delegate:!0,handler:function(e,n){var i=n.relatedTarget,a=n.delegateTarget;if(!i||i!==a&&!a.contains(i))return n.customType=t,e(n)},originalEvent:n[t]})});var i={animation:"animationend",transition:"transitionend"};Object.keys(i).forEach(function(n){var a=i[n];e(a,{event:!0,delegate:!0,handler:function(e,t){return t.customType=a,e(t)},originalEvent:t.checkAnimationEventName()[n]})})}.call(this),function(){var e=this.metal.dom,t=this.metal.domData,n=this.metal.DomEventEmitterProxy,i=this.metal.DomEventHandle,a=this.metal.features,o=this.metal.globalEval,r=this.metal.globalEvalStyles;this.metalNamed.dom=this.metalNamed.dom||{},Object.keys(this.metalNamed.dom).forEach(function(e){this.metalNamed.dom[e]=this.metalNamed.dom[e]}),this.metalNamed.dom.domData=t,this.metalNamed.dom.DomEventEmitterProxy=n,this.metalNamed.dom.DomEventHandle=i,this.metalNamed.dom.features=a,this.metalNamed.dom.globalEval=o,this.metalNamed.dom.globalEvalStyles=r,this.metal.dom=e}.call(this),function(){var e=this.metalNamed.metal.object,t=this.metal.state,n={components:!0,context:!0,element:!0,refs:!0,state:!0,stateKey:!0,wasRendered:!0},i="__DATA_MANAGER_DATA__",a=function(){function a(){babelHelpers.classCallCheck(this,a)}return babelHelpers.createClass(a,[{key:"createState_",value:function(i,a){var o=new t(i.getInitialConfig(),i,i);o.setKeysBlacklist(n),o.configState(e.mixin({},a,t.getStateStatic(i.constructor))),this.getManagerData(i).state_=o}},{key:"dispose",value:function(e){var t=this.getManagerData(e);t.state_&&t.state_.dispose(),e[i]=null}},{key:"get",value:function(e,t){return this.getManagerData(e).state_.get(t)}},{key:"getManagerData",value:function(e){return e[i]}},{key:"getSyncKeys",value:function(e){return this.getManagerData(e).state_.getStateKeys()}},{key:"getStateKeys",value:function(e){return this.getManagerData(e).state_.getStateKeys()}},{key:"getState",value:function(e){return this.getManagerData(e).state_.getState()}},{key:"getStateInstance",value:function(e){return this.getManagerData(e).state_}},{key:"replaceNonInternal",value:function(e,t,n){for(var i=n||this.getManagerData(e).state_,a=i.getStateKeys(),o=0;o<a.length;o++){var r=a[o];i.getStateKeyConfig(r).internal||(t.hasOwnProperty(r)?i.set(r,t[r]):i.setDefaultValue(r))}}},{key:"setState",value:function(e,t,n){this.getManagerData(e).state_.setState(t,n)}},{key:"setUp",value:function(e,t){e[i]={},this.createState_(e,t)}}]),a}();this.metal.ComponentDataManager=new a}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"dispose",value:function(){}},{key:"getExtraDataConfig",value:function(){}},{key:"render",value:function(e){e.element||(e.element=document.createElement("div")),e.informRendered()}},{key:"setUp",value:function(){}},{key:"update",value:function(){}}]),e}();this.metal.ComponentRenderer=new e}.call(this),function(){var e=this.metalNamed.events.addListenersFromObj,t=this.metalNamed.metal.getStaticProperty,n=this.metalNamed.metal.isBoolean,i=this.metalNamed.metal.isDefAndNotNull,a=this.metalNamed.metal.isElement,o=this.metalNamed.metal.isObject,r=this.metalNamed.metal.isString,s=this.metalNamed.metal.object,l=this.metalNamed.sync.syncState,u=this.metalNamed.dom.DomEventEmitterProxy,c=this.metalNamed.dom.toElement,d=this.metal.ComponentDataManager,h=this.metal.ComponentRenderer,g=this.metalNamed.events.EventEmitter,m=this.metalNamed.events.EventHandler,p=function(n){function d(e,t){babelHelpers.classCallCheck(this,d);var n=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return n.elementEventProxy_=new u(null,n,f),n.eventsStateKeyHandler_=null,n.inDocument=!1,n.initialConfig_=e||{},n.wasRendered=!1,n.DEFAULT_ELEMENT_PARENT=document.body,n.setShouldUseFacade(!0),n.element=n.initialConfig_.element,n.setUpRenderer_(),n.setUpDataManager_(),n.setUpSyncUpdates_(),n.on("stateChanged",n.handleComponentStateChanged_),n.on("eventsChanged",n.onEventsChanged_),n.addListenersFromObj_(n.dataManager_.get(n,"events")),n.created(),n.componentCreated_=!0,t!==!1&&n.renderComponent(t),n}return babelHelpers.inherits(d,n),babelHelpers.createClass(d,[{key:"addListenersFromObj_",value:function(t){var n;this.eventsStateKeyHandler_||(this.eventsStateKeyHandler_=new m);var i=e(this,t);(n=this.eventsStateKeyHandler_).add.apply(n,babelHelpers.toConsumableArray(i))}},{key:"attach",value:function(e,t){return this.inDocument||(this.attachElement(e,t),this.inDocument=!0,this.attachData_={parent:e,sibling:t},this.emit("attached",this.attachData_),this.attached()),this}},{key:"attached",value:function(){}},{key:"attachElement",value:function(e,t){var n=this.element;if(n&&(t||!n.parentNode)){var i=c(e)||this.DEFAULT_ELEMENT_PARENT;i.insertBefore(n,c(t))}}},{key:"created",value:function(){}},{key:"delegate",value:function(e,t,n){return this.on("delegate:"+e+":"+t,n)}},{key:"detach",value:function(){return this.inDocument&&(this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.inDocument=!1,this.detached()),this.emit("detached"),this}},{key:"detached",value:function(){}},{key:"disposed",value:function(){}},{key:"disposeInternal",value:function(){this.detach(),this.disposed(),this.elementEventProxy_.dispose(),this.elementEventProxy_=null,this.dataManager_.dispose(this),this.dataManager_=null,this.renderer_.dispose(this),this.renderer_=null,babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"disposeInternal",this).call(this)}},{key:"getAttachData",value:function(){return this.attachData_}},{key:"getDataManager",value:function(){return this.dataManager_}},{key:"getInitialConfig",value:function(){return this.initialConfig_}},{key:"getState",value:function(){return this.dataManager_.getState(this)}},{key:"getStateKeys",value:function(){return this.dataManager_.getStateKeys(this)}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"handleComponentElementChanged_",value:function(e,t){this.elementEventProxy_.setOriginEmitter(t),this.componentCreated_&&(this.emit("elementChanged",{prevVal:e,newVal:t}),t&&this.wasRendered&&this.syncVisible(this.dataManager_.get(this,"visible")))}},{key:"handleComponentStateChanged_",value:function(e){this.hasSyncUpdates()||this.updateRenderer_(e),l(this,e.changes),this.emit("stateSynced",e)}},{key:"handleComponentStateKeyChanged_",value:function(e){this.updateRenderer_({changes:babelHelpers.defineProperty({},e.key,e)})}},{key:"hasSyncUpdates",value:function(){return this.syncUpdates_}},{key:"informRendered",value:function(){var e=!this.hasRendererRendered_;this.hasRendererRendered_=!0,this.rendered(e),this.emit("rendered",e)}},{key:"mergeElementClasses_",value:function(e,t){return e?e+" "+(t||""):t}},{key:"onEventsChanged_",value:function(e){this.eventsStateKeyHandler_.removeAllListeners(),this.addListenersFromObj_(e.newVal)}},{key:"renderComponent",value:function(e){this.hasRendererRendered_||(window.__METAL_DEV_TOOLS_HOOK__&&window.__METAL_DEV_TOOLS_HOOK__(this),this.getRenderer().render(this)),this.emit("render"),l(this),this.attach(e),this.wasRendered=!0}},{key:"setState",value:function(e,t){this.dataManager_.setState(this,e,t)}},{key:"setterElementClassesFn_",value:function(e){var n=t(this.constructor,"ELEMENT_CLASSES",this.mergeElementClasses_);return n&&(e+=" "+n),e.trim()}},{key:"setUpDataManager_",value:function(){this.dataManager_=t(this.constructor,"DATA_MANAGER"),this.dataManager_.setUp(this,s.mixin({},this.renderer_.getExtraDataConfig(this),d.DATA))}},{key:"setUpRenderer_",value:function(){this.renderer_=t(this.constructor,"RENDERER"),this.renderer_.setUp(this)}},{key:"setUpSyncUpdates_",value:function(){this.syncUpdates_=t(this.constructor,"SYNC_UPDATES"),this.hasSyncUpdates()&&this.on("stateKeyChanged",this.handleComponentStateKeyChanged_.bind(this))}},{key:"startSkipUpdates",value:function(){this.skipUpdates_=!0}},{key:"stopSkipUpdates",value:function(){this.skipUpdates_=!1}},{key:"syncVisible",value:function(e){this.element&&(this.element.style.display=e?"":"none")}},{key:"rendered",value:function(){}},{key:"updateRenderer_",value:function(e){!this.skipUpdates_&&this.hasRendererRendered_&&this.getRenderer().update(this,e)}},{key:"validatorEventsFn_",value:function(e){return!i(e)||o(e)}},{key:"element",get:function(){return this.elementValue_},set:function(e){if((a(e)||r(e)||!i(e))&&(e&&(e=c(e)||this.elementValue_),this.elementValue_!==e)){var t=this.elementValue_;this.elementValue_=e,this.handleComponentElementChanged_(t,e)}}}],[{key:"isComponentCtor",value:function(e){return e.prototype&&e.prototype[d.COMPONENT_FLAG]}},{key:"render",value:function(e,t,n){var i=t,o=n;a(t)&&(i=null,o=t);var r=new e(i,(!1));return r.renderComponent(o),r}}]),d}(g);p.DATA={children:{validator:Array.isArray,value:[]},elementClasses:{setter:"setterElementClassesFn_",validator:r,value:""},events:{validator:"validatorEventsFn_",value:null},visible:{validator:n,value:!0}},p.COMPONENT_FLAG="__metal_component__",p.DATA_MANAGER=d,p.ELEMENT_CLASSES="",p.RENDERER=h,p.SYNC_UPDATES=!1,p.prototype[p.COMPONENT_FLAG]=!0;var f={eventsChanged:!0,stateChanged:!0,stateKeyChanged:!0};this.metal.Component=p}.call(this),function(){var e=this.metalNamed.metal.getFunctionName,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"getConstructor",value:function(e){var n=t.components_[e];return n}},{key:"register",value:function(n,i){var a=i;a||(a=n.hasOwnProperty("NAME")?n.NAME:e(n)),n.NAME=a,t.components_[a]=n}}]),t}();t.components_={},this.metal.ComponentRegistry=t}.call(this),function(){var e=this.metal.Component,t=this.metal.ComponentDataManager,n=this.metal.ComponentRegistry,i=this.metal.ComponentRenderer;this.metal.component=e,this.metalNamed.component=this.metalNamed.component||{},this.metalNamed.component.Component=e,this.metalNamed.component.ComponentDataManager=t,this.metalNamed.component.ComponentRegistry=n,this.metalNamed.component.ComponentRenderer=i,Object.keys(this.metalNamed.events).forEach(function(e){this.metalNamed.component[e]=this.metalNamed.events[e]})}.call(this),function(){/**
   * @license
   * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
var e="undefined"!=typeof exports&&"undefined"!=typeof global?global:window;!function(e,t){t(e.IncrementalDOM=e.IncrementalDOM||{})}(e,function(e){"use strict";function t(){}function n(e,t){this.attrs=r(),this.attrsArr=[],this.newAttrs=r(),this.staticsApplied=!1,this.key=t,this.keyMap=r(),this.keyMapValid=!0,this.focused=!1,this.nodeName=e,this.text=null}function i(){this.created=m.nodesCreated&&[],this.deleted=m.nodesDeleted&&[]}var a=Object.prototype.hasOwnProperty;t.prototype=Object.create(null);var o=function(e,t){return a.call(e,t)},r=function(){return new t},s="__incrementalDOMData",l=function(e,t,i){var a=new n(t,i);return e[s]=a,a},u=function(e){return c(e),e[s]},c=function le(e){if(!e[s]){var t=e instanceof Element,n=t?e.localName:e.nodeName,i=t?e.getAttribute("key"):null,a=l(e,n,i);if(i&&(u(e.parentNode).keyMap[i]=e),t)for(var o=e.attributes,r=a.attrs,c=a.newAttrs,d=a.attrsArr,h=0;h<o.length;h+=1){var g=o[h],m=g.name,p=g.value;r[m]=p,c[m]=void 0,d.push(m),d.push(p)}for(var f=e.firstChild;f;f=f.nextSibling)le(f)}},d=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"foreignObject"===u(t).nodeName?null:t.namespaceURI},h=function(e,t,n,i){var a=d(n,t),o=void 0;return o=a?e.createElementNS(a,n):e.createElement(n),l(o,n,i),o},g=function(e){var t=e.createTextNode("");return l(t,"#text",null),t},m={nodesCreated:null,nodesDeleted:null};i.prototype.markCreated=function(e){this.created&&this.created.push(e)},i.prototype.markDeleted=function(e){this.deleted&&this.deleted.push(e)},i.prototype.notifyChanges=function(){this.created&&this.created.length>0&&m.nodesCreated(this.created),this.deleted&&this.deleted.length>0&&m.nodesDeleted(this.deleted)};var p=function(e){return e instanceof Document||e instanceof DocumentFragment},f=function(e,t){for(var n=[],i=e;i!==t;)n.push(i),i=i.parentNode;return n},v=function(e){for(var t=e,n=t;t;)n=t,t=t.parentNode;return n},_=function(e){var t=v(e);return p(t)?t.activeElement:null},y=function(e,t){var n=_(e);return n&&e.contains(n)?f(n,t):[]},b=function(e,t,n){for(var i=t.nextSibling,a=n;a!==t;){var o=a.nextSibling;e.insertBefore(a,i),a=o}},E=null,C=null,k=null,S=null,N=function(e,t){for(var n=0;n<e.length;n+=1)u(e[n]).focused=t},D=function(e){var t=function(t,n,a){var o=E,r=S,s=C,l=k;E=new i,S=t.ownerDocument,k=t.parentNode;var u=y(t,k);N(u,!0);var c=e(t,n,a);return N(u,!1),E.notifyChanges(),E=o,S=r,C=s,k=l,c};return t},O=D(function(e,t,n){return C=e,H(),t(n),x(),e}),T=D(function(e,t,n){var i={nextSibling:e};return C=i,t(n),e!==C&&e.parentNode&&I(k,e,u(k).keyMap),i===C?null:C}),A=function(e,t,n){var i=u(e);return t===i.nodeName&&n==i.key},R=function(e,t){if(!C||!A(C,e,t)){var n=u(k),i=C&&u(C),a=n.keyMap,o=void 0;if(t){var r=a[t];r&&(A(r,e,t)?o=r:r===C?E.markDeleted(r):I(k,r,a))}o||(o="#text"===e?g(S):h(S,k,e,t),t&&(a[t]=o),E.markCreated(o)),u(o).focused?b(k,o,C):i&&i.key&&!i.focused?(k.replaceChild(o,C),n.keyMapValid=!1):k.insertBefore(o,C),C=o}},I=function(e,t,n){t.parentNode===e&&e.removeChild(t),E.markDeleted(t);var i=u(t).key;i&&delete n[i]},L=function(){var e=k,t=u(e),n=t.keyMap,i=t.keyMapValid,a=e.lastChild,o=void 0;if(a!==C||!i){for(;a!==C;)I(e,a,n),a=e.lastChild;if(!i){for(o in n)a=n[o],a.parentNode!==e&&(E.markDeleted(a),delete n[o]);t.keyMapValid=!0}}},H=function(){k=C,C=null},P=function(){return C?C.nextSibling:k.firstChild},w=function(){C=P()},x=function(){L(),C=k,k=k.parentNode},M=function(e,t){return w(),R(e,t),H(),k},F=function(){return x(),C},j=function(){return w(),R("#text",null),C},U=function(){return k},B=function(){return P()},q=function(){C=k.lastChild},V=w,G={"default":"__default"},K=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0},z=function(e,t,n){if(null==n)e.removeAttribute(t);else{var i=K(t);i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}},$=function(e,t,n){e[t]=n},Y=function(e,t,n){t.indexOf("-")>=0?e.setProperty(t,n):e[t]=n},W=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var i=e.style,a=n;for(var r in a)o(a,r)&&Y(i,r,a[r])}},Q=function(e,t,n){var i="undefined"==typeof n?"undefined":babelHelpers["typeof"](n);"object"===i||"function"===i?$(e,t,n):z(e,t,n)},X=function(e,t,n){var i=u(e),a=i.attrs;if(a[t]!==n){var o=J[t]||J[G["default"]];o(e,t,n),a[t]=n}},J=r();J[G["default"]]=Q,J.style=W;var Z=3,ee=[],te=function(e,t,n,i){var a=M(e,t),o=u(a);if(!o.staticsApplied){if(n)for(var r=0;r<n.length;r+=2){var s=n[r],l=n[r+1];X(a,s,l)}o.staticsApplied=!0}for(var c=o.attrsArr,d=o.newAttrs,h=!c.length,g=Z,m=0;g<arguments.length;g+=2,m+=2){var p=arguments[g];if(h)c[m]=p,d[p]=void 0;else if(c[m]!==p)break;var l=arguments[g+1];(h||c[m+1]!==l)&&(c[m+1]=l,X(a,p,l))}if(g<arguments.length||m<c.length){for(;g<arguments.length;g+=1,m+=1)c[m]=arguments[g];for(m<c.length&&(c.length=m),g=0;g<c.length;g+=2){var s=c[g],l=c[g+1];d[s]=l}for(var f in d)X(a,f,d[f]),d[f]=void 0}return a},ne=function(e,t,n){ee[0]=e,ee[1]=t,ee[2]=n},ie=function(e,t){ee.push(e),ee.push(t)},ae=function(){var e=te.apply(null,ee);return ee.length=0,e},oe=function(e){var t=F();return t},re=function(e,t,n,i){return te.apply(null,arguments),oe(e)},se=function(e,t){var n=j(),i=u(n);if(i.text!==e){i.text=e;for(var a=e,o=1;o<arguments.length;o+=1){var r=arguments[o];a=r(a)}n.data=a}return n};e.patch=O,e.patchInner=O,e.patchOuter=T,e.currentElement=U,e.currentPointer=B,e.skip=q,e.skipNode=V,e.elementVoid=re,e.elementOpenStart=ne,e.elementOpenEnd=ae,e.elementOpen=te,e.elementClose=oe,e.text=se,e.attr=ie,e.symbols=G,e.attributes=J,e.applyAttr=z,e.applyProp=$,e.notifications=m,e.importNode=c})}.call(this),function(){function e(e){e[n]=null}function t(e){return e[n]||(e[n]={}),e[n]}var n="__METAL_IC_RENDERER_DATA__";this.metalNamed.data=this.metalNamed.data||{},this.metalNamed.data.clearData=e,this.metalNamed.data.getData=t}.call(this),function(){function e(e){e.changes=null}function t(e,t){e.changes=e.changes||{};var n=t.type||"props";e.changes[n]=e.changes[n]||{},e.changes[n][t.key]=t}function n(e){return a(e).changes}function i(e){var n=a(e);e.on("stateKeyChanged",t.bind(null,n))}var a=this.metalNamed.data.getData;this.metalNamed.changes=this.metalNamed.changes||{},this.metalNamed.changes.clearChanges=e,this.metalNamed.changes.getChanges=n,this.metalNamed.changes.trackChanges=i}.call(this),function(){function e(e){var t={};e[1]&&(t.key=e[1]);for(var n=(e[2]||[]).concat(e.slice(3)),i=0;i<n.length;i+=2)t[n[i]]=n[i+1];return t}function t(e,t){for(var n=[e,t.key,[]],i=Object.keys(t),a=0;a<i.length;a++)"children"!==i[a]&&n.push(i[a],t[i[a]]);return n}this.metalNamed.callArgs=this.metalNamed.callArgs||{},this.metalNamed.callArgs.buildConfigFromCall=e,this.metalNamed.callArgs.buildCallFromConfig=t}.call(this),function(){function e(){return d}function t(e){return d[e]}function n(e){e.attr=a,e.elementOpenEnd=r,e.elementOpenStart=o,e.elementVoid=s,h.push(e)}function i(){h.pop()}function a(e,t){g.push(e,t)}function o(e,t,n){g=[e,t,n]}function r(){var e;return(e=IncrementalDOM).elementOpen.apply(e,babelHelpers.toConsumableArray(g))}function s(){return IncrementalDOM.elementOpen.apply(null,arguments),IncrementalDOM.elementClose.apply(null,arguments)}function l(){return h.length>0?h[h.length-1]:null}function u(e){var t={name:e},n=c.bind(t);return n}function c(){var e=this.name,t=l(),n=t&&t[e]||d[e];return n.apply(null,arguments)}this.metalNamed.intercept=this.metalNamed.intercept||{},this.metalNamed.intercept.getOriginalFns=e,this.metalNamed.intercept.getOriginalFn=t,this.metalNamed.intercept.startInterception=n,this.metalNamed.intercept.stopInterception=i;var d={attr:IncrementalDOM.attr,attributes:IncrementalDOM.attributes[IncrementalDOM.symbols["default"]],elementClose:IncrementalDOM.elementClose,elementOpen:IncrementalDOM.elementOpen,elementOpenEnd:IncrementalDOM.elementOpenEnd,elementOpenStart:IncrementalDOM.elementOpenStart,elementVoid:IncrementalDOM.elementVoid,text:IncrementalDOM.text},h=[],g=[];IncrementalDOM.attr=u("attr"),IncrementalDOM.elementClose=u("elementClose"),IncrementalDOM.elementOpen=u("elementOpen"),IncrementalDOM.elementOpenEnd=u("elementOpenEnd"),IncrementalDOM.elementOpenStart=u("elementOpenStart"),IncrementalDOM.elementVoid=u("elementVoid"),IncrementalDOM.text=u("text"),IncrementalDOM.attributes[IncrementalDOM.symbols["default"]]=u("attributes")}.call(this),function(){function e(e,t,n){y=e,f=t,p=n,b={props:{children:[]}},b.config=b.props,v=b,_=!0,h({elementClose:r,elementOpen:s,text:l})}function t(e){return d(e.tag)}function n(e){return e[m]}function i(e,t){if(_)return void o(e);if(!t||!t.call(null,e))if(d(e.text)){var a=e.args?e.args:[];a[0]=e.text,IncrementalDOM.text.apply(null,a)}else{var r=u(e.tag,e.props);if(r[0]={tag:r[0],owner:n(e)},IncrementalDOM.elementOpen.apply(null,r),e.props.children)for(var s=0;s<e.props.children.length;s++)i(e.props.children[s],t);IncrementalDOM.elementClose(e.tag)}}function a(e,t){var n=babelHelpers.defineProperty({parent:v},m,y);return t?(n.text=e[0],e.length>1&&(n.args=e)):(n.tag=e[0],n.props=c(e),n.props.children=[],n.config=n.props),o(n),n}function o(e){v.props.children.push(e)}function r(){if(v===b){g(),_=!1;var e=f.call(y,b,p);return f=null,p=null,v=null,y=null,b=null,e}return v=v.parent,!0}function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];v=a(t)}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a(t,!0)}var u=this.metalNamed.callArgs.buildCallFromConfig,c=this.metalNamed.callArgs.buildConfigFromCall,d=this.metalNamed.metal.isDef,h=this.metalNamed.intercept.startInterception,g=this.metalNamed.intercept.stopInterception,m="__metalChildOwner";this.metalNamed.children=this.metalNamed.children||{},this.metalNamed.children.CHILD_OWNER=m,this.metalNamed.children.captureChildren=e,this.metalNamed.children.isChildTag=t,this.metalNamed.children.getOwner=n,this.metalNamed.children.renderChildTree=i;var p=void 0,f=void 0,v=void 0,_=!1,y=void 0,b=void 0}.call(this),function(){function e(e,n,i,l){var u=o(i);return u?void t(e,n,i,u,l):(l=a(i,l),s(n,i,l),void(d(l)?r(n,i,l):c("attributes")(n,i,l)))}function t(e,t,n,i,a){var o=i+m;t[o]&&(t[o].removeListener(),t[o]=null),t[n]=a;var r="data-on"+i.toLowerCase();a?(a.givenAsName_&&t.setAttribute(r,a.givenAsName_),t[o]=l(document,i,t,a)):t.removeAttribute(r)}function n(e,t){for(var n=Object.keys(t),a=0;a<n.length;a++){var o=n[a];t[o]=i(e,o,t[o])}}function i(e,t,n){if(g(n)){var i=o(t);if(i){var a=u(e,n);return a.givenAsName_=t,a}}return n}function a(e,t){return"checked"===e&&(t=h(t)&&t!==!1),t}function o(e){var t=p.exec(e),n=t?t[1]?t[1]:t[2]:null;return n?n.toLowerCase():null}function r(e,t,n){e[t]=n,n?e.setAttribute(t,""):e.removeAttribute(t)}function s(e,t,n){"value"===t&&e.value!==n&&(e[t]=n)}var l=this.metalNamed.dom.delegate,u=this.metalNamed.component.getComponentFn,c=this.metalNamed.intercept.getOriginalFn,d=this.metalNamed.metal.isBoolean,h=this.metalNamed.metal.isDefAndNotNull,g=this.metalNamed.metal.isString,m="__handle__",p=/^(?:on([A-Z].+))|(?:data-on(.+))$/;this.metalNamed.attributes=this.metalNamed.attributes||{},this.metalNamed.attributes.applyAttribute=e,this.metalNamed.attributes.convertListenerNamesToFns=n}.call(this),function(){function e(){if(!a){a=!0;for(var e=0;e<i.length;e++){var t=i[e];t.isDisposed()||n(t).parent||(t.element=null,t.dispose())}i=[],a=!1}}function t(e){for(var t=0;t<e.length;t++)e[t].isDisposed()||(n(e[t]).parent=null,i.push(e[t]))}var n=this.metalNamed.data.getData,i=[],a=!1;this.metalNamed.unused=this.metalNamed.unused||{},this.metalNamed.unused.disposeUnused=e,this.metalNamed.unused.schedule=t}.call(this),function(){function e(e,t){t["class"]?(t["class"]+=" "+e,t["class"]=b(t["class"])):t["class"]=e}function t(e){return 0===e.length?ne:e}function n(e){J(),U(e).rootElementReached||(e.element=null),e.informRendered(),i()}function i(){te.pop(),0===te.length&&Y()}function a(e,t){var n=U(e);return!n.rootElementReached&&n.config.key&&(t=n.config.key),e.getRenderer().generateKey(e,t)}function o(e){return e.childComponents=e.childComponents||[],e.childComponents}function r(){return te[te.length-1]}function s(){var e=IncrementalDOM.currentElement(),t=r(),n=U(t);return n.rootElementReached&&e!==t.element.parentNode&&(n=j.get(e)),n.icComponentsData=n.icComponentsData||{},n.icComponentsData}function l(e,t){var n=B();if(n){var i=e.getRenderer(),a=n.renderers,o=!a||a.indexOf(i)!==-1||a.indexOf(i.RENDERER_NAME)!==-1;if(o&&t.key&&!t.ref)return t.key}return t.ref}function u(e,t,n){var i=e;z(i)&&(i=ee.getConstructor(e));var a=l(n,t),o=void 0;if(V(a))o=_(n.components[a],i,t,n),n.components[a]=o,n.refs[a]=o;else{var r=s(),u=t.key;if(!V(u)){var c=q(i,!0);r.currCount=r.currCount||{},r.currCount[c]=r.currCount[c]||0,u="__METAL_IC__"+c+"_"+r.currCount[c]++}o=_(r.prevComps?r.prevComps[u]:null,i,t,n),r.currComps=r.currComps||{},r.currComps[u]=o}return o}function c(e,n){var i=n.props,a=n.tag;return i.children=t(e.props.children),k(a,i)}function d(e){if(e.tag&&f(e.tag))return e.props.children=t(e.props.children),k(e.tag,e.props,w(e)),!0}function h(e,t,n){R(r(),e,t,n)}function g(e){return f(e)?p.apply(null,arguments):m.apply(null,arguments)}function m(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=L(n),s=n[0],l=r(),u=l;if(x(s)&&(u=s.owner,s=s.tag),o.key=a(l,o.key),!U(l).rootElementReached){var c=l.getDataManager().get(l,"elementClasses");c&&e(c,o)}I(l,o);var d=H(s,o),h=Q("elementOpen").apply(null,d);return O(h),A(l,h),G(o.ref)&&(u.refs[o.ref]=h),u.getRenderer().handleNodeRendered(h),h}function p(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];P(r(),c,{props:L(t),tag:t[0]})}function f(e){return K(e)||z(e)&&e[0]===e[0].toUpperCase()}function v(e,t,n){return!(!e||e.constructor!==t||e.isDisposed())&&U(e).owner===n}function _(e,t,n,i){return v(e,t,i)?(e.startSkipUpdates(),e.getDataManager().replaceNonInternal(e,n),e.stopSkipUpdates()):e=new t(n,(!1)),U(e).config=n,e}function y(e){te.push(e);var t=U(e);D(t.icComponentsData),F(t),t.rootElementReached=!1,e.refs={},t.childComponents&&(W(t.childComponents),t.childComponents=null),X({attributes:h,elementOpen:g})}function b(e){for(var t=[],n=e.split(/\s+/),i={},a=0;a<n.length;a++)i[n[a]]||(i[n[a]]=!0,t.push(n[a]));return t.join(" ")}function E(e){y(e),e.getRenderer().renderIncDom(e),n(e)}function C(e){M(e,d)}function k(e,t,n){if(z(e)||e.prototype.getRenderer){var i=N(e,t,n);return A(r(),i.element),i.element}return e(t)}function S(e,t,n,i){return Z.isComponentCtor(t)||!function(){var n=t,i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"created",value:function(){var e=r();e&&T(this,e)}},{key:"render",value:function(){n(this.getInitialConfig())}}]),t}(Z);i.RENDERER=e,t=i}(),Z.render(t,n,i)}function N(e,t,n){var i=r(),a=n||i,s=u(e,t,a);T(s,i);var l=U(s);l.parent=i,l.owner=a;var c=U(i);return o(c).push(s),t.key||c.rootElementReached||(t.key=c.config.key),s.getRenderer().renderInsidePatch(s),s.wasRendered||s.renderComponent(),s}function D(e){e&&(e.prevComps=e.currComps,e.currComps=null,e.currCount=null)}function O(e){j.has(e)&&D(j.get(e).icComponentsData)}function T(e,t){var n=e.context,i=t.getChildContext?t.getChildContext():null;$.mixin(n,t.context,i),e.context=n}function A(e,t){var n=U(e);n.rootElementReached||(n.rootElementReached=!0,e.element!==t&&(e.element=t))}var R=this.metalNamed.attributes.applyAttribute,I=this.metalNamed.attributes.convertListenerNamesToFns,L=this.metalNamed.callArgs.buildConfigFromCall,H=this.metalNamed.callArgs.buildCallFromConfig,P=this.metalNamed.children.captureChildren,w=this.metalNamed.children.getOwner,x=this.metalNamed.children.isChildTag,M=this.metalNamed.children.renderChildTree,F=this.metalNamed.changes.clearChanges,j=this.metalNamed.dom.domData,U=this.metalNamed.data.getData,B=this.metalNamed.metal.getCompatibilityModeData,q=this.metalNamed.metal.getUid,V=this.metalNamed.metal.isDef,G=this.metalNamed.metal.isDefAndNotNull,K=this.metalNamed.metal.isFunction,z=this.metalNamed.metal.isString,$=this.metalNamed.metal.object,Y=this.metalNamed.unused.disposeUnused,W=this.metalNamed.unused.schedule,Q=this.metalNamed.intercept.getOriginalFn,X=this.metalNamed.intercept.startInterception,J=this.metalNamed.intercept.stopInterception,Z=this.metalNamed.component.Component,ee=this.metalNamed.component.ComponentRegistry,te=[],ne=[];this.metalNamed.render=this.metalNamed.render||{},this.metalNamed.render.getComponentBeingRendered=r,this.metalNamed.render.isComponentTag_=f,this.metalNamed.render.render=E,this.metalNamed.render.renderChild=C,this.metalNamed.render.renderFunction=S}.call(this),function(){function e(e){if(!e||!e.parentNode){var t=document.createElement("div");return e&&r(t,e),t}}function t(e,t,n){c.push(e);var i=l(e);i.render||(i.render=u.bind(null,e));var a=n?IncrementalDOM.patchOuter:IncrementalDOM.patch;a(t,i.render),c.pop()}function n(){return c[c.length-1]}function i(e){if(!a(e)&&!o(e)){var n=e.element;t(e,n,!0)}}function a(e){var t=l(e);if(!e.element&&t.parent)return t.parent.getRenderer().patch(t.parent),!0}function o(n){var i=e(n.element);if(i){if(t(n,i),s(n.element),n.element&&n.inDocument){var a=n.getAttachData();n.attachElement(a.parent,a.sibling)}return!0}}var r=this.metalNamed.dom.append,s=this.metalNamed.dom.exitDocument,l=this.metalNamed.data.getData,u=this.metalNamed.render.render,c=[];this.metalNamed.patch=this.metalNamed.patch||{},this.metalNamed.patch.getPatchingComponent=n,this.metalNamed.patch.patch=i}.call(this),function(){var e=this.metalNamed.changes.getChanges,t=this.metalNamed.changes.trackChanges,n=this.metalNamed.data.clearData,i=this.metalNamed.data.getData,a=this.metalNamed.children.getOwner,o=this.metalNamed.patch.getPatchingComponent,r=this.metalNamed.patch.patch,s=this.metalNamed.render.render,l=this.metalNamed.render.renderChild,u=this.metalNamed.render.renderFunction,c=this.metalNamed.component.Component,d=this.metalNamed.component.ComponentRenderer,h=function(d){function h(){return babelHelpers.classCallCheck(this,h),babelHelpers.possibleConstructorReturn(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return babelHelpers.inherits(h,d),babelHelpers.createClass(h,[{key:"buildShouldUpdateArgs",value:function(e){return[e.props]}},{key:"dispose",value:function(e){var t=i(e),a=t.config.ref,o=t.owner;if(o&&o.components&&o.components[a]===e&&delete o.components[a],t.childComponents)for(var r=0;r<t.childComponents.length;r++){var s=t.childComponents[r];s.isDisposed()||(s.element=null,s.dispose())}n(e)}},{key:"generateKey",value:function(e,t){return t}},{key:"getConfig",value:function(e){return i(e).config}},{key:"getData",value:function(e){return i(e)}},{key:"getPatchingComponent",value:function(){return o()}},{key:"handleNodeRendered",value:function(){}},{key:"isIncDomNode",value:function(e){return!!a(e)}},{key:"patch",value:function(e){r(e)}},{key:"render",value:function(e,t,n){return e instanceof c?void this.patch(e):u(this,e,t,n)}},{key:"renderChild",value:function(e){l(e)}},{key:"renderIncDom",value:function(e){e.render?e.render():IncrementalDOM.elementVoid("div")}},{key:"renderInsidePatch",value:function(t){var n=!t.wasRendered||this.shouldUpdate(t,e(t))||IncrementalDOM.currentPointer()!==t.element;n?s(t):t.element&&this.skipRender()}},{key:"setUp",value:function(e){e.context={},e.components={},e.refs={};var n=i(e);n.config=e.getInitialConfig(),t(e)}},{key:"shouldUpdate",value:function(e,t){return!!t&&(!e.shouldUpdate||e.shouldUpdate.apply(e,babelHelpers.toConsumableArray(this.buildShouldUpdateArgs(t))))}},{key:"skipNextChildrenDisposal",value:function(e){i(e).childComponents=null}},{key:"skipRender",value:function(){IncrementalDOM.skipNode()}},{key:"update",value:function(t){this.shouldUpdate(t,e(t))&&this.patch(t)}}]),h}(d.constructor),g=new h;g.RENDERER_NAME="incremental-dom",this.metal.IncrementalDomRenderer=g}.call(this),function(){(function(){this.CLOSURE_NO_DEPS=!0,this.goog=this.goog||{};var COMPILED=!1,goog=this.goog||{};goog.global=this,goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,n){var i=e.split("."),a=n||goog.global;i[0]in a||!a.execScript||a.execScript("var "+i[0]);for(var o;i.length&&(o=i.shift());)!i.length&&goog.isDef(t)?a[o]=t:a=a[o]?a[o]:a[o]={}},goog.define=function(e,t){var n=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?n=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(n=goog.global.CLOSURE_DEFINES[e])),goog.exportPath_(e,n)},goog.define("goog.DEBUG",!0),goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG),goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",!1),goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||e.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED)return goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var n,i=e.split("."),a=t||goog.global;n=i.shift();){if(!goog.isDefAndNotNull(a[n]))return null;a=a[n]}return a},goog.globalize=function(e,t){var n=t||goog.global;for(var i in e)n[i]=e[i]},goog.addDependency=function(e,t,n,i){if(goog.DEPENDENCIES_ENABLED){var a,o,r=e.replace(/\\/g,"/"),s=goog.dependencies_;i&&"boolean"!=typeof i||(i=i?{module:"goog"}:{});for(var l=0;a=t[l];l++)s.nameToPath[a]=r,s.pathIsModule[r]="goog"==i.module;for(var u=0;o=n[u];u++)r in s.requires||(s.requires[r]={}),s.requires[r][o]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e),goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.writeScripts_(t),null}var n="goog.require could not find: "+e;throw goog.logToConsole_(n),Error(n)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))return void(goog.basePath=goog.global.CLOSURE_BASE_PATH);if(goog.inHtmlDocument_())for(var e=goog.global.document,t=e.getElementsByTagName("SCRIPT"),n=t.length-1;n>=0;--n){var i=t[n],a=i.src,o=a.lastIndexOf("?"),r=o==-1?a.length:o;if("base.js"==a.substr(r-7,7))return void(goog.basePath=a.substr(0,r-7))}},goog.importScript_=function(e,t){var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;n(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(e){var t='goog.retrieveAndExecModule_("'+e+'");';goog.importScript_("",t)&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(e>0){var t=goog.queuedModules_;goog.queuedModules_=[];for(var n=0;n<e;n++){var i=t[n];goog.maybeProcessDeferredPath_(i)}}},goog.maybeProcessDeferredDep_=function(e){if(goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)){var t=goog.getPathFromDeps_(e);goog.maybeProcessDeferredPath_(goog.basePath+t)}},goog.isDeferredModule_=function(e){var t=goog.getPathFromDeps_(e);if(t&&goog.dependencies_.pathIsModule[t]){var n=goog.basePath+t;return n in goog.dependencies_.deferred}return!1},goog.allDepsAreAvailable_=function(e){var t=goog.getPathFromDeps_(e);if(t&&t in goog.dependencies_.requires)for(var n in goog.dependencies_.requires[t])if(!goog.isProvided_(n)&&!goog.isDeferredModule_(n))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModuleFromUrl=function(e){goog.retrieveAndExecModule_(e)},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1};var n;if(goog.isFunction(e))n=e.call(goog.global,{});else{if(!goog.isString(e))throw Error("Invalid module definition");n=goog.loadModuleFromSource_.call(goog.global,e)}var i=goog.moduleLoaderState_.moduleName;if(!goog.isString(i)||!i)throw Error('Invalid module name "'+i+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(i,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(n),goog.loadedModules_[i]=n}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(){"use strict";var exports={};return eval(arguments[0]),exports},goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"></script>')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,n=t.createElement("script");n.type="text/javascript",n.src=e,n.defer=!1,n.async=!1,t.head.appendChild(n)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var n=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==n.readyState){var i=/\bdeps.js$/.test(e);if(i)return!1;throw Error('Cannot write "'+e+'" after document load')}var a=goog.IS_OLD_IE_;if(void 0===t)if(a){var o=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";n.write('<script type="text/javascript" src="'+e+'"'+o+"></script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e);else n.write('<script type="text/javascript">'+t+"</script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(e){function t(e){if(!(e in a.written||e in a.visited)){if(a.visited[e]=!0,e in a.requires)for(var o in a.requires[e])if(!goog.isProvided_(o)){if(!(o in a.nameToPath))throw Error("Undefined nameToPath for "+o);t(a.nameToPath[o])}e in i||(i[e]=!0,n.push(e))}}var n=[],i={},a=goog.dependencies_;t(e);for(var o=0;o<n.length;o++){var r=n[o];goog.dependencies_.written[r]=!0}var s=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var o=0;o<n.length;o++){var r=n[o];if(!r)throw goog.moduleLoaderState_=s,Error("Undefined script input");a.pathIsModule[r]?goog.importModule_(goog.basePath+r):goog.importScript_(goog.basePath+r)}goog.moduleLoaderState_=s},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.normalizePath_=function(e){for(var t=e.split("/"),n=0;n<t.length;)"."==t[n]?t.splice(n,1):n&&".."==t[n]&&t[n-1]&&".."!=t[n-1]?t.splice(--n,2):n++;return t.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),t.responseText},goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,i=goog.loadFileSync_(e);if(null==i)throw new Error("load of "+e+"failed");var a=goog.wrapModule_(e,i),o=goog.IS_OLD_IE_;o?(goog.dependencies_.deferred[t]=a,goog.queuedModules_.push(t)):n(e,a)}},goog.typeOf=function(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);
/** @preserveTry */
try{delete e[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var n="array"==t?[]:{};for(var i in e)n[i]=goog.cloneObject(e[i]);return n}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw new Error;if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(t){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var n=goog.global.document,i=n.createElement("SCRIPT");i.type="text/javascript",i.defer=!1,i.appendChild(n.createTextNode(e)),n.body.appendChild(i),n.body.removeChild(i)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(e,t){var n,i=function(e){return goog.cssNameMapping_[e]||e},a=function(e){for(var t=e.split("-"),n=[],a=0;a<t.length;a++)n.push(i(t[a]));return n.join("-")};return n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?i:a:function(e){return e},t?e+"-"+n(t):n(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,i){for(var a=new Array(arguments.length-2),o=2;o<arguments.length;o++)a[o-2]=arguments[o];return t.prototype[n].apply(e,a)}},goog.base=function(e,t,n){var i=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!i)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(i.superClass_){for(var a=new Array(arguments.length-1),o=1;o<arguments.length;o++)a[o-1]=arguments[o];return i.superClass_.constructor.apply(e,a)}for(var r=new Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];for(var s=!1,l=e.constructor;l;l=l.superClass_&&l.superClass_.constructor)if(l.prototype[t]===i)s=!0;else if(s)return l.prototype[t].apply(e,r);if(e[t]===i)return e.constructor.prototype[t].apply(e,r);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.provide("goog.string"),goog.string.subs=function(e,t){for(var n=e.split("%s"),i="",a=Array.prototype.slice.call(arguments,1);a.length&&n.length>1;)i+=n.shift()+a.shift();return i+n.join("%s")},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var n,i={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};return n=t?t.createElement("div"):goog.global.document.createElement("div"),e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var a=i[e];if(a)return a;if("#"==t.charAt(0)){var o=Number("0"+t.substr(1));isNaN(o)||(a=String.fromCharCode(o))}return a||(n.innerHTML=e+" ",a=n.firstChild.nodeValue.slice(0,-1)),i[e]=a})},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var n=Number("0"+t.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return e}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.contains=function(e,t){return e.indexOf(t)!=-1},goog.string.htmlEscape=function(e,t){return t?(e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):goog.string.ALL_RE_.test(e)?(e.indexOf("&")!=-1&&(e=e.replace(goog.string.AMP_RE_,"&amp;")),e.indexOf("<")!=-1&&(e=e.replace(goog.string.LT_RE_,"&lt;")),e.indexOf(">")!=-1&&(e=e.replace(goog.string.GT_RE_,"&gt;")),e.indexOf('"')!=-1&&(e=e.replace(goog.string.QUOT_RE_,"&quot;")),e.indexOf("'")!=-1&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),e.indexOf("\0")!=-1&&(e=e.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&e.indexOf("e")!=-1&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):e},goog.debug={},goog.debug.runtimeType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":"undefined"==typeof e?"undefined":babelHelpers["typeof"](e)},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=(new Error).stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.provide("goog.i18n.bidi"),goog.provide("goog.i18n.bidi.Dir"),goog.provide("goog.i18n.bidi.DirectionalString"),goog.provide("goog.i18n.bidi.Format"),goog.define("goog.i18n.bidi.FORCE_RTL",!1),goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||goog.LOCALE.length>=3&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4)),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?e>0?goog.i18n.bidi.Dir.LTR:e<0?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-߿‏יִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=new RegExp("^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)","i"),goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){var n=void 0===t?goog.i18n.bidi.hasAnyRtl(e):t,i=n?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return e.replace(goog.i18n.bidi.bracketGuardTextRe_,i+"$&"+i)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){for(var n=0,i=0,a=!1,o=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),r=0;r<o.length;r++){var s=o[r];goog.i18n.bidi.startsWithRtl(s)?(n++,i++):goog.i18n.bidi.isRequiredLtrRe_.test(s)?a=!0:goog.i18n.bidi.hasAnyLtr(s)?i++:goog.i18n.bidi.hasNumeralsRe_.test(s)&&(a=!0)}return 0==i?a?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:n/i>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t),t&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr"))},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.i18n.bidi.DirectionalString.prototype.implementsGoogI18nBidiDirectionalString,goog.i18n.bidi.DirectionalString.prototype.getDirection,goog.provide("goog.asserts"),goog.define("goog.asserts.ENABLE_ASSERTS",goog.DEBUG),goog.asserts.AssertionError=function(e,t){t.unshift(e),goog.debug.Error.call(this,goog.string.subs.apply(null,t)),t.shift(),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(e,t,n,i){var a="Assertion failed";if(n){a+=": "+n;var o=i}else e&&(a+=": "+e,o=t);var r=new goog.asserts.AssertionError(""+a,o||[]);goog.asserts.errorHandler_(r)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,i){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":"undefined"==typeof e?"undefined":babelHelpers["typeof"](e)},goog.string.StringBuffer=function(e,t){null!=e&&this.append.apply(this,arguments)},goog.string.StringBuffer.prototype.buffer_="",goog.string.StringBuffer.prototype.set=function(e){this.buffer_=""+e},goog.string.StringBuffer.prototype.append=function(e,t,n){if(this.buffer_+=String(e),null!=t)for(var i=1;i<arguments.length;i++)this.buffer_+=arguments[i];return this},goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""},goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length},goog.string.StringBuffer.prototype.toString=function(){return this.buffer_},goog.soy={},goog.soy.data={},goog.soy.data.SanitizedContentKind={HTML:goog.DEBUG?{sanitizedContentKindHtml:!0}:{},JS:goog.DEBUG?{sanitizedContentJsChars:!0}:{},URI:goog.DEBUG?{sanitizedContentUri:!0}:{},TRUSTED_RESOURCE_URI:goog.DEBUG?{sanitizedContentTrustedResourceUri:!0}:{},ATTRIBUTES:goog.DEBUG?{sanitizedContentHtmlAttribute:!0}:{},CSS:goog.DEBUG?{sanitizedContentCss:!0}:{},TEXT:goog.DEBUG?{sanitizedContentKindText:!0}:{}},goog.soy.data.SanitizedContent=function(){throw Error("Do not instantiate directly")},goog.soy.data.SanitizedContent.prototype.contentKind,goog.soy.data.SanitizedContent.prototype.contentDir=null,goog.soy.data.SanitizedContent.prototype.content,goog.soy.data.SanitizedContent.prototype.getContent=function(){return this.content},goog.soy.data.SanitizedContent.prototype.toString=function(){return this.content},goog.soy.data.UnsanitizedText=function(){goog.soy.data.UnsanitizedText.base(this,"constructor")},goog.inherits(goog.soy.data.UnsanitizedText,goog.soy.data.SanitizedContent),function(){var e={};e.asserts={},e.esc={};var t={};e.StringBuilder=goog.string.StringBuffer,t.SanitizedContentKind=goog.soy.data.SanitizedContentKind,t.isContentKind=function(e,t){return null!=e&&e.contentKind===t},t.SanitizedUri=function(){goog.soy.data.SanitizedContent.call(this)},goog.inherits(t.SanitizedUri,goog.soy.data.SanitizedContent),t.SanitizedUri.prototype.contentKind=t.SanitizedContentKind.URI,t.SanitizedUri.prototype.contentDir=goog.i18n.bidi.Dir.LTR,t.UnsanitizedText=function(e,t){this.content=String(e),this.contentDir=null!=t?t:null},goog.inherits(t.UnsanitizedText,goog.soy.data.UnsanitizedText),t.UnsanitizedText.prototype.contentKind=t.SanitizedContentKind.TEXT,t.$$EMPTY_STRING_={VALUE:""},t.$$makeSanitizedContentFactory_=function(e){function t(e){this.content=e}function n(e,n){var i=new t(String(e));return void 0!==n&&(i.contentDir=n),i}return t.prototype=e.prototype,n},t.$$makeSanitizedContentFactoryWithDefaultDirOnly_=function(e){function t(e){this.content=e}function n(e){var n=new t(String(e));return n}return t.prototype=e.prototype,n},t.markUnsanitizedText=function(e,n){return new t.UnsanitizedText(e,n)},t.VERY_UNSAFE={},t.VERY_UNSAFE.ordainSanitizedUri=t.$$makeSanitizedContentFactoryWithDefaultDirOnly_(t.SanitizedUri),e.$$augmentMap=function(t,n){return e.$$assignDefaults(e.$$assignDefaults({},n),t)},e.$$assignDefaults=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},e.$$checkMapKey=function(e){if("string"!=typeof e)throw Error("Map literal's key expression must evaluate to string (encountered type \""+("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))+'").');return e},e.$$getMapKeys=function(e){var t=[];for(var n in e)t.push(n);return t},e.$$checkNotNull=function(e){if(null==e)throw Error("unexpected null value");return e},e.$$getDelTemplateId=function(e){return e},e.$$DELEGATE_REGISTRY_PRIORITIES_={},e.$$DELEGATE_REGISTRY_FUNCTIONS_={},e.$$registerDelegateFn=function(t,n,i,a){var o="key_"+t+":"+n,r=e.$$DELEGATE_REGISTRY_PRIORITIES_[o];if(void 0===r||i>r)e.$$DELEGATE_REGISTRY_PRIORITIES_[o]=i,e.$$DELEGATE_REGISTRY_FUNCTIONS_[o]=a;else if(i==r)throw Error('Encountered two active delegates with the same priority ("'+t+":"+n+'").')},e.$$getDelegateFn=function(t,n,i){var a=e.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+t+":"+n];if(a||""==n||(a=e.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+t+":"]),a)return a;if(i)return e.$$EMPTY_TEMPLATE_FN_;throw Error('Found no active impl for delegate call to "'+t+":"+n+'" (and not allowemptydefault="true").')},e.$$EMPTY_TEMPLATE_FN_=function(e,t,n){return""},e.$$truncate=function(t,n,i){return t=String(t),t.length<=n?t:(i&&(n>3?n-=3:i=!1),e.$$isHighSurrogate_(t.charAt(n-1))&&e.$$isLowSurrogate_(t.charAt(n))&&(n-=1),t=t.substring(0,n),i&&(t+="..."),t)},e.$$isHighSurrogate_=function(e){return 55296<=e&&e<=56319},e.$$isLowSurrogate_=function(e){return 56320<=e&&e<=57343},e.asserts.assertType=function(e,t,n,i,a){var o="expected param "+t+" of type "+i+(goog.DEBUG?", but got "+goog.debug.runtimeType(n):"")+".";return goog.asserts.assert(e,o,a)},e.esc.$$escapeHtmlHelper=function(e){return goog.string.htmlEscape(String(e))},e.$$filterImageDataUri=function(n){return t.VERY_UNSAFE.ordainSanitizedUri(e.esc.$$filterImageDataUriHelper(n))},e.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_=/^data:image\/(?:bmp|gif|jpe?g|png|tiff|webp);base64,[a-z0-9+\/]+=*$/i,e.esc.$$filterImageDataUriHelper=function(t){var n=String(t);return e.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_.test(n)?n:(goog.asserts.fail("Bad value `%s` for |filterImageDataUri",[n]),"data:image/gif;base64,zSoyz")},goog.loadModule(function(){return goog.module("soy"),e}),goog.loadModule(function(){return goog.module("soydata"),t}),goog.loadModule(function(){return goog.module("soy.asserts"),e})}(),goog.loadModule(function(){return goog.module("incrementaldom"),IncrementalDOM})}).call("undefined"!=typeof exports&&"undefined"!=typeof global?global:window)}.call(this),function(){/*
  * HTML5 Parser By Sam Blowes
  *
  * Designed for HTML5 documents
  *
  * Original code by John Resig (ejohn.org)
  * http://ejohn.org/blog/pure-javascript-html-parser/
  * Original code by Erik Arvidsson, Mozilla Public License
  * http://erik.eae.net/simplehtmlparser/simplehtmlparser.js
  *
  * ----------------------------------------------------------------------------
  * License
  * ----------------------------------------------------------------------------
  *
  * This code is triple licensed using Apache Software License 2.0,
  * Mozilla Public License or GNU Public License
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * Licensed under the Apache License, Version 2.0 (the "License"); you may not
  * use this file except in compliance with the License.  You may obtain a copy
  * of the License at http://www.apache.org/licenses/LICENSE-2.0
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * The contents of this file are subject to the Mozilla Public License
  * Version 1.1 (the "License"); you may not use this file except in
  * compliance with the License. You may obtain a copy of the License at
  * http://www.mozilla.org/MPL/
  *
  * Software distributed under the License is distributed on an "AS IS"
  * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  * License for the specific language governing rights and limitations
  * under the License.
  *
  * The Original Code is Simple HTML Parser.
  *
  * The Initial Developer of the Original Code is Erik Arvidsson.
  * Portions created by Erik Arvidssson are Copyright (C) 2004. All Rights
  * Reserved.
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
  * as published by the Free Software Foundation; either version 2
  * of the License, or (at your option) any later version.
  *
  * This program is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
  * @license
  */
(function(){function e(e){for(var t={},n=e.split(","),i=0;i<n.length;i++)t[n[i]]=!0;return t}var t=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,n=/^<\/([-A-Za-z0-9_]+)[^>]*>/,i=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,a=e("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),o=e("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),r=e("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),s=e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),l=e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),u=e("script,style");window.HTMLParser=function(e,c){function d(e,t,n,u){if(t=t.toLowerCase(),o[t])for(;f.last()&&r[f.last()]&&"span"!==f.last();)h("",f.last());if(s[t]&&f.last()==t&&h("",t),u=a[t]||!!u,u||f.push(t),c.start){var d=[];n.replace(i,function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:l[t]?t:"";d.push({name:t,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})}),c.start&&c.start(t,d,u)}}function h(e,t){if(t)for(var n=f.length-1;n>=0&&f[n]!=t;n--);else var n=0;if(n>=0){for(var i=f.length-1;i>=n;i--)c.end&&c.end(f[i]);f.length=n}}var g,m,p,f=[],v=e;for(f.last=function(){return this[this.length-1]};e;){if(m=!0,f.last()&&u[f.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+f.last()+"[^>]*>"),function(e,t){return t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),c.chars&&c.chars(t),""}),h("",f.last());else if(0==e.indexOf("<!--")?(g=e.indexOf("-->"),g>=0&&(c.comment&&c.comment(e.substring(4,g)),e=e.substring(g+3),m=!1)):0==e.indexOf("</")?(p=e.match(n),p&&(e=e.substring(p[0].length),p[0].replace(n,h),m=!1)):0==e.indexOf("<")&&(p=e.match(t),p&&(e=e.substring(p[0].length),p[0].replace(t,d),m=!1)),m){g=e.indexOf("<");var _=g<0?e:e.substring(0,g);e=g<0?"":e.substring(g),c.chars&&c.chars(_)}if(e==v)throw"Parse Error: "+e;v=e}h()}}).call(this)}.call(this),function(){function e(e){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},i=document.createElement("div");return e.replace(t,function(e,t){var a=n[e];if(a)return a;if("#"===t.charAt(0)){var o=Number("0"+t.substr(1));isNaN(o)||(a=String.fromCharCode(o))}return a||(i.innerHTML=e+" ",a=i.firstChild.nodeValue.slice(0,-1)),n[e]=a,a})}this.metal.unescape=e;var t=/&([^;\s<&]+);?/g}.call(this),function(){var e,t=this.metal.unescape,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"buildFn",value:function(e){return function(){return n.run(e)}}},{key:"getParser",value:function(){return e||window.HTMLParser}},{key:"run",value:function(e){n.getParser()(e,{start:function(e,t,n){for(var i=n?IncrementalDOM.elementVoid:IncrementalDOM.elementOpen,a=[e,null,[]],o=0;o<t.length;o++)a.push(t[o].name,t[o].value);i.apply(null,a)},end:function(e){IncrementalDOM.elementClose(e)},chars:function(e){IncrementalDOM.text(e,t)}})}},{key:"setParser",value:function(t){e=t}}]),n}();this.metal.HTML2IncDom=n}.call(this),function(){var e=this.metal.HTML2IncDom;this.metal.withParser=e}.call(this),function(){var e={interceptFns_:[],getOriginalFn:function(e){return e.originalFn?e.originalFn:e},handleTemplateCall_:function(t,n,i,a){var o=e.interceptFns_[e.interceptFns_.length-1];return o?o.call(null,t,n,i,a):t.call(null,n,i,a)},registerForInterception:function(t,n){var i=t[n];i.originalFn||(t[n]=e.handleTemplateCall_.bind(null,i),t[n].originalFn=i)},startInterception:function(t){e.interceptFns_.push(t)},stopAllInterceptions:function(){e.interceptFns_=[]},stopInterception:function(){e.interceptFns_.pop()}};this.metal.SoyAop=e}.call(this),function(){var e=this.metalNamed.component.ComponentRegistry,t=this.metalNamed.metal.isFunction,n=this.metalNamed.metal.isObject,i=this.metalNamed.metal.isString,a=this.metalNamed.metal.object,o=this.metalNamed.state.validators,r=this.metalNamed.state.Config,s=this.metal.withParser,l=this.metal.IncrementalDomRenderer,u=this.metal.SoyAop,c={},d=function(o){function r(){return babelHelpers.classCallCheck(this,r),babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return babelHelpers.inherits(r,o),babelHelpers.createClass(r,[{key:"getExtraDataConfig",value:function(e){var n=e.constructor.TEMPLATE;if(t(n)){n=u.getOriginalFn(n),this.soyParamTypes_=n.types||{};for(var i=n.params||[],a={},o=0;o<i.length;o++)e[i[o]]||(a[i[o]]={});return a}}},{key:"buildTemplateData_",value:function(e,n){var i=this,o=a.mixin({},this.getConfig(e));e.getStateKeys().forEach(function(t){var n=e[t];i.isHtmlParam_(e,t)&&(n=h.toIncDom(n)),o[t]=n});for(var r=0;r<n.length;r++)!o[n[r]]&&t(e[n[r]])&&(o[n[r]]=e[n[r]].bind(e));return t(e.prepareStateForRender)?e.prepareStateForRender(o)||o:o}},{key:"getTemplate",value:function(e,t){return function(n,i,a){if(!goog.loadedModules_[e])throw new Error('No template with namespace "'+e+'" has been loaded yet.');return goog.loadedModules_[e][t](n,i,a)}}},{key:"handleInterceptedCall_",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[e.componentCtor,null,[]];for(var i in t)n.push(i,t[i]);IncrementalDOM.elementVoid.apply(null,n)}},{key:"isHtmlParam_",value:function(e,t){var n=e.getDataManager().getStateInstance(e);if(n.getStateKeyConfig(t).isHtml)return!0;var i=u.getOriginalFn(e.constructor.TEMPLATE),a=(i.types||{})[t]||"";return a.split("|").indexOf("html")!==-1}},{key:"register",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"render";t.RENDERER=h,t.TEMPLATE=u.getOriginalFn(n[i]),t.TEMPLATE.componentCtor=t,u.registerForInterception(n,i),e.register(t)}},{key:"renderIncDom",value:function(e){var n=e.constructor.TEMPLATE;if(t(n)&&!e.render){n=u.getOriginalFn(n),u.startInterception(this.handleInterceptedCall_);var i=this.buildTemplateData_(e,n.params||[]);n(i,null,c),u.stopInterception()}else babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"renderIncDom",this).call(this,e)}},{key:"setInjectedData",value:function(e){c=e||{}}},{key:"shouldUpdate",value:function(e,t){var n=babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"shouldUpdate",this).call(this,e,t);if(!n||e.shouldUpdate)return n;for(var i=e.constructor.TEMPLATE,a=i?u.getOriginalFn(i).params:[],o=0;o<a.length;o++)if(t.props[a[o]])return!0;return!1}},{key:"toHtmlString",value:function(e){var t=document.createElement("div");return IncrementalDOM.patch(t,e),t.innerHTML}},{key:"toIncDom",value:function(e){return n(e)&&i(e.content)&&"HTML"===e.contentKind&&(e=e.content),i(e)&&(e=s.buildFn(e)),e}}]),r}(l.constructor),h=new d;h.RENDERER_NAME="soy",this.metal.Soy=h,this.metalNamed.Soy=this.metalNamed.Soy||{},this.metalNamed.Soy.Config=r,this.metalNamed.Soy.Soy=h,this.metalNamed.Soy.SoyAop=u,this.metalNamed.Soy.validators=o}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){l("div",null,null,"class","metal-playground"),l("div",null,null,"class","row"),i({title:"HTML",type:"html"},null,n),i({title:"CSS",type:"css"},null,n),i({title:"MetalJS",type:"js"},null,n),u("div"),l("div",null,null,"class","row"),l("div",null,null,"class","metal-playground-pane col-md-12"),l("div",null,null,"class","metal-playground-header"),d("Result"),u("div"),c("div",null,null,"class","metal-playground-content metal-playground-result-content"),u("div"),u("div"),u("div")}function i(e,t,n){r.asserts.assertType(goog.isString(e.type)||e.type instanceof goog.soy.data.SanitizedContent,"type",e.type,"string|goog.soy.data.SanitizedContent");var i=e.type;r.asserts.assertType(goog.isString(e.title)||e.title instanceof goog.soy.data.SanitizedContent,"title",e.title,"string|goog.soy.data.SanitizedContent");var a=e.title;l("div",null,null,"class","metal-playground-pane col-md-4"),l("div",null,null,"class","metal-playground-header");var o=a;"function"==typeof o?o():null!=o&&d(o),u("div"),c("div",null,null,"class","metal-playground-content metal-playground-"+i+"-content"),u("div")}function a(e,t,n){l("iframe"),l("html",null,null,"lang","en"),l("head"),l("meta",null,null,"charset","UTF-8"),u("meta"),l("title"),d("Playground result"),u("title"),l("link",null,null,"rel","stylesheet","href","https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"),u("link"),c("script",null,null,"src","https://metal.github.io/metal.js-standalone/bin/babel.bundle.js"),c("style"),u("head"),c("body"),u("html"),u("iframe")}function o(e,t,n){l("link",null,null,"rel","stylesheet","href","https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"),u("link"),c("script",null,null,"src","https://metal.github.io/metal.js-standalone/bin/babel.bundle.js"),c("script",null,null,"src","https://metal.github.io/metal.js-standalone/bin/metal.bundle.js")}goog.module("Playground.incrementaldom");var r=goog.require("soy");goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var s=goog.require("incrementaldom"),l=s.elementOpen,u=s.elementClose,c=s.elementVoid,d=(s.elementOpenStart,s.elementOpenEnd,s.text);s.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Playground.render"),t.pane=i,goog.DEBUG&&(i.soyTemplateName="Playground.pane"),t.result=a,goog.DEBUG&&(a.soyTemplateName="Playground.result"),t.tmp=o,goog.DEBUG&&(o.soyTemplateName="Playground.tmp"),t.render.params=["type","title"],t.render.types={type:"string",title:"string"},t.tmp.params=[],t.tmp.types={},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.Playground=this.metalNamed.Playground||{},this.metalNamed.Playground.Playground=i,this.metalNamed.Playground.templates=e,this.metal.Playground=e}.call(this),function(){function e(e){var t=document.createElement("a");return t.href=e,{hash:t.hash,hostname:t.hostname,password:t.password,pathname:"/"===t.pathname[0]?t.pathname:"/"+t.pathname,port:t.port,protocol:t.protocol,search:t.search,username:t.username}}this.metal.parseFromAnchor=e}.call(this),function(){function e(e){return t(URL)&&URL.length?new URL(e):n(e)}var t=this.metalNamed.metal.isFunction,n=this.metal.parseFromAnchor;this.metal.parse=e}.call(this),function(){var e=this.metalNamed.metal.Disposable,t=Object.create,n=function(e){function n(){babelHelpers.classCallCheck(this,n);var e=babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.keys=t(null),e.values=t(null),e}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"add",value:function(e,t){return this.keys[e.toLowerCase()]=e,this.values[e.toLowerCase()]=this.values[e.toLowerCase()]||[],this.values[e.toLowerCase()].push(t),this}},{key:"clear",value:function(){return this.keys=t(null),this.values=t(null),this}},{key:"contains",value:function(e){return e.toLowerCase()in this.values}},{key:"disposeInternal",value:function(){this.values=null}},{key:"get",value:function(e){var t=this.values[e.toLowerCase()];if(t)return t[0]}},{key:"getAll",value:function(e){return this.values[e.toLowerCase()]}},{key:"isEmpty",value:function(){return 0===this.size()}},{key:"names",value:function(){var e=this;return Object.keys(this.values).map(function(t){return e.keys[t]})}},{key:"remove",value:function(e){return delete this.keys[e.toLowerCase()],delete this.values[e.toLowerCase()],this}},{key:"set",value:function(e,t){return this.keys[e.toLowerCase()]=e,this.values[e.toLowerCase()]=[t],this}},{key:"size",value:function(){return this.names().length}},{key:"toString",value:function(){return JSON.stringify(this.values)}}],[{key:"fromObject",value:function(e){for(var t=new n,i=Object.keys(e),a=0;a<i.length;a++)t.set(i[a],e[i[a]]);return t}}]),n}(e);this.metal.MultiMap=n}.call(this),function(){var e=this.metalNamed.metal.array,t=function(){function t(e){babelHelpers.classCallCheck(this,t),this.value_=e,this.parent_=null,this.children_=null}return babelHelpers.createClass(t,[{key:"addChild",value:function(e){n(e),e.setParent(this),this.children_=this.children_||[],this.children_.push(e)}},{key:"contains",value:function(e){for(var t=e.getParent();t;){if(t===this)return!0;t=t.getParent()}return!1}},{key:"getAncestors",value:function(){for(var e=[],t=this.getParent();t;)e.push(t),t=t.getParent();return e}},{key:"getChildAt",value:function(e){return this.getChildren()[e]||null}},{key:"getChildren",value:function(){return this.children_||t.EMPTY_ARRAY}},{key:"getChildCount",value:function(){return this.getChildren().length}},{key:"getDepth",value:function(){for(var e=0,t=this;t.getParent();)e++,t=t.getParent();return e}},{key:"getParent",value:function(){return this.parent_}},{key:"getRoot",value:function(){for(var e=this;e.getParent();)e=e.getParent();return e}},{key:"getValue",value:function(){return this.value_}},{key:"isLeaf",value:function(){return!this.getChildCount()}},{key:"removeChild",value:function(t){return e.remove(this.getChildren(),t)?t:null}},{key:"setParent",value:function(e){this.parent_=e}},{key:"traverse",value:function(e,t){e&&e(this),this.getChildren().forEach(function(n){return n.traverse(e,t)}),t&&t(this)}}]),t}();t.EMPTY_ARRAY=[];var n=function(e){if(e.getParent())throw new Error("Cannot add child with parent.")};this.metal.TreeNode=t}.call(this),function(){var e=this.metal.MultiMap,t=this.metal.TreeNode;this.metalNamed.structs=this.metalNamed.structs||{},this.metalNamed.structs.MultiMap=e,this.metalNamed.structs.TreeNode=t}.call(this),function(){var e=this.metalNamed.metal.isDef,t=this.metalNamed.metal.string,n=this.metal.parse,i=this.metalNamed.structs.MultiMap,a=n,o=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";babelHelpers.classCallCheck(this,n),this.url=n.parse(this.maybeAddProtocolAndHostname_(e))}return babelHelpers.createClass(n,[{key:"addParametersFromMultiMap",value:function(e){var t=this;return e.names().forEach(function(n){e.getAll(n).forEach(function(e){t.addParameterValue(n,e)})}),this}},{key:"addParameterValue",value:function(t,n){return this.ensureQueryInitialized_(),e(n)&&(n=String(n)),this.query.add(t,n),this}},{key:"addParameterValues",value:function(e,t){var n=this;return t.forEach(function(t){return n.addParameterValue(e,t)}),this}},{key:"ensureQueryInitialized_",value:function(){var t=this;if(!this.query){this.query=new i;var a=this.url.search;a&&a.substring(1).split("&").forEach(function(i){var a=i.split("="),o=babelHelpers.slicedToArray(a,2),r=o[0],s=o[1];e(s)&&(s=n.urlDecode(s)),t.addParameterValue(r,s)})}}},{key:"getHash",value:function(){return this.url.hash||""}},{key:"getHost",value:function(){var e=this.getHostname();if(e){var t=this.getPort();t&&"80"!==t&&(e+=":"+t)}return e}},{key:"getHostname",value:function(){var e=this.url.hostname;return e===n.HOSTNAME_PLACEHOLDER?"":e}},{key:"getOrigin",value:function(){var e=this.getHost();return e?this.getProtocol()+"//"+e:""}},{key:"getParameterValue",value:function(e){return this.ensureQueryInitialized_(),this.query.get(e)}},{key:"getParameterValues",value:function(e){return this.ensureQueryInitialized_(),this.query.getAll(e)}},{key:"getParameterNames",value:function(){return this.ensureQueryInitialized_(),this.query.names()}},{key:"getPathname",value:function(){return this.url.pathname}},{key:"getPort",value:function(){return this.url.port}},{key:"getProtocol",value:function(){return this.url.protocol}},{key:"getSearch",value:function(){var t=this,n="",i="";return this.getParameterNames().forEach(function(n){t.getParameterValues(n).forEach(function(t){i+=n,e(t)&&(i+="="+encodeURIComponent(t)),i+="&"})}),i=i.slice(0,-1),i&&(n+="?"+i),n}},{key:"hasParameter",value:function(e){return this.ensureQueryInitialized_(),this.query.contains(e)}},{key:"makeUnique",value:function(){return this.setParameterValue(n.RANDOM_PARAM,t.getRandomString()),this}},{key:"maybeAddProtocolAndHostname_",value:function(e){var t=e;if(e.indexOf("://")===-1&&0!==e.indexOf("javascript:"))switch(t=n.DEFAULT_PROTOCOL,"/"===e[0]&&"/"===e[1]||(t+="//"),e.charAt(0)){case".":case"?":case"#":t+=n.HOSTNAME_PLACEHOLDER,t+="/",t+=e;break;case"":case"/":"/"!==e[1]&&(t+=n.HOSTNAME_PLACEHOLDER),t+=e;break;default:t+=e}return t}},{key:"removeParameter",value:function(e){return this.ensureQueryInitialized_(),this.query.remove(e),this}},{key:"removeUnique",value:function(){return this.removeParameter(n.RANDOM_PARAM),this}},{key:"setHash",value:function(e){return this.url.hash=e,this}},{key:"setHostname",value:function(e){return this.url.hostname=e,this}},{key:"setParameterValue",value:function(e,t){return this.removeParameter(e),this.addParameterValue(e,t),this}},{key:"setParameterValues",value:function(e,t){var n=this;return this.removeParameter(e),t.forEach(function(t){return n.addParameterValue(e,t)}),this}},{key:"setPathname",value:function(e){return this.url.pathname=e,this}},{key:"setPort",value:function(e){return this.url.port=e,this}},{key:"setProtocol",value:function(e){return this.url.protocol=e,":"!==this.url.protocol[this.url.protocol.length-1]&&(this.url.protocol+=":"),this}},{key:"toString",value:function(){var e="",t=this.getHost();return t&&(e+=this.getProtocol()+"//"),e+=t+this.getPathname()+this.getSearch()+this.getHash()}}],[{key:"getParseFn",value:function(){return a}},{key:"normalizeObject",value:function(e){var t=e.pathname?e.pathname.length:0;return t>1&&"/"===e.pathname[t-1]&&(e.pathname=e.pathname.substr(0,t-1)),e}},{key:"parse",value:function(e){return n.normalizeObject(a(e))}},{key:"setParseFn",value:function(e){a=e}},{key:"joinPaths",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),n=n.map(function(e){return"/"===e.charAt(0)?e.substring(1):e}),[e].concat(n).join("/").replace(/\/$/,"")}},{key:"urlDecode",value:function(e){return decodeURIComponent(e.replace(/\+/g," "))}}]),n}();o.DEFAULT_PROTOCOL="http:",o.HOSTNAME_PLACEHOLDER="hostname"+Date.now(),o.RANDOM_PARAM="zx",this.metal.Uri=o}.call(this),function(){var e=this.metalNamed.metal.isDef,t=this.metalNamed.metal.isFunction,n=this.metalNamed.metal.isObject,i=this.metalNamed.metal.async,a=function(){};a.prototype.then=function(){},a.IMPLEMENTED_BY_PROP="$goog_Thenable",a.addImplementation=function(e){e.prototype.then=e.prototype.then,e.prototype.$goog_Thenable=!0},a.isImplementedBy=function(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}};var o=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}},r=function s(e,t){this.state_=s.State_.PENDING,this.result_=void 0,this.parent_=null,this.callbackEntries_=null,this.executing_=!1,s.UNHANDLED_REJECTION_DELAY>0?this.unhandledRejectionId_=0:0===s.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1);try{var n=this;e.call(t,function(e){n.resolve_(s.State_.FULFILLED,e)},function(e){n.resolve_(s.State_.REJECTED,e)})}catch(i){this.resolve_(s.State_.REJECTED,i)}};r.UNHANDLED_REJECTION_DELAY=0,r.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},r.CallbackEntry_=null,r.resolve=function(e){return new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.length||t(void 0);for(var i,a=0;i=e[a];a++)i.then(t,n)})},r.all=function(e){return new r(function(t,n){var i=e.length,a=[];if(!i)return void t(a);for(var r,s=function(e,n){i--,a[e]=n,0===i&&t(a)},l=function(e){n(e)},u=0;r=e[u];u++)r.then(o(s,u),l)})},r.firstFulfilled=function(e){return new r(function(t,n){var i=e.length,a=[];if(!i)return void t(void 0);for(var r,s=function(e){t(e)},l=function(e,t){i--,a[e]=t,0===i&&n(a)},u=0;r=e[u];u++)r.then(s,o(l,u))})},r.prototype.then=function(e,n,i){return this.addChildPromise_(t(e)?e:null,t(n)?n:null,i)},a.addImplementation(r),r.prototype.thenAlways=function(e,t){var n=function(){try{e.call(t)}catch(n){r.handleRejection_.call(null,n)}};return this.addCallbackEntry_({child:null,onRejected:n,onFulfilled:n}),this},r.prototype.thenCatch=function(e,t){return this.addChildPromise_(null,e,t)},r.prototype["catch"]=r.prototype.thenCatch,r.prototype.cancel=function(e){this.state_===r.State_.PENDING&&i.run(function(){var t=new r.CancellationError(e);t.IS_CANCELLATION_ERROR=!0,this.cancelInternal_(t)},this)},r.prototype.cancelInternal_=function(e){this.state_===r.State_.PENDING&&(this.parent_?this.parent_.cancelChild_(this,e):this.resolve_(r.State_.REJECTED,e))},r.prototype.cancelChild_=function(e,t){if(this.callbackEntries_){for(var n,i=0,a=-1,o=0;n=this.callbackEntries_[o];o++){var s=n.child;if(s&&(i++,s===e&&(a=o),a>=0&&i>1))break}if(a>=0)if(this.state_===r.State_.PENDING&&1===i)this.cancelInternal_(t);else{var l=this.callbackEntries_.splice(a,1)[0];this.executeCallback_(l,r.State_.REJECTED,t)}}},r.prototype.addCallbackEntry_=function(e){this.callbackEntries_&&this.callbackEntries_.length||this.state_!==r.State_.FULFILLED&&this.state_!==r.State_.REJECTED||this.scheduleCallbacks_(),this.callbackEntries_||(this.callbackEntries_=[]),this.callbackEntries_.push(e)},r.prototype.addChildPromise_=function(t,n,i){var a={child:null,onFulfilled:null,onRejected:null};return a.child=new r(function(o,r){a.onFulfilled=t?function(e){try{var n=t.call(i,e);o(n)}catch(a){r(a)}}:o,a.onRejected=n?function(t){try{var a=n.call(i,t);!e(a)&&t.IS_CANCELLATION_ERROR?r(t):o(a)}catch(s){r(s)}}:r}),a.child.parent_=this,this.addCallbackEntry_(a),a.child},r.prototype.unblockAndFulfill_=function(e){if(this.state_!==r.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=r.State_.PENDING,this.resolve_(r.State_.FULFILLED,e)},r.prototype.unblockAndReject_=function(e){if(this.state_!==r.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=r.State_.PENDING,this.resolve_(r.State_.REJECTED,e)},r.prototype.resolve_=function(e,i){if(this.state_===r.State_.PENDING){if(this===i)e=r.State_.REJECTED,i=new TypeError("CancellablePromise cannot resolve to itself");else{if(a.isImplementedBy(i))return i=i,this.state_=r.State_.BLOCKED,void i.then(this.unblockAndFulfill_,this.unblockAndReject_,this);if(n(i))try{var o=i.then;if(t(o))return void this.tryThen_(i,o)}catch(s){e=r.State_.REJECTED,i=s}}this.result_=i,this.state_=e,this.scheduleCallbacks_(),e!==r.State_.REJECTED||i.IS_CANCELLATION_ERROR||r.addUnhandledRejection_(this,i)}},r.prototype.tryThen_=function(e,t){this.state_=r.State_.BLOCKED;var n=this,i=!1,a=function(e){i||(i=!0,n.unblockAndFulfill_(e))},o=function(e){i||(i=!0,n.unblockAndReject_(e))};try{t.call(e,a,o)}catch(s){o(s)}},r.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,i.run(this.executeCallbacks_,this))},r.prototype.executeCallbacks_=function(){for(;this.callbackEntries_&&this.callbackEntries_.length;){var e=this.callbackEntries_;this.callbackEntries_=[];for(var t=0;t<e.length;t++)this.executeCallback_(e[t],this.state_,this.result_)}this.executing_=!1},r.prototype.executeCallback_=function(e,t,n){t===r.State_.FULFILLED?e.onFulfilled(n):(this.removeUnhandledRejection_(),e.onRejected(n))},r.prototype.removeUnhandledRejection_=function(){var e;if(r.UNHANDLED_REJECTION_DELAY>0)for(e=this;e&&e.unhandledRejectionId_;e=e.parent_)clearTimeout(e.unhandledRejectionId_),e.unhandledRejectionId_=0;else if(0===r.UNHANDLED_REJECTION_DELAY)for(e=this;e&&e.hadUnhandledRejection_;e=e.parent_)e.hadUnhandledRejection_=!1},r.addUnhandledRejection_=function(e,t){r.UNHANDLED_REJECTION_DELAY>0?e.unhandledRejectionId_=setTimeout(function(){r.handleRejection_.call(null,t)},r.UNHANDLED_REJECTION_DELAY):0===r.UNHANDLED_REJECTION_DELAY&&(e.hadUnhandledRejection_=!0,i.run(function(){e.hadUnhandledRejection_&&r.handleRejection_.call(null,t)}))},r.handleRejection_=i.throwException,r.setUnhandledRejectionHandler=function(e){r.handleRejection_=e},r.CancellationError=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e&&(n.message=e),n}return babelHelpers.inherits(t,e),t}(Error),r.CancellationError.prototype.name="cancel",this.metalNamed.Promise=this.metalNamed.Promise||{},this.metalNamed.Promise.CancellablePromise=r,this.metal.Promise=r}.call(this),function(){var e=this.metalNamed.metal.isDef,t=this.metalNamed.metal.isDefAndNotNull,n=this.metal.Uri,i=this.metalNamed.Promise.CancellablePromise,a=function(){function a(){babelHelpers.classCallCheck(this,a)}return babelHelpers.createClass(a,null,[{key:"parseResponseHeaders",value:function(e){var t=[];if(!e)return t;for(var n=e.split("\r\n"),i=0;i<n.length;i++){var a=n[i].indexOf(": ");if(a>0){var o=n[i].substring(0,a),r=n[i].substring(a+2);t.push({name:o,value:r})}}return t}},{key:"request",value:function o(a,r,s,l,u,c,d,h){a=a||"",r=r||"GET";var o=new XMLHttpRequest,g=new i(function(e,t){o.onload=function(){return o.aborted?void o.onerror():void e(o)},o.onerror=function(){var e=new Error("Request error");e.request=o,t(e)}}).thenCatch(function(e){throw o.abort(),e}).thenAlways(function(){clearTimeout(m)});if(u&&(a=new n(a).addParametersFromMultiMap(u).toString()),o.open(r,a,!d),h&&(o.withCredentials=!0),l&&l.names().forEach(function(e){o.setRequestHeader(e,l.getAll(e).join(", "))}),o.send(e(s)?s:null),t(c))var m=setTimeout(function(){g.cancel("Request timeout")},c);return g}}]),a}();this.metal.Ajax=a}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metalNamed.events.EventHandler,i=this.metal.state,a=function(i){function a(e){babelHelpers.classCallCheck(this,a);var t=babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.headerEventHandler_=new n,t.on("headerChanged",t.syncHeader),t.syncHeader(),t}return babelHelpers.inherits(a,i),babelHelpers.createClass(a,[{key:"disposeInternal",value:function(){babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"disposeInternal",this).call(this),this.headerEventHandler_.removeAllListeners()}},{key:"getContentElement_",value:function(n){if(e.isElement(this.content))return this.content;var i=t.next(n,this.content);return i?i:(i=n.querySelector(this.content),i?i:this.container.querySelector(this.content))}},{key:"handleClick_",value:function(e){this.toggle(e.delegateTarget||e.currentTarget)}},{key:"handleKeydown_",value:function(e){13!==e.keyCode&&32!==e.keyCode||(this.toggle(e.delegateTarget||e.currentTarget),e.preventDefault())}},{key:"syncHeader",value:function(){this.headerEventHandler_.removeAllListeners(),this.header&&(e.isString(this.header)?this.headerEventHandler_.add(t.delegate(this.container,"click",this.header,this.handleClick_.bind(this)),t.delegate(this.container,"keydown",this.header,this.handleKeydown_.bind(this))):this.headerEventHandler_.add(t.on(this.header,"click",this.handleClick_.bind(this)),t.on(this.header,"keydown",this.handleKeydown_.bind(this))))}},{key:"toggle",value:function(e){var n=this.getContentElement_(e);t.toggleClasses(n,a.CSS_EXPANDED),t.toggleClasses(n,a.CSS_COLLAPSED),t.hasClass(n,a.CSS_EXPANDED)?(t.addClasses(e,a.CSS_HEADER_EXPANDED),t.removeClasses(e,a.CSS_HEADER_COLLAPSED)):(t.removeClasses(e,a.CSS_HEADER_EXPANDED),t.addClasses(e,a.CSS_HEADER_COLLAPSED))}}]),a}(i);a.STATE={container:{setter:t.toElement,validator:function(t){return e.isString(t)||e.isElement(t)},value:document},content:{validator:function(t){return e.isString(t)||e.isElement(t)}},header:{validator:function(t){return e.isString(t)||e.isElement(t)}}},a.CSS_COLLAPSED="toggler-collapsed",a.CSS_EXPANDED="toggler-expanded",a.CSS_HEADER_COLLAPSED="toggler-header-collapsed",a.CSS_HEADER_EXPANDED="toggler-header-expanded",this.metal.Toggler=a}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"intersectRect",value:function(e,t,n,i,a,o,r,s){return!(a>n||r<e||o>i||s<t)}}]),e}();this.metal.Geometry=e}.call(this),function(){var e=this.metal.metal,t=this.metal.Geometry,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"getClientHeight",value:function(e){return this.getClientSize_(e,"Height")}},{key:"getClientSize_",value:function(t,n){var i=t;return e.isWindow(t)&&(i=t.document.documentElement),e.isDocument(t)&&(i=t.documentElement),i["client"+n]}},{key:"getClientWidth",value:function(e){return this.getClientSize_(e,"Width")}},{key:"getDocumentRegion_",value:function(e){var t=this.getHeight(e),n=this.getWidth(e);return this.makeRegion(t,t,0,n,0,n)}},{key:"getHeight",value:function(e){return this.getSize_(e,"Height")}},{key:"getOffsetLeft",value:function(e,t){return e.offsetLeft+(t?0:n.getTranslation(e).left)}},{key:"getOffsetTop",value:function(e,t){return e.offsetTop+(t?0:n.getTranslation(e).top)}},{key:"getRegion",value:function(t,n){return e.isDocument(t)||e.isWindow(t)?this.getDocumentRegion_(t):this.makeRegionFromBoundingRect_(t.getBoundingClientRect(),n)}},{key:"getScrollLeft",value:function(t){return e.isWindow(t)?t.pageXOffset:e.isDocument(t)?t.defaultView.pageXOffset:t.scrollLeft}},{key:"getScrollTop",value:function(t){return e.isWindow(t)?t.pageYOffset:e.isDocument(t)?t.defaultView.pageYOffset:t.scrollTop}},{key:"getSize_",value:function(t,n){if(e.isWindow(t))return this.getClientSize_(t,n);if(e.isDocument(t)){var i=t.documentElement;return Math.max(t.body["scroll"+n],i["scroll"+n],t.body["offset"+n],i["offset"+n],i["client"+n])}return Math.max(t["client"+n],t["scroll"+n],t["offset"+n])}},{key:"getTransformMatrixValues",value:function(e){var t=getComputedStyle(e),n=t.msTransform||t.transform||t.webkitTransform||t.mozTransform;if("none"!==n){for(var i=[],a=/([\d-\.\s]+)/g,o=a.exec(n);o;)i.push(o[1]),o=a.exec(n);return i}}},{key:"getTranslation",value:function(e){var t=n.getTransformMatrixValues(e),i={left:0,top:0};return t&&(i.left=parseFloat(6===t.length?t[4]:t[13]),i.top=parseFloat(6===t.length?t[5]:t[14])),i}},{key:"getWidth",value:function(e){return this.getSize_(e,"Width")}},{key:"intersectRegion",value:function(e,n){return t.intersectRect(e.top,e.left,e.bottom,e.right,n.top,n.left,n.bottom,n.right)}},{key:"insideRegion",value:function(e,t){return t.top>=e.top&&t.bottom<=e.bottom&&t.right<=e.right&&t.left>=e.left}},{key:"insideViewport",value:function(e){return this.insideRegion(this.getRegion(window),e)}},{key:"intersection",value:function(e,t){if(!this.intersectRegion(e,t))return null;var n=Math.min(e.bottom,t.bottom),i=Math.min(e.right,t.right),a=Math.max(e.left,t.left),o=Math.max(e.top,t.top);return this.makeRegion(n,n-o,a,i,o,i-a)}},{key:"makeRegion",value:function(e,t,n,i,a,o){return{bottom:e,height:t,left:n,right:i,top:a,width:o}}},{key:"makeRegionFromBoundingRect_",value:function(e,t){var i=t?n.getScrollLeft(document):0,a=t?n.getScrollTop(document):0;return this.makeRegion(e.bottom+a,e.height,e.left+i,e.right+i,e.top+a,e.width)}},{key:"pointInsideRegion",value:function(e,t,i){return n.insideRegion(i,n.makeRegion(t,0,e,e,t,0))}}]),n}();this.metal.Position=n}.call(this),function(){var e=this.metal.Position,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"align",value:function(t,n,i){var a,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(o){
var r=this.suggestAlignBestRegion(t,n,i);i=r.position,a=r.region}else a=this.getAlignRegion(t,n,i);var s=window.getComputedStyle(t,null);if("fixed"!==s.getPropertyValue("position")){a.top+=window.pageYOffset,a.left+=window.pageXOffset;for(var l=t;l=l.offsetParent;)a.top-=e.getOffsetTop(l),a.left-=e.getOffsetLeft(l)}return t.style.top=a.top+"px",t.style.left=a.left+"px",i}},{key:"getAlignBestRegion",value:function(e,n,i){return t.suggestAlignBestRegion(e,n,i).region}},{key:"getAlignRegion",value:function(n,i,a){var o=e.getRegion(i),r=e.getRegion(n),s=0,l=0;switch(a){case t.TopCenter:s=o.top-r.height,l=o.left+o.width/2-r.width/2;break;case t.RightCenter:s=o.top+o.height/2-r.height/2,l=o.left+o.width;break;case t.BottomCenter:s=o.bottom,l=o.left+o.width/2-r.width/2;break;case t.LeftCenter:s=o.top+o.height/2-r.height/2,l=o.left-r.width;break;case t.TopRight:s=o.top-r.height,l=o.right-r.width;break;case t.BottomRight:s=o.bottom,l=o.right-r.width;break;case t.BottomLeft:s=o.bottom,l=o.left;break;case t.TopLeft:s=o.top-r.height,l=o.left}return{bottom:s+r.height,height:r.height,left:l,right:l+r.width,top:s,width:r.width}}},{key:"isValidPosition",value:function(e){return 0<=e&&e<=8}},{key:"suggestAlignBestRegion",value:function(t,n,i){for(var a=0,o=i,r=this.getAlignRegion(t,n,o),s=o,l=r,u=e.getRegion(window),c=0;c<8;){if(e.intersectRegion(u,l)){var d=e.intersection(u,l),h=d.width*d.height;if(h>a&&(a=h,r=l,o=s),e.insideViewport(l))break}s=(i+ ++c)%8,l=this.getAlignRegion(t,n,s)}return{position:o,region:r}}}]),t}();t.TopCenter=0,t.TopRight=1,t.RightCenter=2,t.BottomRight=3,t.BottomCenter=4,t.BottomLeft=5,t.LeftCenter=6,t.TopLeft=7,t.Top=t.TopCenter,t.Right=t.RightCenter,t.Bottom=t.BottomCenter,t.Left=t.LeftCenter,this.metal.Align=t}.call(this),function(){var e=this.metal.Align,t=this.metal.Geometry,n=this.metal.Position;this.metal.position=n,this.metalNamed.position=this.metalNamed.position||{},this.metalNamed.position.Align=e,this.metalNamed.position.Geometry=t,this.metalNamed.position.Position=n}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{},i.asserts.assertType(null==e.body||e.body instanceof Function||e.body instanceof a.UnsanitizedText||goog.isString(e.body),"body",e.body,"?soydata.SanitizedHtml|string|undefined");var o=e.body;i.asserts.assertType(null==e.header||e.header instanceof Function||e.header instanceof a.UnsanitizedText||goog.isString(e.header),"header",e.header,"?soydata.SanitizedHtml|string|undefined");var l=e.header,u=e.classMap?e.classMap:["dropup","dropup","dropright","dropdown","dropdown","dropdown","dropleft","dropup"],c=null!=e.alignedPosition?e.alignedPosition:e.position,d=null!=c?u[c]:"dropdown";r("div",null,null,"class",(e.positionClassOnMenu?"dropdown":d)+(e.elementClasses?" "+e.elementClasses:"")+(e.expanded?" open":"")),l&&l(),r("ul",null,null,"class","dropdown-menu"+(e.positionClassOnMenu?" "+d:"")),o&&o(),s("ul"),s("div")}goog.module("Dropdown.incrementaldom");var i=goog.require("soy"),a=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi");var o=goog.require("incrementaldom"),r=o.elementOpen,s=o.elementClose;o.elementVoid,o.elementOpenStart,o.elementOpenEnd,o.text,o.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Dropdown.render"),t.render.params=["body","header","alignedPosition","classMap","elementClasses","expanded","position","positionClassOnMenu"],t.render.types={body:"html",header:"html",alignedPosition:"any",classMap:"any",elementClasses:"any",expanded:"any",position:"any",positionClassOnMenu:"any"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.Dropdown=this.metalNamed.Dropdown||{},this.metalNamed.Dropdown.Dropdown=i,this.metalNamed.Dropdown.templates=e,this.metal.Dropdown=e}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metal.dom,i=this.metalNamed.position.Align,a=this.metal.component,o=this.metalNamed.events.EventHandler,r=this.metal.Soy,s=this.metal.Dropdown,l=function(a){function r(){return babelHelpers.classCallCheck(this,r),babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return babelHelpers.inherits(r,a),babelHelpers.createClass(r,[{key:"attached",value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"attached",this).call(this),this.eventHandler_.add(n.on(document,"click",this.handleDocClick_.bind(this)))}},{key:"created",value:function(){this.eventHandler_=new o}},{key:"detached",value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"detached",this).call(this),this.eventHandler_.removeAllListeners()}},{key:"close",value:function(){this.expanded=!1}},{key:"isOpen",value:function(){return this.expanded}},{key:"handleDocClick_",value:function(e){this.element.contains(e.target)||this.close()}},{key:"open",value:function(){this.expanded=!0}},{key:"setterClassMapFn_",value:function(e){return t.mixin(this.valueClassMapFn_(),e)}},{key:"setterPositionFn_",value:function(t){return e.isNumber(t)?t:"up"===t.toLowerCase()?i.TopLeft:i.BottomLeft}},{key:"syncExpanded",value:function(e){if(e&&this.alignElementSelector){var t=this.element.querySelector(this.alignElementSelector);if(t){var n=this.element.querySelector(".dropdown-menu");this.alignedPosition=i.align(n,t,this.position)}}}},{key:"toggle",value:function(){this.expanded=!this.expanded}},{key:"validatePosition_",value:function(e){if(i.isValidPosition(e))return!0;switch(e.toLowerCase()){case"up":case"down":return!0;default:return!1}}},{key:"valueBodyFn_",value:function(){var e=this.element&&this.element.querySelector(".dropdown-menu");return e?e.innerHTML:""}},{key:"valueClassMapFn_",value:function(){var e;return e={},babelHelpers.defineProperty(e,i.TopLeft,"dropup"),babelHelpers.defineProperty(e,i.TopCenter,"dropup"),babelHelpers.defineProperty(e,i.TopRight,"dropup"),babelHelpers.defineProperty(e,i.BottomLeft,"dropdown"),babelHelpers.defineProperty(e,i.BottomCenter,"dropdown"),babelHelpers.defineProperty(e,i.BottomRight,"dropdown"),babelHelpers.defineProperty(e,i.RightCenter,"dropright"),babelHelpers.defineProperty(e,i.LeftCenter,"dropleft"),e}},{key:"valueHeaderFn_",value:function(){if(this.element){for(var e=document.createElement("div"),t=0;t<this.element.childNodes.length&&!n.hasClass(this.element.childNodes[t],"dropdown-menu");t++)e.appendChild(this.element.childNodes[t].cloneNode(!0));return e.innerHTML}return""}}]),r}(a);r.register(l,s),l.STATE={alignedPosition:{validator:i.isValidPosition},alignElementSelector:{validator:e.isString},body:{isHtml:!0,valueFn:"valueBodyFn_"},classMap:{setter:"setterClassMapFn_",validator:e.isObject,valueFn:"valueClassMapFn_"},header:{isHtml:!0,valueFn:"valueHeaderFn_"},expanded:{value:!1},position:{setter:"setterPositionFn_",value:i.BottomLeft,validator:"validatePosition_"},positionClassOnMenu:{value:!1}},this.metal.Dropdown=l}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function i(e,t,n){var i;a.asserts.assertType(null==e.label||e.label instanceof Function||e.label instanceof goog.soy.data.SanitizedContent||e.label instanceof o.UnsanitizedText||goog.isString(e.label),"label",e.label,"?soydata.SanitizedHtml|string|undefined");var r=e.label;s("div",null,null,"class","select"+(e.elementClasses?" "+e.elementClasses:""),"data-onkeydown","handleKeyDown_");var h=null!=e.selectedIndex?e.selectedIndex:r||0==e.items.length?-1:0;s("input",null,null,"disabled",e.disabled,"type","hidden","name",e.hiddenInputName?e.hiddenInputName:"","value",h==-1?"":e.values?e.values[h]:""),l("input");var g=function(){for(var t=e.items,n=t.length,a=0;a<n;a++){var o=t[a];s("li",null,null,"data-onclick",null==(i=e.handleItemClick_)?"":i,"data-onkeydown",null==(i=e.handleItemKeyDown_)?"":i,"class","select-option"+(h==a?" selected":"")),s("a",null,null,"href","javascript:;");var r=o;"function"==typeof r?r():null!=r&&c(r),l("a"),l("li")}},m=function(){if(s("button",null,null,"class",(e.buttonClass?e.buttonClass:"")+" dropdown-select","disabled",e.disabled,"type","button","data-onclick","toggle","aria-haspopup","true","aria-expanded",e.expanded_?"true":"false"),h==-1){var t=r;"function"==typeof t?t():null!=t&&c(t)}else{var n=e.items[h];"function"==typeof n?n():null!=n&&c(n)}c(" "),u("span",null,null,"class",e.arrowClass?e.arrowClass:"caret"),l("button")};d({body:g,events:{stateSynced:e.handleDropdownStateSynced_},expanded:!e.disabled&&e.expanded_,header:m,ref:"dropdown"},null,n),l("div")}goog.module("Select.incrementaldom");var a=goog.require("soy"),o=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var r=goog.require("incrementaldom"),s=r.elementOpen,l=r.elementClose,u=r.elementVoid,c=(r.elementOpenStart,r.elementOpenEnd,r.text),d=(r.attr,n.getTemplate("Dropdown.incrementaldom","render"));return t.render=i,goog.DEBUG&&(i.soyTemplateName="Select.render"),t.render.params=["label","arrowClass","disabled","buttonClass","elementClasses","expanded_","handleDropdownStateSynced_","handleItemClick_","handleItemKeyDown_","hiddenInputName","items","values","selectedIndex"],t.render.types={label:"html|string",arrowClass:"any",disabled:"any",buttonClass:"any",elementClasses:"any",expanded_:"any",handleDropdownStateSynced_:"any",handleItemClick_:"any",handleItemKeyDown_:"any",hiddenInputName:"any",items:"any",values:"any",selectedIndex:"any"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.Select=this.metalNamed.Select||{},this.metalNamed.Select.Select=i,this.metalNamed.Select.templates=e,this.metal.Select=e}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.component,i=this.metal.Soy,a=this.metal.Select,o=function(n){function a(){return babelHelpers.classCallCheck(this,a),babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return babelHelpers.inherits(a,n),babelHelpers.createClass(a,[{key:"attached",value:function(){this.on("itemsChanged",this.handleItemsChanged_)}},{key:"findItemIndex_",value:function(e){for(var t=this.element.querySelectorAll("li"),n=0;n<t.length;n++)if(t.item(n)===e)return n}},{key:"focusIndex_",value:function(e){var t=this.element.querySelector(".select-option:nth-child("+(e+1)+") a");t&&(this.focusedIndex_=e,t.focus())}},{key:"getDropdown",value:function(){return this.components.dropdown}},{key:"getSelectedIndexDefaultValue_",value:function(){return this.label||!this.items.length?-1:0}},{key:"handleDropdownStateSynced_",value:function(e){this.openedWithKeyboard_?(this.focusIndex_(0),this.openedWithKeyboard_=!1):this.closedWithKeyboard_?(this.element.querySelector(".dropdown-select").focus(),this.closedWithKeyboard_=!1):e.changes.expanded&&(this.focusedIndex_=null),this.expanded_=this.getDropdown().expanded}},{key:"handleItemsChanged_",value:function(){this.selectedIndex=this.getSelectedIndexDefaultValue_()}},{key:"handleItemClick_",value:function(e){this.selectItem_(e.delegateTarget),e.preventDefault()}},{key:"handleItemKeyDown_",value:function(e){13!==e.keyCode&&32!==e.keyCode||(this.closedWithKeyboard_=!0,this.selectItem_(e.delegateTarget),e.preventDefault())}},{key:"handleKeyDown_",value:function(n){if(this.expanded_)switch(n.keyCode){case 27:this.closedWithKeyboard_=!0,this.expanded_=!1;break;case 38:this.focusedIndex_=e.isDefAndNotNull(this.focusedIndex_)?this.focusedIndex_:1,this.focusIndex_(0===this.focusedIndex_?this.items.length-1:this.focusedIndex_-1),n.preventDefault();break;case 40:this.focusedIndex_=e.isDefAndNotNull(this.focusedIndex_)?this.focusedIndex_:-1,this.focusIndex_(this.focusedIndex_===this.items.length-1?0:this.focusedIndex_+1),n.preventDefault()}else if((13===n.keyCode||32===n.keyCode)&&t.hasClass(n.target,"dropdown-select"))return this.openedWithKeyboard_=!0,this.expanded_=!0,void n.preventDefault()}},{key:"selectItem_",value:function(e){this.selectedIndex=this.findItemIndex_(e),this.expanded_=!1}},{key:"setItems_",value:function(e){return e.map(function(e){return i.toIncDom(e)})}}]),a}(n);i.register(o,a),o.STATE={arrowClass:{value:"caret"},buttonClass:{validator:e.isString,value:"btn btn-default"},disabled:{validator:e.isBoolean,value:!1},expanded_:{setter:function(e){return!this.disabled&&e},validator:e.isBoolean,value:!1,internal:!0},hiddenInputName:{validator:e.isString},items:{setter:"setItems_",validator:function(e){return e instanceof Array},valueFn:function(){return[]}},label:{validator:e.isString},selectedIndex:{validator:e.isNumber,valueFn:"getSelectedIndexDefaultValue_"},values:{validator:function(e){return e instanceof Array}}},o.ELEMENT_CLASSES="select",this.metal.Select=o}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metalNamed.position.Align,i=this.metal.component,a=this.metalNamed.events.EventHandler,o=function(e){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"attached",value:function(){this.align(),this.syncTriggerEvents(this.triggerEvents)}},{key:"created",value:function(){this.currentAlignElement=this.alignElement,this.eventHandler_=new a}},{key:"detached",value:function(){this.eventHandler_.removeAllListeners()}},{key:"disposeInternal",value:function(){babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disposeInternal",this).call(this),clearTimeout(this.delay_)}},{key:"align",value:function(e){this.syncCurrentAlignElement(e||this.currentAlignElement)}},{key:"callAsync_",value:function(e,t){clearTimeout(this.delay_),this.delay_=setTimeout(e.bind(this),t)}},{key:"handleHide",value:function(e){var t=e.delegateTarget,n=t&&t!==this.currentAlignElement;this.callAsync_(function(){this.locked_||(n?this.currentAlignElement=t:(this.visible=!1,this.syncVisible(!1)))},this.delay[1])}},{key:"handleShow",value:function(e){var t=e.delegateTarget;babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"syncVisible",this).call(this,!0),this.callAsync_(function(){this.currentAlignElement=t,this.visible=!0},this.delay[0])}},{key:"handleToggle",value:function(e){this.visible?this.handleHide(e):this.handleShow(e)}},{key:"lock",value:function(){this.locked_=!0}},{key:"unlock",value:function(e){this.locked_=!1,this.handleHide(e)}},{key:"syncAlignElement",value:function(e){this.currentAlignElement=e}},{key:"syncCurrentAlignElement",value:function(e,t){if(t&&e.removeAttribute("aria-describedby"),e){var i=e.getAttribute("data-title");i&&(this.title=i),this.inDocument&&(this.alignedPosition=n.Align.align(this.element,e,this.position))}}},{key:"syncPosition",value:function(){this.syncCurrentAlignElement(this.currentAlignElement)}},{key:"syncSelector",value:function(){this.syncTriggerEvents(this.triggerEvents)}},{key:"syncTriggerEvents",value:function(e){if(this.inDocument){this.eventHandler_.removeAllListeners();var n=this.selector;n&&(this.eventHandler_.add(this.on("mouseenter",this.lock),this.on("mouseleave",this.unlock)),e[0]===e[1]?this.eventHandler_.add(t.delegate(document,e[0],n,this.handleToggle.bind(this))):this.eventHandler_.add(t.delegate(document,e[0],n,this.handleShow.bind(this)),t.delegate(document,e[1],n,this.handleHide.bind(this))))}}},{key:"syncVisible",value:function(){this.align()}}]),n}(i);o.Align=n,o.STATE={alignedPosition:{validator:o.Align.isValidPosition},alignElement:{setter:t.toElement},currentAlignElement:{internal:!0,setter:t.toElement},delay:{validator:Array.isArray,value:[500,250]},triggerEvents:{validator:Array.isArray,value:["mouseenter","mouseleave"]},selector:{validator:e.isString},position:{validator:o.Align.isValidPosition,value:o.Align.Bottom},title:{}},o.PositionClasses=["top","right","bottom","left"],this.metal.TooltipBase=o}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{},i.asserts.assertType(null==e.title||e.title instanceof Function||e.title instanceof goog.soy.data.SanitizedContent||e.title instanceof a.UnsanitizedText||goog.isString(e.title),"title",e.title,"?soydata.SanitizedHtml|string|undefined");var o=e.title,c=["top","top","right","bottom","bottom","bottom","left","top"],d=null!=e.alignedPosition?e.alignedPosition:e.position,h=null!=d?c[d]:"bottom";if(r("div",null,null,"class","tooltip "+h+(e.elementClasses?" "+e.elementClasses:""),"role","tooltip"),l("div",null,null,"class","tooltip-arrow"),r("section",null,null,"class","tooltip-inner"),o){var g=o;"function"==typeof g?g():null!=g&&u(g)}s("section"),s("div")}goog.module("Tooltip.incrementaldom");var i=goog.require("soy"),a=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var o=goog.require("incrementaldom"),r=o.elementOpen,s=o.elementClose,l=o.elementVoid,u=(o.elementOpenStart,o.elementOpenEnd,o.text);o.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Tooltip.render"),t.render.params=["title","alignedPosition","elementClasses","position"],t.render.types={title:"html|string",alignedPosition:"any",elementClasses:"any",position:"any"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.Tooltip=this.metalNamed.Tooltip||{},this.metalNamed.Tooltip.Tooltip=i,this.metalNamed.Tooltip.templates=e,this.metal.Tooltip=e}.call(this),function(){var e=this.metal.dom,t=this.metal.Soy,n=this.metal.TooltipBase,i=this.metal.Tooltip,a=function(t){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"hideCompletely_",value:function(){this.isDisposed()||!this.element||this.visible||(this.element.style.display="none")}},{key:"syncVisible",value:function(t){t?this.element.style.display="":(e.once(this.element,"animationend",this.hideCompletely_.bind(this)),e.once(this.element,"transitionend",this.hideCompletely_.bind(this))),this.element.style.opacity=t?1:"",babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"syncVisible",this).call(this,t)}}]),n}(n);t.register(a,i),a.Align=n.Align,this.metal.Tooltip=a,this.metalNamed.Tooltip=this.metalNamed.Tooltip||{},this.metalNamed.Tooltip.Tooltip=a,this.metalNamed.Tooltip.TooltipBase=n}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){var i;if(e.tabs.length>0){a("ul",null,null,"class","nav "+("none"!=e.type?"nav-"+e.type:"")+" "+(null==(i=e.elementClasses)?"":i),"role","tablist");for(var c=e.tabs,d=c.length,h=0;h<d;h++){var g=c[h],m=null!=e.disabled&&e.disabled||g.disabled,p=e.tab==h;r("li"),u("class",(m?"disabled":"")+" "+(p?"active":"")),u("data-index",h),m||p||u("data-onclick","onClickItem"),u("role","presentation"),s(),r("a"),u("aria-expanded",p?"true":"false"),u("data-toggle","tab"),u("data-unfocusable",m?"true":"false"),m||u("href","#"),u("ref","tab-"+h),u("role","tab"),u("tabindex",p?"0":"-1"),s();var f=g.label;"function"==typeof f?f():null!=f&&l(f),o("a"),o("li")}o("ul")}}goog.module("Tabs.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts"),goog.require("goog.string");var i=goog.require("incrementaldom"),a=i.elementOpen,o=i.elementClose,r=(i.elementVoid,i.elementOpenStart),s=i.elementOpenEnd,l=i.text,u=i.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Tabs.render"),t.render.params=["tab","tabs","disabled","elementClasses","type"],t.render.types={tab:"any",tabs:"any",disabled:"any",elementClasses:"any",type:"any"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.Tabs=this.metalNamed.Tabs||{},this.metalNamed.Tabs.Tabs=i,this.metalNamed.Tabs.templates=e,this.metal.Tabs=e}.call(this),function(){var e=this.metal.metal,t=this.metal.events,n=function(t){function n(e,t){babelHelpers.classCallCheck(this,n);var i=babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i.component_=e,i.selector_=t||"*",i.handleKey_=i.handleKey_.bind(i),i}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"buildRef_",value:function(e,t){return e+t}},{key:"disposeInternal",value:function(){babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disposeInternal",this).call(this),this.stop(),this.component_=null,this.selector_=null}},{key:"getNextFocusable_",value:function(e,t,n){var i=t,a=void 0,o=void 0;do t=this.increment_(t,n),o=this.buildRef_(e,t),a=this.component_.refs[o];while(this.isFocusable_(a)&&t!==i);return a?o:null}},{key:"handleKey_",value:function(t){var i=this.focusHandler_&&this.focusHandler_(t);this.focusHandler_&&i!==!0||(i=this.handleKeyDefault_(t));var a=i;e.isElement(i)||(i=this.component_.refs[i]),i&&(i.focus(),this.emit(n.EVENT_FOCUSED,{element:i,ref:e.isString(a)?a:null}))}},{key:"handleKeyDefault_",value:function(e){var t=e.delegateTarget.getAttribute("ref"),i=n.REF_REGEX.exec(t);if(i){var a=parseInt(i[1],10),o=t.substr(0,t.length-i[1].length);switch(e.keyCode){case 37:case 38:return this.getNextFocusable_(o,a,-1);case 39:case 40:return this.getNextFocusable_(o,a,1)}}}},{key:"increment_",value:function(t,n){var i=this.circularLength_;return t+=n,e.isNumber(i)&&(t<0?t=i-1:t>=i&&(t=0)),t}},{key:"isFocusable_",value:function(e){return e&&"true"===e.getAttribute("data-unfocusable")}},{key:"setCircularLength",value:function(e){return this.circularLength_=e,this}},{key:"setFocusHandler",value:function(e){return this.focusHandler_=e,this}},{key:"start",value:function(){return this.handle_||(this.handle_=this.component_.delegate("keydown",this.selector_,this.handleKey_)),this}},{key:"stop",value:function(){return this.handle_&&(this.handle_.removeListener(),this.handle_=null),this}}]),n}(t);n.EVENT_FOCUSED="focused",n.REF_REGEX=/.+-(\d+)$/,this.metal.KeyboardFocusManager=n}.call(this),function(){var e=this.metal.metal,t=this.metal.Tabs,n=this.metal.component,i=this.metal.KeyboardFocusManager,a=this.metal.Soy,o=function(t){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"attached",value:function(){this.keyboardFocusManager_=new i(this,"a").setCircularLength(this.tabs.length).start()}},{key:"addTab",value:function(t,n){e.isNumber(n)?this.tabs.splice(n,0,t):this.tabs.push(t),this.tabs=this.tabs}},{key:"addTabByName",value:function(t,n,i){if(e.isString(t)){var a={label:t,disabled:n};e.isDef(n)||(a.disabled=!1),this.addTab(a,i)}}},{key:"created",value:function(){this.lastState_={tab:this.tab},this.on(n.Events.CHANGE_REQUEST,this.defaultChangeRequestFn_,!0)}},{key:"defaultChangeRequestFn_",value:function(e){this.setState_(e.state)}},{key:"dispatchRequest_",value:function(e){this.emit(n.Events.CHANGE_REQUEST,{lastState:this.lastState_,state:e,totalTabs:this.tabs.length})}},{key:"disposed",value:function(){this.keyboardFocusManager_.dispose(),this.keyboardFocusManager_=null}},{key:"findFirstAvailableIndex_",value:function(){if(!this.disabled)for(var e=0;e<this.tabs.length;e++)if(!this.tabs[e].disabled)return e;return-1}},{key:"onClickItem",value:function(e){var t=e.delegateTarget;e.preventDefault();var n=parseInt(t.getAttribute("data-index"));this.dispatchRequest_({tab:n})}},{key:"removeTab",value:function(t){if(e.isNumber(t)&&t>-1&&t<this.tabs.length){var n=this.tabs.splice(t,1);return this.tabs=this.tabs,n[0]}}},{key:"setState_",value:function(e){this.tab=e.tab,this.lastState_=e}},{key:"setTabDisabled",value:function(t,n){e.isNumber(t)&&e.isBoolean(n)&&(this.tabs[t].disabled=n,this.tabs=this.tabs)}},{key:"syncTabs",value:function(){this.keyboardFocusManager_&&this.keyboardFocusManager_.setCircularLength(this.tabs.length)}},{key:"toggleTabDisabled",value:function(t){e.isNumber(t)&&t>=0&&t<this.tabs.length&&(this.tabs[t].disabled=!this.tabs[t].disabled,t===this.tab&&(this.tab=this.findFirstAvailableIndex_()),this.tabs=this.tabs)}}]),n}(n);a.register(o,t),o.Events={CHANGE_REQUEST:"changeRequest"},o.TYPES={NONE:"none",PILLS:"pills",TABS:"tabs"},o.STATE={disabled:{validator:e.isBoolean,value:!1},tab:{validator:e.isNumber,valueFn:"findFirstAvailableIndex_"},tabs:{validator:function(e){return e.every(function(e){return!!e.label})},value:[]},type:{validator:function(e){return e.toUpperCase()in o.TYPES},value:o.TYPES.TABS}},this.metal.Tabs=o}.call(this),function(){var e=this.metal.metal,t=this.metalNamed.dom.dom,n=this.metalNamed.dom.features,i=function(){function i(){babelHelpers.classCallCheck(this,i)}return babelHelpers.createClass(i,null,[{key:"emulateEnd",value:function(e,t){return this.getComputedDurationMs(e,"animation")>this.getComputedDurationMs(e,"transition")?this.emulateEnd_(e,"animation",t):this.emulateEnd_(e,"transition",t)}},{key:"emulateAnimationEnd",value:function(e,t){return this.emulateEnd_(e,"animation",t)}},{key:"emulateTransitionEnd",value:function(e,t){this.emulateEnd_(e,"transition",t)}},{key:"emulateEnd_",value:function(i,a,o){var r=o;e.isDef(o)||(r=this.getComputedDurationMs(i,a));var s=setTimeout(function(){t.triggerEvent(i,n.checkAnimationEventName()[a])},r),l=function(){clearTimeout(s),u.removeListener()},u=t.once(i,a+"end",l);return{abort:l}}},{key:"getComputedDurationMs",value:function(e,t){return 1e3*(parseFloat(window.getComputedStyle(e,null).getPropertyValue(t+"-duration"))||0)}}]),i}();this.metal.Anim=i}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{},i.asserts.assertType(null==e.body||e.body instanceof Function||e.body instanceof goog.soy.data.SanitizedContent||e.body instanceof a.UnsanitizedText||goog.isString(e.body),"body",e.body,"?soydata.SanitizedHtml|string|undefined");var o=e.body;i.asserts.assertType(null==e.closeButtonHtml||e.closeButtonHtml instanceof Function||e.closeButtonHtml instanceof goog.soy.data.SanitizedContent||e.closeButtonHtml instanceof a.UnsanitizedText||goog.isString(e.closeButtonHtml),"closeButtonHtml",e.closeButtonHtml,"?soydata.SanitizedHtml|string|undefined");var u=e.closeButtonHtml;if(r("div",null,null,"class","alert"+(e.dismissible?" alert-dismissible":"")+(e.elementClasses?" "+e.elementClasses:""),"role","alert"),o){var c=o;"function"==typeof c?c():null!=c&&l(c)}if(e.dismissible){if(r("button",null,null,"type","button","class","close","aria-label","Close","data-onclick","toggle"),u){var d=u;"function"==typeof d?d():null!=d&&l(d)}else r("span",null,null,"aria-hidden","true"),l("×"),s("span");s("button")}s("div")}goog.module("Alert.incrementaldom");var i=goog.require("soy"),a=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var o=goog.require("incrementaldom"),r=o.elementOpen,s=o.elementClose,l=(o.elementVoid,o.elementOpenStart,o.elementOpenEnd,o.text);o.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Alert.render"),t.render.params=["body","closeButtonHtml","dismissible","elementClasses"],t.render.types={body:"html|string",closeButtonHtml:"html|string",dismissible:"any",elementClasses:"any"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.Alert=this.metalNamed.Alert||{},this.metalNamed.Alert.Alert=i,this.metalNamed.Alert.templates=e,this.metal.Alert=e}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metal.dom,n=this.metal.Anim,i=this.metal.component,a=this.metalNamed.events.EventHandler,o=this.metal.Soy,r=this.metal.Alert,s=function(i){function o(){return babelHelpers.classCallCheck(this,o),babelHelpers.possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return babelHelpers.inherits(o,i),babelHelpers.createClass(o,[{key:"created",value:function(){this.eventHandler_=new a}},{key:"detached",value:function(){babelHelpers.get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"detached",this).call(this),this.eventHandler_.removeAllListeners(),clearTimeout(this.delay_)}},{key:"close",value:function(){t.once(this.element,"animationend",this.dispose.bind(this)),t.once(this.element,"transitionend",this.dispose.bind(this)),this.eventHandler_.removeAllListeners(),this.syncVisible(!1)}},{key:"handleDocClick_",value:function(e){this.element.contains(e.target)||this.hide()}},{key:"hide",value:function(){this.visible=!1}},{key:"hideCompletely_",value:function(){this.isDisposed()||this.visible||babelHelpers.get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"syncVisible",this).call(this,!1)}},{key:"toggle",value:function(){this.visible=!this.visible}},{key:"show",value:function(){this.visible=!0}},{key:"syncDismissible",value:function(e){e?this.eventHandler_.add(t.on(document,"click",this.handleDocClick_.bind(this))):this.eventHandler_.removeAllListeners()}},{key:"syncHideDelay",value:function(t){e.isNumber(t)&&this.visible&&(clearTimeout(this.delay_),this.delay_=setTimeout(this.hide.bind(this),t))}},{key:"syncVisible",value:function(i,a){var r=this,s=!1;i?e.isDef(a)&&(s=!0,babelHelpers.get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"syncVisible",this).call(this,!0)):(t.once(this.element,"animationend",this.hideCompletely_.bind(this)),t.once(this.element,"transitionend",this.hideCompletely_.bind(this)));var l=function(){r.isDisposed()||(t.removeClasses(r.element,r.animClasses[i?"hide":"show"]),t.addClasses(r.element,r.animClasses[i?"show":"hide"]),n.emulateEnd(r.element),i&&e.isNumber(r.hideDelay)&&r.syncHideDelay(r.hideDelay))};s?setTimeout(l,0):l()}}]),o}(i);o.register(s,r),s.STATE={animClasses:{validator:e.isObject,value:{show:"fade in",hide:"fade"}},body:{},closeButtonHtml:{},dismissible:{validator:e.isBoolean,value:!0},elementClasses:{value:"alert-success"},hideDelay:{},visible:{value:!1}},this.metal.Alert=s}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{},i.asserts.assertType(null==e.body||e.body instanceof Function||e.body instanceof goog.soy.data.SanitizedContent||e.body instanceof a.UnsanitizedText||goog.isString(e.body),"body",e.body,"?soydata.SanitizedHtml|string|undefined");var o=e.body;i.asserts.assertType(null==e.bodyId||e.bodyId instanceof goog.soy.data.SanitizedContent||goog.isString(e.bodyId),"bodyId",e.bodyId,"null|string|undefined");var u=e.bodyId;i.asserts.assertType(null==e.elementClasses||e.elementClasses instanceof goog.soy.data.SanitizedContent||goog.isString(e.elementClasses),"elementClasses",e.elementClasses,"null|string|undefined");var c=e.elementClasses;i.asserts.assertType(null==e.footer||e.footer instanceof Function||e.footer instanceof goog.soy.data.SanitizedContent||e.footer instanceof a.UnsanitizedText||goog.isString(e.footer),"footer",e.footer,"?soydata.SanitizedHtml|string|undefined");
var d=e.footer;i.asserts.assertType(null==e.header||e.header instanceof Function||e.header instanceof goog.soy.data.SanitizedContent||e.header instanceof a.UnsanitizedText||goog.isString(e.header),"header",e.header,"?soydata.SanitizedHtml|string|undefined");var h=e.header;i.asserts.assertType(null==e.headerId||e.headerId instanceof goog.soy.data.SanitizedContent||goog.isString(e.headerId),"headerId",e.headerId,"null|string|undefined");var g=e.headerId;i.asserts.assertType(null==e.noCloseButton||goog.isBoolean(e.noCloseButton)||1===e.noCloseButton||0===e.noCloseButton,"noCloseButton",e.noCloseButton,"boolean|null|undefined");var m=e.noCloseButton;i.asserts.assertType(null==e.role||e.role instanceof goog.soy.data.SanitizedContent||goog.isString(e.role),"role",e.role,"null|string|undefined");var p=e.role;i.asserts.assertType(null==e.visible||goog.isBoolean(e.visible)||1===e.visible||0===e.visible,"visible",e.visible,"boolean|null|undefined");var f=e.visible;if(r("div",null,null,"class","modal"+(c?" "+c:""),"style","display: "+(f?"block":"none")),r("div",null,null,"class","modal-dialog","tabindex","0","role",p?p:"dialog","aria-labelledby",g,"aria-describedby",u),r("div",null,null,"class","modal-content"),r("header",null,null,"class","modal-header"),h){m||(r("button",null,null,"type","button","class","close","data-onclick","hide","aria-label","Close"),r("span",null,null,"aria-hidden","true"),l("×"),s("span"),s("button")),r("div",null,null,"id",g);var v=h;"function"==typeof v?v():null!=v&&l(v),s("div")}if(s("header"),r("section",null,null,"class","modal-body","id",u,"role","document","tabindex","0"),o){var _=o;"function"==typeof _?_():null!=_&&l(_)}if(s("section"),r("footer",null,null,"class","modal-footer"),d){var y=d;"function"==typeof y?y():null!=y&&l(y)}s("footer"),s("div"),s("div"),s("div")}goog.module("Modal.incrementaldom");var i=goog.require("soy"),a=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var o=goog.require("incrementaldom"),r=o.elementOpen,s=o.elementClose,l=(o.elementVoid,o.elementOpenStart,o.elementOpenEnd,o.text);o.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Modal.render"),t.render.params=["body","bodyId","elementClasses","footer","header","headerId","noCloseButton","role","visible"],t.render.types={body:"html|string",bodyId:"string",elementClasses:"string",footer:"html|string",header:"html|string",headerId:"string",noCloseButton:"bool",role:"string",visible:"bool"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.Modal=this.metalNamed.Modal||{},this.metalNamed.Modal.Modal=i,this.metalNamed.Modal.templates=e,this.metal.Modal=e}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metalNamed.events.EventHandler,i=this.metal.Modal,a=this.metal.component,o=this.metal.Soy,r=27,s=function(e){function i(){return babelHelpers.classCallCheck(this,i),babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return babelHelpers.inherits(i,e),babelHelpers.createClass(i,[{key:"created",value:function(){this.eventHandler_=new n}},{key:"attached",value:function(){this.autoFocus_(this.autoFocus),this.addListener("hide",this.defaultHideFn_,!0)}},{key:"autoFocus_",value:function(e){if(this.inDocument&&this.visible&&e){var t=this.element.querySelector(e);t&&t.focus()}}},{key:"defaultHideFn_",value:function(){this.visible=!1}},{key:"detached",value:function(){babelHelpers.get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"detached",this).call(this),this.eventHandler_.removeAllListeners()}},{key:"disposeInternal",value:function(){t.exitDocument(this.overlayElement),this.unrestrictFocus_(),babelHelpers.get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"disposeInternal",this).call(this)}},{key:"handleDocumentFocus_",value:function(e){this.overlay&&!this.element.contains(e.target)&&this.autoFocus_(".modal-dialog")}},{key:"handleKeyup_",value:function(e){e.keyCode===r&&this.hide()}},{key:"hide",value:function(){this.emit("hide")}},{key:"restrictFocus_",value:function(){this.restrictFocusHandle_||(this.restrictFocusHandle_=t.on(document,"focus",this.handleDocumentFocus_.bind(this),!0))}},{key:"shiftFocusBack_",value:function(){this.lastFocusedElement_&&(this.lastFocusedElement_.focus(),this.lastFocusedElement_=null)}},{key:"show",value:function(){this.visible=!0}},{key:"syncHideOnEscape",value:function(e){e?this.eventHandler_.add(t.on(document,"keyup",this.handleKeyup_.bind(this))):this.eventHandler_.removeAllListeners()}},{key:"syncOverlay",value:function(e){var n=e&&this.visible;t[n?"enterDocument":"exitDocument"](this.overlayElement)}},{key:"syncVisible",value:function(){this.syncOverlay(this.overlay),this.visible?(this.lastFocusedElement_=this.lastFocusedElement_||document.activeElement,this.autoFocus_(this.autoFocus),this.restrictFocus_()):(this.unrestrictFocus_(),this.shiftFocusBack_())}},{key:"unrestrictFocus_",value:function(){this.restrictFocusHandle_&&(this.restrictFocusHandle_.removeListener(),this.restrictFocusHandle_=null)}},{key:"valueOverlayElementFn_",value:function(){return t.buildFragment('<div class="modal-backdrop fade in"></div>').firstChild}}]),i}(a);s.STATE={autoFocus:{validator:function(t){return t===!1||e.isString(t)},value:".close"},body:{},bodyId:{valueFn:function(){return"modal-body-"+e.getUid()}},footer:{},headerId:{valueFn:function(){return"modal-header-"+e.getUid()}},header:{},hideOnEscape:{validator:e.isBoolean,value:!0},noCloseButton:{value:!1},overlay:{validator:e.isBoolean,value:!0},overlayElement:{initOnly:!0,valueFn:"valueOverlayElementFn_"},role:{validator:e.isString,value:"dialog"}},o.register(s,i),this.metal.Modal=s}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){o("div",null,null,"class","reading-progress"+(e.elementClasses?" "+e.elementClasses:"")),o("ul");for(var a=e.items,s=a.length,l=0;l<s;l++){var u=a[l];i({item:u},null,n)}r("ul"),r("div")}function i(e,t,n){o("li"),o("a",null,null,"href",e.item.href),e.item.title&&(o("span",null,null,"class","reading-title"),l((goog.asserts.assert(null!=e.item.title),e.item.title)),r("span")),e.item.time&&(o("span",null,null,"class","reading-subtitle"),l((goog.asserts.assert(null!=(e.item.time<60?e.item.time+" sec read":Math.round(e.item.time/60)+" min read")),e.item.time<60?e.item.time+" sec read":Math.round(e.item.time/60)+" min read")),r("span")),o("svg",null,null,"x","0px","y","0px","width","36px","height","36px","viewBox","0 0 36 36"),s("circle",null,null,"fill","none","stroke-width","2","cx","18","cy","18","r","16","stroke-dasharray","100 100","transform","rotate(-90 18 18)"),r("svg"),r("a"),r("li")}goog.module("ReadingProgress.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts");var a=goog.require("incrementaldom"),o=a.elementOpen,r=a.elementClose,s=a.elementVoid,l=(a.elementOpenStart,a.elementOpenEnd,a.text);a.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="ReadingProgress.render"),t.item=i,goog.DEBUG&&(i.soyTemplateName="ReadingProgress.item"),t.render.params=["elementClasses","items"],t.render.types={elementClasses:"any",items:"any"},t.item.params=["item"],t.item.types={item:"any"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.ReadingProgress=this.metalNamed.ReadingProgress||{},this.metalNamed.ReadingProgress.ReadingProgress=i,this.metalNamed.ReadingProgress.templates=e,this.metal.ReadingProgress=e}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.position,i=this.metal.state,a=function(e){function i(e){babelHelpers.classCallCheck(this,i);var n=babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n.regions=[],n.scrollHandle_=t.on(n.scrollElement,"scroll",n.checkPosition.bind(n)),n.init(),n}return babelHelpers.inherits(i,e),babelHelpers.createClass(i,[{key:"disposeInternal",value:function(){this.deactivateAll(),this.scrollHandle_.dispose(),babelHelpers.get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"disposeInternal",this).call(this)}},{key:"activate",value:function(e){this.activeIndex>=0&&this.deactivate(this.activeIndex),this.activeIndex=e,t.addClasses(this.getElementForIndex(e),this.activeClass)}},{key:"checkPosition",value:function(){var e=this.getScrollHeight_(),t=n.getScrollTop(this.scrollElement);if(e<t+this.offset)return void this.activate(this.regions.length-1);var i=this.findBestRegionAt_();i!==this.activeIndex&&(i===-1?this.deactivateAll():this.activate(i))}},{key:"deactivate",value:function(e){t.removeClasses(this.getElementForIndex(e),this.activeClass)}},{key:"deactivateAll",value:function(){for(var e=0;e<this.regions.length;e++)this.deactivate(e);this.activeIndex=-1}},{key:"findBestRegionAt_",value:function(){var e=-1,t=this.getCurrentPosition();if(this.regions.length>0&&t>=this.regions[0].top)for(var n=0;n<this.regions.length;n++){var i=this.regions[n],a=n===this.regions.length-1;if(t>=i.top&&(a||t<this.regions[n+1].top)){e=n;break}}return e}},{key:"getCurrentPosition",value:function(){var e=n.getScrollTop(this.scrollElement);return e+this.offset+this.scrollElementRegion_.top}},{key:"getElementForIndex",value:function(e){return this.resolveElement(this.regions[e].link)}},{key:"getScrollHeight_",value:function(){var e=n.getHeight(this.scrollElement);return e+=this.scrollElementRegion_.top,e-=n.getClientHeight(this.scrollElement)}},{key:"init",value:function(){this.refresh(),this.on("elementChanged",this.refresh),this.on("offsetChanged",this.checkPosition),this.on("scrollElementChanged",this.onScrollElementChanged_),this.on("selectorChanged",this.refresh)}},{key:"onScrollElementChanged_",value:function(e){this.refresh(),this.scrollHandle_.dispose(),this.scrollHandle_=t.on(e.newVal,"scroll",this.checkPosition.bind(this))}},{key:"refresh",value:function(){this.deactivateAll(),this.scrollElementRegion_=n.getRegion(this.scrollElement),this.scrollHeight_=this.getScrollHeight_(),this.regions=[];for(var e=this.element.querySelectorAll(this.selector),t=n.getScrollTop(this.scrollElement),i=0;i<e.length;++i){var a=e[i];if(a.hash&&a.hash.length>1){var o=document.getElementById(a.hash.substring(1));if(o){var r=n.getRegion(o);this.regions.push({link:a,top:r.top+t,bottom:r.bottom+t})}}}this.sortRegions_(),this.deactivateAll(),this.checkPosition()}},{key:"sortRegions_",value:function(){this.regions.sort(function(e,t){return e.top-t.top})}}]),i}(i);a.STATE={activeClass:{validator:e.isString,value:"active"},activeIndex:{validator:e.isNumber,value:-1},resolveElement:{validator:e.isFunction,value:e.identityFunction},scrollElement:{setter:t.toElement,value:document},offset:{validator:e.isNumber,value:0},element:{setter:t.toElement},selector:{validator:e.isString,value:"a"}},this.metal.Scrollspy=a}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.Scrollspy,i=function(n){function i(){return babelHelpers.classCallCheck(this,i),babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return babelHelpers.inherits(i,n),babelHelpers.createClass(i,[{key:"init",value:function(){this.on("activeIndexChanged",this.handleActiveIndexChanged),this.on("progressChanged",this.handleProgressChanged),babelHelpers.get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"init",this).call(this)}},{key:"checkPosition",value:function(){babelHelpers.get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"checkPosition",this).call(this),this.updateProgress()}},{key:"handleActiveIndexChanged",value:function(t){if(e.isDef(t.prevVal)&&t.prevVal>=0){var n=this.getElementForIndex(t.prevVal);n.removeAttribute("data-reading-progress")}this.updateCompleted()}},{key:"handleProgressChanged",value:function(e){var n=this.getElementForIndex(this.activeIndex);n.setAttribute("data-reading-progress",e.newVal),e.newVal<100?t.removeClasses(n,this.completedClass):t.addClasses(n,this.completedClass)}},{key:"updateCompleted",value:function(){for(var e=0;e<this.regions.length;e++){var n=this.resolveElement(this.regions[e].link);e<this.activeIndex?t.addClasses(n,this.completedClass):t.removeClasses(n,this.completedClass)}}},{key:"updateProgress",value:function(){var e=this.activeIndex;if(e>=0){var t=this.regions[e],n=this.getCurrentPosition(),i=this.getScrollHeight_()+this.offset,a=Math.min(i,t.bottom);this.progress=Math.min(100*(n-t.top)/(a-t.top),100)}}}]),i}(n);i.STATE={completedClass:{validator:e.isString,value:"reading-progress-completed"},progress:{validator:e.isNumber,value:0}},this.metal.ReadingProgressTracker=i}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metal.ReadingProgress,i=this.metal.component,a=this.metal.ReadingProgressTracker,o=this.metal.Soy,r=function(n){function i(){return babelHelpers.classCallCheck(this,i),babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return babelHelpers.inherits(i,n),babelHelpers.createClass(i,[{key:"disposed",value:function(){this.tracker_&&this.tracker_.dispose()}},{key:"generateItemMissingData_",value:function(e){if("#"===e.href[0]){var t=document.getElementById(e.href.substr(1));if(e.title||(e.title=t.querySelector(this.titleSelector).textContent),!e.time){var n=t.textContent.length;e.time=Math.round(60*n/1500)}}}},{key:"getTracker",value:function(){return this.tracker_}},{key:"rendered",value:function(e){e&&(this.tracker_=new a(t.mixin({element:this.element},this.trackerConfig)),this.tracker_.on("progressChanged",this.updateProgress.bind(this)),this.updateProgress())}},{key:"setterItemsFn_",value:function(t){for(var n=0;n<t.length;n++)e.isString(t[n])&&(t[n]={href:t[n]}),this.generateItemMissingData_(t[n]);return t}},{key:"updateProgress",value:function(){var e=this.tracker_.activeIndex;if(e>=0){var t=this.tracker_.getElementForIndex(e);t.querySelector("circle").setAttribute("stroke-dashoffset",100-this.tracker_.progress)}}}]),i}(i);o.register(r,n),r.STATE={items:{setter:"setterItemsFn_",validator:Array.isArray},titleSelector:{validator:e.isString,value:"h1"},trackerConfig:{validator:e.isObject,writeOnce:!0}},this.metal.ReadingProgress=r}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){if(s("li"),c("class","listitem list-group-item "+(e.elementClasses?" "+e.elementClasses:"")+" clearfix"),c("data-index",e.index),e.id&&c("id",e.id),c("role","listitem"),l(),e.item.avatar){e.item.avatar.link&&(u(" "),a("a",null,null,"href",e.item.avatar.link,"class","avatar-link"),u(" ")),a("span",null,null,"class","list-image pull-left "+e.item.avatar["class"]);var i=e.item.avatar.content;"function"==typeof i?i():null!=i&&u(i),o("span"),e.item.avatar.link&&(u(" "),o("a"),u(" "))}a("div",null,null,"class","list-main-content pull-left"),a("div",null,null,"class","list-text-primary");var d=e.item.textPrimary;if("function"==typeof d?d():null!=d&&u(d),o("div"),e.item.textSecondary){a("div",null,null,"class","list-text-secondary");var h=e.item.textSecondary;"function"==typeof h?h():null!=h&&u(h),o("div")}if(o("div"),e.item.icons)for(var g=e.item.icons,m=g.length,p=0;p<m;p++){var f=g[p];r("span",null,null,"class","btn-icon "+f+" pull-right")}if(e.item.iconsHtml){a("div",null,null,"class","pull-right");for(var v=e.item.iconsHtml,_=v.length,y=0;y<_;y++){var b=v[y],E=b;"function"==typeof E?E():null!=E&&u(E)}o("div")}if(e.item.label){a("span",null,null,"class","label list-label pull-right "+e.item.label["class"]);var C=e.item.label.content;"function"==typeof C?C():null!=C&&u(C),o("span")}o("li")}goog.module("ListItem.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts"),goog.require("goog.string");var i=goog.require("incrementaldom"),a=i.elementOpen,o=i.elementClose,r=i.elementVoid,s=i.elementOpenStart,l=i.elementOpenEnd,u=i.text,c=i.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="ListItem.render"),t.render.params=["id","index","item","elementClasses"],t.render.types={id:"any",index:"any",item:"any",elementClasses:"any"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.ListItem=this.metalNamed.ListItem||{},this.metalNamed.ListItem.ListItem=i,this.metalNamed.ListItem.templates=e,this.metal.ListItem=e}.call(this),function(){var e=this.metal.metal,t=this.metal.component,n=this.metal.Soy,i=this.metal.ListItem,a=function(t){function i(){return babelHelpers.classCallCheck(this,i),babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return babelHelpers.inherits(i,t),babelHelpers.createClass(i,[{key:"setterItemFn_",value:function(t){return t.textPrimary&&e.isString(t.textPrimary)&&(t.textPrimary=n.toIncDom(t.textPrimary)),t.textSecondary&&e.isString(t.textSecondary)&&(t.textSecondary=n.toIncDom(t.textSecondary)),t.avatar&&t.avatar.content&&e.isString(t.avatar.content)&&(t.avatar.content=n.toIncDom(t.avatar.content)),Array.isArray(t.iconsHtml)&&(t.iconsHtml=t.iconsHtml.map(n.toIncDom)),t}}]),i}(t);n.register(a,i),a.STATE={id:{valueFn:function(){return"list-component-item"+e.getUid()}},item:{validator:e.isObject,setter:"setterItemFn_"},index:{value:-1}},this.metal.ListItem=a}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function i(e,t,n){e=e||{},a.asserts.assertType(null==e.itemsHtml||e.itemsHtml instanceof Function||e.itemsHtml instanceof o.UnsanitizedText||goog.isString(e.itemsHtml),"itemsHtml",e.itemsHtml,"?soydata.SanitizedHtml|string|undefined");var i=e.itemsHtml;if(s("div",null,null,"class","list"+(e.elementClasses?" "+e.elementClasses:"")),u("ul"),d("class","list-group"),d("data-onclick","handleClick"),e.id&&d("id",e.id),d("role","list"),c(),null!=i)i();else for(var r=e.items,g=r.length,m=0;m<g;m++){var p=r[m];h({id:e.id+"-item-"+(m+1),index:m,item:p,key:"-items-"+m},null,n)}l("ul"),l("div")}goog.module("List.incrementaldom");var a=goog.require("soy"),o=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var r=goog.require("incrementaldom"),s=r.elementOpen,l=r.elementClose,u=(r.elementVoid,r.elementOpenStart),c=r.elementOpenEnd,d=(r.text,r.attr),h=n.getTemplate("ListItem.incrementaldom","render");return t.render=i,goog.DEBUG&&(i.soyTemplateName="List.render"),t.render.params=["itemsHtml","id","elementClasses","items"],t.render.types={itemsHtml:"html",id:"any",elementClasses:"any",items:"any"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.List=this.metalNamed.List||{},this.metalNamed.List.List=i,this.metalNamed.List.templates=e,this.metal.List=e}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.component,i=this.metal.Soy,a=this.metal.List,o=function(e){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"handleClick",value:function(e){for(var n=e.target;n&&!t.match(n,".listitem");)n=n.parentNode;this.emit("itemSelected",n)}}]),n}(n);i.register(o,a),o.STATE={id:{valueFn:function(){return"list-component-"+e.getUid()}},items:{validator:Array.isArray,valueFn:function(){return[]}},itemsHtml:{isHtml:!0}},this.metal.List=o}.call(this),function(){function e(e,n){return function i(){var a=arguments;t(i),i.id=setTimeout(function(){e.apply(null,a)},n)}}function t(e){clearTimeout(e.id)}this.metal.debounce=e,this.metalNamed.debounce=this.metalNamed.debounce||{},this.metalNamed.debounce.cancelDebounce=t,this.metalNamed.debounce.debounce=e}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.Promise,i=this.metal.component,a=this.metalNamed.events.EventHandler,o=function(i){function o(){return babelHelpers.classCallCheck(this,o),babelHelpers.possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return babelHelpers.inherits(o,i),babelHelpers.createClass(o,[{key:"created",value:function(){this.eventHandler_=new a,this.on("select",this.select)}},{key:"attached",value:function(){this.inputElement&&this.eventHandler_.add(t.on(this.inputElement,"input",this.handleUserInput_.bind(this)))}},{key:"detached",value:function(){this.eventHandler_.removeAllListeners()}},{key:"handleUserInput_",value:function(){this.request(this.inputElement.value)}},{key:"request",value:function(t){var i=this;this.pendingRequest&&this.pendingRequest.cancel("Cancelled by another request");var a=i.data(t);return e.isPromise(a)||(a=n.resolve(a)),this.pendingRequest=a.then(function(t){if(Array.isArray(t))return t.map(i.format.bind(i)).filter(function(t){return e.isDefAndNotNull(t)})}),this.pendingRequest}},{key:"setData_",value:function(t){return e.isFunction(t)?t:function(){return t}}}]),o}(i);o.STATE={listId:{valueFn:function(){return"autocomplete-"+e.getUid()}},data:{setter:"setData_"},format:{value:e.identityFunction,validator:e.isFunction},inputElement:{setter:t.toElement},select:{value:function(e){this.inputElement.value=e.text,this.inputElement.focus()},validator:e.isFunction},visible:{validator:e.isBoolean,value:!1}},this.metal.AutocompleteBase=o}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function i(e,t,n){e=e||{},o("div",null,null,"class","autocomplete autocomplete-list component "+(e.elementClasses?" "+e.elementClasses:""),"data-onclick","handleClick_"),s({events:{itemSelected:e.onListItemSelected_},id:e.listId,ref:"list"},null,n),r("div")}goog.module("Autocomplete.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts"),goog.require("goog.string");var a=goog.require("incrementaldom"),o=a.elementOpen,r=a.elementClose,s=(a.elementVoid,a.elementOpenStart,a.elementOpenEnd,a.text,a.attr,n.getTemplate("List.incrementaldom","render"));return t.render=i,goog.DEBUG&&(i.soyTemplateName="Autocomplete.render"),t.render.params=["listId","elementClasses","onListItemSelected_"],t.render.types={listId:"any",elementClasses:"any",onListItemSelected_:"any"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.Autocomplete=this.metalNamed.Autocomplete||{},this.metalNamed.Autocomplete.Autocomplete=i,this.metalNamed.Autocomplete.templates=e,this.metal.Autocomplete=e}.call(this),function(){var e=this.metal.metal,t=this.metal.debounce,n=this.metal.dom,i=this.metalNamed.Promise.CancellablePromise,a=this.metalNamed.position.Align,o=this.metal.AutocompleteBase,r=this.metal.Soy,s=this.metal.Autocomplete,l=40,u=13,c=32,d=38,h=function(o){function r(){return babelHelpers.classCallCheck(this,r),babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return babelHelpers.inherits(r,o),babelHelpers.createClass(r,[{key:"attached",value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"attached",this).call(this),this.setAriaAttributes_(),this.eventHandler_.add(n.on(this.inputElement,"focus",this.handleInputFocus_.bind(this))),this.eventHandler_.add(n.on(document,"click",this.handleDocClick_.bind(this))),this.eventHandler_.add(n.on(window,"resize",t(this.handleWindowResize_.bind(this),100))),this.eventHandler_.add(n.on(this.inputElement,"keydown",this.handleKeyDown_.bind(this))),this.eventHandler_.add(this.getList().on("rendered",this.handleListRender_.bind(this))),this.visible&&this.align()}},{key:"align",value:function(){this.element.style.width=this.inputElement.offsetWidth+"px";var e=a.align(this.element,this.inputElement,a.Bottom,this.autoBestAlign);switch(n.removeClasses(this.element,this.positionCss_),e){case a.Top:case a.TopLeft:case a.TopRight:this.positionCss_="autocomplete-top";break;case a.Bottom:case a.BottomLeft:case a.BottomRight:this.positionCss_="autocomplete-bottom";break;default:this.positionCss_=null}n.addClasses(this.element,this.positionCss_)}},{key:"activateListItem_",value:function(e){var t=this.currentList_[e];n.removeClasses(this.currentList_[this.activeIndex_],"active"),this.activeIndex_=e,this.inputElement.setAttribute("aria-activedescendant",t.getAttribute("id")),n.addClasses(t,"active")}},{key:"decreaseIndex_",value:function(){return 0===this.activeIndex_?this.getLastIndex_():this.activeIndex_-1}},{key:"getLastIndex_",value:function(){return this.getList().items.length-1}},{key:"getList",value:function(){return this.components.list}},{key:"handleActionKeys_",value:function(){var e=this.getList().items[this.activeIndex_];this.selectOption_(e)}},{key:"handleClick_",value:function(e){e.stopPropagation()}},{key:"handleDocClick_",value:function(){document.activeElement!==this.inputElement&&(this.visible=!1)}},{key:"handleInputFocus_",value:function(){this.request(this.inputElement.value)}},{key:"handleListRender_",value:function(){this.visible&&(this.currentList_=this.element.querySelectorAll(".listitem"),this.activateListItem_(0))}},{key:"handleKeyDown_",value:function(e){if(this.visible)switch(e.keyCode){case d:this.activateListItem_(this.decreaseIndex_()),e.preventDefault();break;case l:this.activateListItem_(this.increaseIndex_()),e.preventDefault();break;case u:case c:this.handleActionKeys_(),e.preventDefault()}}},{key:"handleWindowResize_",value:function(){this.visible&&this.align()}},{key:"increaseIndex_",value:function(){return this.activeIndex_===this.getLastIndex_()?0:this.activeIndex_+1}},{key:"onListItemSelected_",value:function(e){var t=parseInt(e.getAttribute("data-index"),10),n=this.getList().items[t];this.selectOption_(n)}},{key:"request",value:function(e){if(!this.autocompleteClosing_){var t=this;return babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"request",this).call(this,e).then(function(e){e&&(e.forEach(t.assertItemObjectStructure_),t.getList().items=e),t.visible=!!(e&&e.length>0)})}}},{key:"selectOption_",value:function(e){this.autocompleteClosing_=!0,this.emit("select",e),this.visible=!1,this.autocompleteClosing_=!1}},{key:"setAriaAttributes_",value:function(){this.inputElement.setAttribute("aria-activedescendant",""),this.inputElement.setAttribute("aria-autocomplete","list"),this.inputElement.setAttribute("aria-haspopup",!0),this.inputElement.setAttribute("aria-owns",this.listId),this.inputElement.setAttribute("role","combobox")}},{key:"syncVisible",value:function(e){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"syncVisible",this).call(this,e),e&&this.align()}},{key:"assertItemObjectStructure_",value:function(t){if(!e.isObject(t))throw new i.CancellationError("Autocomplete item must be an object");if(!t.hasOwnProperty("textPrimary"))throw new i.CancellationError("Autocomplete item must be an object with 'textPrimary' key")}}]),r}(o);r.register(h,s),h.STATE={autoBestAlign:{value:!0,validator:e.isBoolean},format:{value:function(t){return e.isString(t)&&(t={textPrimary:t}),e.isObject(t)&&!t.text&&(t.text=t.textPrimary),t}}},this.metal.Autocomplete=h}.call(this),function(){var e=this.metal.Autocomplete,t=this.metal.AutocompleteBase;this.metal.autocomplete=e,this.metalNamed.autocomplete=this.metalNamed.autocomplete||{},this.metalNamed.autocomplete.Autocomplete=e,this.metalNamed.autocomplete.AutocompleteBase=t}.call(this),function(){var e=this.metal.metal,t=this.metal.state,n=this.metal.position,i=function(t){function i(e){babelHelpers.classCallCheck(this,i);var t=babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.scrollTimeout_=null,t}return babelHelpers.inherits(i,t),babelHelpers.createClass(i,[{key:"disposeInternal",value:function(){babelHelpers.get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"disposeInternal",this).call(this),this.stop()}},{key:"getRegionWithoutScroll_",value:function(t){if(e.isDocument(t)){var i=window.innerHeight,a=window.innerWidth;return n.makeRegion(i,i,0,a,0,a)}return n.getRegion(t)}},{key:"scroll",value:function(e,t,n){this.stop(),this.scrollTimeout_=setTimeout(this.scrollInternal_.bind(this,e,t,n),this.delay)}},{key:"scrollElement_",value:function(t,n,i){e.isDocument(t)?window.scrollBy(n,i):(t.scrollTop+=i,t.scrollLeft+=n)}},{key:"scrollInternal_",value:function(e,t,i){for(var a=0;a<e.length;a++){var o=this.getRegionWithoutScroll_(e[a]);if(n.pointInsideRegion(t,i,o)){var r=0,s=0,l=n.getScrollTop(e[a]),u=n.getScrollLeft(e[a]);if(u>0&&Math.abs(t-o.left)<=this.maxDistance?r-=this.speed:Math.abs(t-o.right)<=this.maxDistance&&(r+=this.speed),l>0&&Math.abs(i-o.top)<=this.maxDistance?s-=this.speed:Math.abs(i-o.bottom)<=this.maxDistance&&(s+=this.speed),r||s){this.scrollElement_(e[a],r,s),this.scroll(e,t,i);break}}}}},{key:"stop",value:function(){clearTimeout(this.scrollTimeout_)}}]),i}(t);i.STATE={delay:{validator:e.isNumber,value:50},maxDistance:{validator:e.isNumber,value:20},speed:{validator:e.isNumber,value:20}},this.metal.DragAutoScroll=i}.call(this),function(){var e=this.metal.dom,t=this.metalNamed.events.EventEmitter,n=this.metalNamed.events.EventHandler,i=this.metal.position,a=function(t){function a(){babelHelpers.classCallCheck(this,a);var e=babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.handler_=new n,e.scrollPositions_=[],e}return babelHelpers.inherits(a,t),babelHelpers.createClass(a,[{key:"disposeInternal",value:function(){babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"disposeInternal",this).call(this),this.stop(),this.handler_=null}},{key:"handleScroll_",value:function(e,t){var n={scrollLeft:i.getScrollLeft(t.currentTarget),scrollTop:i.getScrollTop(t.currentTarget)},a=this.scrollPositions_[e];this.scrollPositions_[e]=n,this.emit("scrollDelta",{deltaX:n.scrollLeft-a.scrollLeft,deltaY:n.scrollTop-a.scrollTop})}},{key:"start",value:function(t,n){if("fixed"!==getComputedStyle(t).position)for(var a=0;a<n.length;a++)if(e.contains(n[a],t)){this.scrollPositions_.push({scrollLeft:i.getScrollLeft(n[a]),scrollTop:i.getScrollTop(n[a])});var o=this.scrollPositions_.length-1;this.handler_.add(e.on(n[a],"scroll",this.handleScroll_.bind(this,o)))}}},{key:"stop",value:function(){this.handler_.removeAllListeners(),this.scrollPositions_=[]}}]),a}(t);this.metal.DragScrollDelta=a}.call(this),function(){var e=this.metal.dom,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"attachDocListeners",value:function(n,i){var a=document;n&&(a=t.getDocShim(),a.style.display="block");var o=Object.keys(i);return o.map(function(t){var n="touch"===t.substr(0,5);return e.on(n?document:a,t,i[t])})}},{key:"getDocShim",value:function(){return t.docShim_||(t.docShim_=document.createElement("div"),t.docShim_.className="shim",t.docShim_.style.position="fixed",t.docShim_.style.top=0,
t.docShim_.style.left=0,t.docShim_.style.width="100%",t.docShim_.style.height="100%",t.docShim_.style.display="none",t.docShim_.style.opacity=0,t.docShim_.style.zIndex=9999,e.enterDocument(t.docShim_)),t.docShim_}},{key:"hideDocShim",value:function(){t.getDocShim().style.display="none"}},{key:"reset",value:function(){t.docShim_&&(e.exitDocument(t.docShim_),t.docShim_=null)}}]),t}();t.docShim_=null,this.metal.DragShim=t}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metal.dom,i=this.metal.DragAutoScroll,a=this.metal.DragScrollDelta,o=this.metal.DragShim,r=this.metalNamed.events.EventHandler,s=this.metal.position,l=this.metal.state,u=function(l){function u(e){babelHelpers.classCallCheck(this,u);var t=babelHelpers.possibleConstructorReturn(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return t.activeDragPlaceholder_=null,t.activeDragSource_=null,t.distanceDragged_=0,t.dragging_=!1,t.dragHandler_=new r,t.dragScrollDelta_=new a,t.mousePos_=null,t.mouseSourceDelta_=null,t.sourceHandler_=new r,t.sourceRegion_=null,t.sourceRelativePos_=null,t.attachSourceEvents_(),t.on(u.Events.DRAG,t.defaultDragFn_,!0),t.on(u.Events.END,t.defaultEndFn_,!0),t.on("sourcesChanged",t.handleSourcesChanged_.bind(t)),t.on("containerChanged",t.handleContainerChanged_.bind(t)),t.dragScrollDelta_.on("scrollDelta",t.handleScrollDelta_.bind(t)),n.on(document,"keydown",t.handleKeyDown_.bind(t)),t}return babelHelpers.inherits(u,l),babelHelpers.createClass(u,[{key:"attachSourceEvents_",value:function(){for(var t={keydown:this.handleSourceKeyDown_.bind(this),mousedown:this.handleDragStartEvent_.bind(this),touchstart:this.handleDragStartEvent_.bind(this)},i=Object.keys(t),a=0;a<i.length;a++){var o=t[i[a]];e.isString(this.sources)?this.sourceHandler_.add(n.delegate(this.container,i[a],this.sources,o)):this.sourceHandler_.add(n.on(this.sources,i[a],o))}}},{key:"buildEventObject_",value:function(){return{placeholder:this.activeDragPlaceholder_,source:this.activeDragSource_,relativeX:this.sourceRelativePos_.x,relativeY:this.sourceRelativePos_.y,x:this.sourceRegion_.left,y:this.sourceRegion_.top}}},{key:"calculateInitialPosition_",value:function(n){this.sourceRegion_=t.mixin({},s.getRegion(this.activeDragSource_,!0)),this.sourceRelativePos_={x:this.activeDragSource_.offsetLeft,y:this.activeDragSource_.offsetTop},e.isDef(n.clientX)&&(this.mousePos_={x:n.clientX,y:n.clientY},this.mouseSourceDelta_={x:this.sourceRegion_.left-this.mousePos_.x,y:this.sourceRegion_.top-this.mousePos_.y})}},{key:"canStartDrag_",value:function(t){return!this.disabled&&(!e.isDef(t.button)||0===t.button)&&!this.isDragging()&&this.isWithinHandle_(t.target)}},{key:"cleanUpAfterDragging_",value:function(){this.activeDragPlaceholder_&&(this.activeDragPlaceholder_.setAttribute("aria-grabbed","false"),n.removeClasses(this.activeDragPlaceholder_,this.draggingClass),this.dragPlaceholder===u.Placeholder.CLONE&&n.exitDocument(this.activeDragPlaceholder_)),this.activeDragPlaceholder_=null,this.activeDragSource_=null,this.sourceRegion_=null,this.sourceRelativePos_=null,this.mousePos_=null,this.mouseSourceDelta_=null,this.dragging_=!1,this.dragHandler_.removeAllListeners()}},{key:"cloneActiveDrag_",value:function(){var e=this.activeDragSource_.cloneNode(!0);return e.style.position="absolute",e.style.left=this.sourceRelativePos_.x+"px",e.style.top=this.sourceRelativePos_.y+"px",n.append(this.activeDragSource_.parentNode,e),e}},{key:"constrain_",value:function(e){this.constrainToSteps_(e),this.constrainToRegion_(e),this.constrainToAxis_(e)}},{key:"constrainToAxis_",value:function(e){"x"===this.axis?(e.top=this.sourceRegion_.top,e.bottom=this.sourceRegion_.bottom):"y"===this.axis&&(e.left=this.sourceRegion_.left,e.right=this.sourceRegion_.right)}},{key:"constrainToRegion_",value:function(n){var i=this.constrain;i&&(e.isFunction(i)?t.mixin(n,i(n)):(e.isElement(i)&&(i=s.getRegion(i,!0)),n.left<i.left?n.left=i.left:n.right>i.right&&(n.left-=n.right-i.right),n.top<i.top?n.top=i.top:n.bottom>i.bottom&&(n.top-=n.bottom-i.bottom),n.right=n.left+n.width,n.bottom=n.top+n.height))}},{key:"constrainToSteps_",value:function(e){var t=e.left-this.sourceRegion_.left,n=e.top-this.sourceRegion_.top;e.left-=t%this.steps.x,e.right=e.left+e.width,e.top-=n%this.steps.y,e.bottom=e.top+e.height}},{key:"createActiveDragPlaceholder_",value:function(){var t=this.dragPlaceholder;t===u.Placeholder.CLONE?this.activeDragPlaceholder_=this.cloneActiveDrag_():e.isElement(t)?this.activeDragPlaceholder_=t:this.activeDragPlaceholder_=this.activeDragSource_}},{key:"defaultDragFn_",value:function(){this.moveToPosition_(this.activeDragPlaceholder_)}},{key:"defaultEndFn_",value:function(){this.moveToPosition_(this.activeDragSource_)}},{key:"disposeInternal",value:function(){this.cleanUpAfterDragging_(),this.dragHandler_=null,this.dragScrollDelta_.dispose(),this.dragScrollDelta_=null,this.sourceHandler_.removeAllListeners(),this.sourceHandler_=null,babelHelpers.get(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"disposeInternal",this).call(this)}},{key:"getActiveDrag",value:function(){return this.activeDragSource_}},{key:"handleDragEndEvent_",value:function(){this.autoScroll&&this.autoScroll.stop(),this.dragScrollDelta_.stop(),o.hideDocShim(),this.emit(u.Events.END,this.buildEventObject_()),this.cleanUpAfterDragging_()}},{key:"handleDragMoveEvent_",value:function(e){var t=e.targetTouches?e.targetTouches[0]:e,n=t.clientX-this.mousePos_.x,i=t.clientY-this.mousePos_.y;this.mousePos_.x=t.clientX,this.mousePos_.y=t.clientY,(this.isDragging()||this.hasReachedMinimumDistance_(n,i))&&(this.isDragging()||(this.startDragging_(e),this.dragScrollDelta_.start(this.activeDragPlaceholder_,this.scrollContainers)),this.autoScroll&&this.autoScroll.scroll(this.scrollContainers,this.mousePos_.x,this.mousePos_.y),this.updatePositionFromMouse())}},{key:"handleDragStartEvent_",value:function(e){this.activeDragSource_=e.delegateTarget||e.currentTarget,this.canStartDrag_(e)&&(this.calculateInitialPosition_(e.targetTouches?e.targetTouches[0]:e),e.preventDefault(),"keydown"===e.type?this.startDragging_(e):(this.dragHandler_.add.apply(this.dragHandler_,o.attachDocListeners(this.useShim,{mousemove:this.handleDragMoveEvent_.bind(this),touchmove:this.handleDragMoveEvent_.bind(this),mouseup:this.handleDragEndEvent_.bind(this),touchend:this.handleDragEndEvent_.bind(this)})),this.distanceDragged_=0))}},{key:"handleKeyDown_",value:function(e){27===e.keyCode&&this.isDragging()&&this.handleDragEndEvent_()}},{key:"handleScrollDelta_",value:function(e){this.mouseSourceDelta_.x+=e.deltaX,this.mouseSourceDelta_.y+=e.deltaY,this.updatePositionFromMouse()}},{key:"handleSourceKeyDown_",value:function(e){if(this.isDragging()){var t=e.delegateTarget||e.currentTarget;if(t!==this.activeDragSource_)return;if(e.keyCode>=37&&e.keyCode<=40){var n=0,i=0,a=this.keyboardSpeed>=this.steps.x?this.keyboardSpeed:this.steps.x,o=this.keyboardSpeed>=this.steps.y?this.keyboardSpeed:this.steps.y;37===e.keyCode?n-=a:38===e.keyCode?i-=o:39===e.keyCode?n+=a:i+=o,this.updatePositionFromDelta(n,i),e.preventDefault()}else 13!==e.keyCode&&32!==e.keyCode&&27!==e.keyCode||this.handleDragEndEvent_()}else 13!==e.keyCode&&32!==e.keyCode||this.handleDragStartEvent_(e)}},{key:"handleContainerChanged_",value:function(){e.isString(this.sources)&&(this.sourceHandler_.removeAllListeners(),this.attachSourceEvents_()),this.prevScrollContainersSelector_&&(this.scrollContainers=this.prevScrollContainersSelector_)}},{key:"handleSourcesChanged_",value:function(){this.sourceHandler_.removeAllListeners(),this.attachSourceEvents_()}},{key:"hasReachedMinimumDistance_",value:function(e,t){return this.distanceDragged_+=Math.abs(e)+Math.abs(t),this.distanceDragged_>=this.minimumDragDistance}},{key:"isDragging",value:function(){return this.dragging_}},{key:"isWithinHandle_",value:function(t){var i=this.handles;return!i||(e.isString(i)?n.match(t,i+", "+i+" *"):n.contains(i,t))}},{key:"moveToPosition_",value:function(e){e.style.left=this.sourceRelativePos_.x+"px",e.style.top=this.sourceRelativePos_.y+"px"}},{key:"setterAutoScrollFn_",value:function(e){if(e!==!1)return new i(e)}},{key:"setterConstrainFn",value:function(t){return e.isString(t)&&(t=n.toElement(t)),t}},{key:"setterScrollContainersFn_",value:function(t){this.prevScrollContainersSelector_=e.isString(t)?t:null;var n=this.toElements_(t);return n.push(document),n}},{key:"startDragging_",value:function(e){this.dragging_=!0,this.createActiveDragPlaceholder_(),n.addClasses(this.activeDragPlaceholder_,this.draggingClass),this.activeDragPlaceholder_.setAttribute("aria-grabbed","true"),this.emit(u.Events.START,{originalEvent:e})}},{key:"toElements_",value:function(t){if(e.isString(t)){var n=this.container.querySelectorAll(t);return Array.prototype.slice.call(n,0)}return t?[t]:[]}},{key:"updatePosition",value:function(e){this.constrain_(e);var t=e.left-this.sourceRegion_.left,n=e.top-this.sourceRegion_.top;0===t&&0===n||(this.sourceRegion_=e,this.sourceRelativePos_.x+=t,this.sourceRelativePos_.y+=n,this.emit(u.Events.DRAG,this.buildEventObject_()))}},{key:"updatePositionFromDelta",value:function(e,n){var i=t.mixin({},this.sourceRegion_);i.left+=e,i.right+=e,i.top+=n,i.bottom+=n,this.updatePosition(i)}},{key:"updatePositionFromMouse",value:function(){var e={height:this.sourceRegion_.height,left:this.mousePos_.x+this.mouseSourceDelta_.x,top:this.mousePos_.y+this.mouseSourceDelta_.y,width:this.sourceRegion_.width};e.right=e.left+e.width,e.bottom=e.top+e.height,this.updatePosition(e)}},{key:"validateElementOrString_",value:function(t){return e.isString(t)||e.isElement(t)}},{key:"validatorConstrainFn",value:function(t){return e.isString(t)||e.isObject(t)}}]),u}(l);u.STATE={autoScroll:{setter:"setterAutoScrollFn_",value:!1,writeOnce:!0},axis:{validator:e.isString},constrain:{setter:"setterConstrainFn",validator:"validatorConstrainFn"},container:{setter:n.toElement,validator:"validateElementOrString_",value:document},disabled:{validator:e.isBoolean,value:!1},draggingClass:{validator:e.isString,value:"dragging"},dragPlaceholder:{validator:"validateElementOrString_"},handles:{validator:"validateElementOrString_"},keyboardSpeed:{validator:e.isNumber,value:10},minimumDragDistance:{validator:e.isNumber,value:5,writeOnce:!0},scrollContainers:{setter:"setterScrollContainersFn_",validator:"validateElementOrString_"},sources:{validator:"validateElementOrString_"},steps:{validator:e.isObject,valueFn:function(){return{x:1,y:1}}},useShim:{value:!0}},u.Events={DRAG:"drag",END:"end",START:"start"},u.Placeholder={CLONE:"clone"},this.metal.Drag=u}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.core,n=this.metalNamed.metal.object,i=this.metal.dom,a=this.metal.Drag,o=this.metal.position,r=function(a){function r(e){babelHelpers.classCallCheck(this,r);var t=babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.activeTargets_=[],t}return babelHelpers.inherits(r,a),babelHelpers.createClass(r,[{key:"addTarget",value:function(e){this.targets.push(e),this.targets=this.targets}},{key:"buildEventObject_",value:function(){var e=babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"buildEventObject_",this).call(this);return e.target=this.activeTargets_[0],e.allActiveTargets=this.activeTargets_,e}},{key:"cleanUpAfterDragging_",value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"cleanUpAfterDragging_",this).call(this),this.targets.forEach(function(e){return e.removeAttribute("aria-dropeffect")}),this.activeTargets_.length&&i.removeClasses(this.activeTargets_[0],this.targetOverClass),this.activeTargets_=[]}},{key:"findAllActiveTargets_",value:function(){var e,t=[],n=this.getSourceRegion_(),i=this.targets;return i.forEach(function(a,r){var s=o.getRegion(a);i[r]!==this.activeDragPlaceholder_&&o.intersectRegion(s,n)&&(!e||o.insideRegion(e,s)?(t=[i[r]].concat(t),e=s):t.push(i[r]))}.bind(this)),t}},{key:"getSourceRegion_",value:function(){if(t.isDefAndNotNull(this.mousePos_)){var e=this.mousePos_.x,i=this.mousePos_.y;return o.makeRegion(i,0,e,e,i,0)}var a=n.mixin({},this.sourceRegion_);return a.left-=document.body.scrollLeft,a.right-=document.body.scrollLeft,a.top-=document.body.scrollTop,a.bottom-=document.body.scrollTop,a}},{key:"handleContainerChanged_",value:function(e,t){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"handleContainerChanged_",this).call(this,e,t),this.prevTargetsSelector_&&(this.targets=this.prevTargetsSelector_)}},{key:"removeTarget",value:function(t){e.remove(this.targets,t),this.targets=this.targets}},{key:"setterTargetsFn_",value:function(e){return this.prevTargetsSelector_=t.isString(e)?e:null,this.toElements_(e)}},{key:"startDragging_",value:function(){var e=this;this.ariaDropEffect&&this.targets.forEach(function(t){return t.setAttribute("aria-dropeffect",e.ariaDropEffect)}),babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"startDragging_",this).call(this)}},{key:"updatePosition",value:function(e,t){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"updatePosition",this).call(this,e,t);var n=this.findAllActiveTargets_();n[0]!==this.activeTargets_[0]&&(this.activeTargets_[0]&&(i.removeClasses(this.activeTargets_[0],this.targetOverClass),this.emit(r.Events.TARGET_LEAVE,this.buildEventObject_())),this.activeTargets_=n,this.activeTargets_[0]&&(i.addClasses(this.activeTargets_[0],this.targetOverClass),this.emit(r.Events.TARGET_ENTER,this.buildEventObject_())))}}]),r}(a);r.STATE={ariaDropEffect:{validator:t.isString},targetOverClass:{validator:t.isString,value:"targetOver"},targets:{setter:"setterTargetsFn_",validator:"validateElementOrString_"}},r.Events={DRAG:"drag",END:"end",TARGET_ENTER:"targetEnter",TARGET_LEAVE:"targetLeave"},this.metal.DragDrop=r}.call(this),function(){var e=this.metal.Drag,t=this.metal.DragDrop;this.metalNamed.drag=this.metalNamed.drag||{},this.metalNamed.drag.Drag=e,this.metalNamed.drag.DragDrop=t}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){var i;e=e||{};var l=null==(i=e.max)?100:i,u=null==(i=e.min)?0:i,c=null==(i=e.value)?0:i;a("div",null,null,"class","slider "+(null==(i=e.elementClasses)?"":i)),a("input",null,null,"name",null==(i=e.inputName)?"":i,"type","hidden","value",c),o("input"),a("span");var d=c;"function"==typeof d?d():null!=d&&s(d),o("span");var h=100*(c-u)/(l-u)+"%";a("div",null,null,"class","rail","data-onclick","onRailClick_"),r("div",null,null,"class","rail-active","style","width: "+h),a("div",null,null,"class","rail-handle","style","left: "+h),r("div",null,null,"class","handle","tabindex","0","role","slider","aria-valuemin",u,"aria-valuemax",l,"aria-valuenow",c),o("div"),o("div"),o("div")}goog.module("Slider.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts"),goog.require("goog.string");var i=goog.require("incrementaldom"),a=i.elementOpen,o=i.elementClose,r=i.elementVoid,s=(i.elementOpenStart,i.elementOpenEnd,i.text);i.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Slider.render"),t.render.params=["elementClasses","inputName","max","min","value"],t.render.types={elementClasses:"any",inputName:"any",max:"any",min:"any",value:"any"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.Slider=this.metalNamed.Slider||{},this.metalNamed.Slider.Slider=i,this.metalNamed.Slider.templates=e,this.metal.Slider=e}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.component,i=this.metalNamed.drag.Drag,a=this.metal.position,o=this.metal.Soy,r=this.metal.Slider,s=function(e){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"attached",value:function(){this.drag_=new i({axis:"x",constrain:this.constrainToRail_.bind(this),container:this.element,handles:".handle",sources:".rail-handle"}),this.on("elementChanged",this.handleElementChanged_),this.attachDragEvents_()}},{key:"attachDragEvents_",value:function(){this.drag_.on(i.Events.DRAG,this.updateValueFromDragData_.bind(this)),this.drag_.on(i.Events.END,this.updateValueFromDragData_.bind(this))}},{key:"constrainToRail_",value:function(e){var t=this.element.querySelector(".rail"),n=a.getRegion(t,!0);e.left<n.left?e.left=n.left:e.left>n.right&&(e.left-=e.left-n.right),e.right=e.left+e.width}},{key:"disposeInternal",value:function(){babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disposeInternal",this).call(this),this.drag_.dispose()}},{key:"getDrag",value:function(){return this.drag_}},{key:"handleElementChanged_",value:function(e){e.newVal&&(this.drag_.container=e.newVal)}},{key:"onRailClick_",value:function(e){if(t.hasClass(e.target,"rail")||t.hasClass(e.target,"rail-active")){var n=this.value;if(this.updateValue_(e.offsetX,0,!0),n===this.value){var i=a.getRegion(this.element.querySelector(".handle"));e.offsetX<i.left?this.value-=1:this.value+=1}}}},{key:"syncMax",value:function(e){e<this.value&&(this.value=e)}},{key:"syncMin",value:function(e){e>this.value&&(this.value=e)}},{key:"updateValue_",value:function(e,t,n){var i=a.getRegion(this.element);n||(e-=i.left),this.value=Math.round(t+e/i.width*(this.max-this.min))}},{key:"updateValueFromDragData_",value:function(e,t){this.updateValue_(e.x,this.min),t.preventDefault()}}]),n}(n);o.register(s,r),s.STATE={inputName:{validator:e.isString},max:{value:100},min:{value:0},value:{validator:function(t){return e.isNumber(t)&&this.min<=t&&t<=this.max},value:0}},this.metal.Slider=s}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){var i;e=e||{},a("div",null,null,"class","autocomplete-badges "+(null==(i=e.elementClasses)?"":i)),a("ul",null,null,"class","autocomplete-badges--list","ref","badges");for(var l=e.badges,u=l.length,c=0;c<u;c++){var d=l[c];a("li",null,null,"class","badge","tabindex","-1","data-index",c,"data-onkeydown","onBadgeKeyDown_"),a("span");var h=d.text;"function"==typeof h?h():null!=h&&s(h),o("span"),r("span",null,null,"class","glyphicon glyphicon-remove remove","data-index",c,"data-onclick","onBadgeItemClicked_"),o("li")}o("ul"),a("span",null,null,"class","autocomplete-field-wrapper"),r("input",null,null,"ref","input","autocomplete","off","class","autocomplete-field form-control","data-onkeydown","onInputKeyDown_"),o("span"),o("div")}goog.module("AutocompleteBadges.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts"),goog.require("goog.string");var i=goog.require("incrementaldom"),a=i.elementOpen,o=i.elementClose,r=i.elementVoid,s=(i.elementOpenStart,i.elementOpenEnd,i.text);i.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="AutocompleteBadges.render"),t.render.params=["badges","elementClasses"],t.render.types={badges:"any",elementClasses:"any"},e=t,t});var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(i,e),this.metalNamed.AutocompleteBadges=this.metalNamed.AutocompleteBadges||{},this.metalNamed.AutocompleteBadges.AutocompleteBadges=i,this.metalNamed.AutocompleteBadges.templates=e,this.metal.AutocompleteBadges=e}.call(this),function(){var e=this.metal.AutocompleteBadges,t=this.metal.autocomplete,n=this.metal.component,i=this.metal.Soy,a=function(e){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"attached",value:function(){this.autocomplete_=new t({inputElement:this.refs.input,data:this.getFilteredElements_.bind(this)}),this.autocomplete_.on("select",this.onListItemSelected_.bind(this))}},{key:"disposed",value:function(){this.autocomplete_&&this.autocomplete_.dispose()}},{key:"getAutocomplete",value:function(){return this.autocomplete_}},{key:"getFilteredElements_",value:function(e){return this.dataItems.filter(function(t){return e&&t.toLowerCase().includes(e.toLowerCase())}).sort()}},{key:"getInput",value:function(){return this.refs.input}},{key:"onBadgeItemClicked_",value:function(e){var t=e.delegateTarget,n=this.badges[t.getAttribute("data-index")];this.removeBadge_(n)}},{key:"removeBadge_",value:function(e){this.dataItems.push(e.text),this.dataItems=this.dataItems,this.badges.splice(this.badges.indexOf(e),1),this.badges=this.badges}},{key:"onBadgeKeyDown_",value:function(e){var t=this.refs.badges.children,n=e.delegateTarget,i=+n.getAttribute("data-index");switch(e.keyCode){case o:i>0&&t[i-1].focus();break;case r:i<t.length-1?t[i+1].focus():this.refs.input.focus();break;case s:this.removeBadge_(this.badges[i]),i>0?t[i-1].focus():this.refs.input.focus();break;case l:this.refs.input.value=this.badges[i].text,this.removeBadge_(this.badges[i]),this.refs.input.focus()}}},{key:"onInputKeyDown_",value:function(e){var t=this.refs.badges.children;if(""!==this.refs.input.value)return!0;switch(e.keyCode){case s:case o:if(t.length>0)return t[t.length-1].focus(),!1}}},{key:"onListItemSelected_",value:function(e){var t=this.dataItems.indexOf(e.text);this.badges.push(e),this.badges=this.badges,this.dataItems.splice(t,1),this.dataItems=this.dataItems,this.refs.input.value=""}},{key:"setterDataItems_",value:function(e){return e.slice()}}]),n}(n);i.register(a,e),a.STATE={badges:{validator:Array.isArray,valueFn:function(){return[]}},dataItems:{validator:Array.isArray,valueFn:function(){return[]},setter:"setterDataItems_"}};var o=37,r=39,s=8,l=13;this.metal.AutocompleteBadges=a}.call(this),function(){var e=this.metal.state,t=this.metal.Ajax,n=(this.metal.metal,this.metal.state),i=function(e){function n(e,t,i){babelHelpers.classCallCheck(this,n);var a=babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t,i));return a.load(),a}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"load",value:function(){var e=this,n=this.sampleRootUrl+"/"+this.sampleDirName+"/"+this.sampleDirName+".";n.length>3&&["js","css","html"].forEach(function(i){t.request(n+i,"GET").then(function(t){e[i]=t.responseText})})}}]),n}(n);i.STATE={description:{validator:e.string,required:!0},sampleRootUrl:{validator:e.string,value:""},sampleDirName:{validator:e.string,value:""},js:{validator:e.string,value:""},html:{validator:e.string,value:""},css:{validator:e.string,value:""}},this.metal.Sample=i}.call(this),function(){var e=this.metal.Select,t=this.metal.Sample,n=this.metalNamed.state.State,i=this.metalNamed.state.validators,a=this.metal.Ajax,o=function(n){function i(t,n,a){babelHelpers.classCallCheck(this,i);var o=babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,n,a));return o.load(),o.select=new e({items:[],values:[],label:"Samples"},o.element),o}return babelHelpers.inherits(i,n),babelHelpers.createClass(i,[{key:"fillItems",value:function(e){var n=this,i=JSON.parse(e),a=[],o=[];Object.keys(i).forEach(function(e){var r=i[e],s=new t({description:e,sampleRootUrl:n.sampleRootUrl,sampleDirName:r});n.items[r]=s,a.push(e),o.push(r)}),this.select.items=a,this.select.values=o}},{key:"load",value:function(){var e=this,t=this.sampleRootUrl+"/"+this.indexFileName;t.length>this.indexFileName.length+1&&a.request(t,"GET").then(function(t){e.fillItems(t.responseText)})}}]),i}(n);o.STATE={items:{value:{}},sampleRootUrl:{validator:i.string,value:""},indexFileName:{value:"index.json"},element:{value:{}},select:{value:{}}},this.metal.SampleList=o}.call(this),function(){var e=(this.metal.metal,this.metal.Playground),t=this.metal.component,n=this.metal.Soy,i=(this.metal.dom,this.metal.Ajax,this.metal.Toggler,this.metal.Select,this.metal.Tooltip,this.metal.Tabs,this.metal.Alert,this.metal.Modal,this.metal.ReadingProgress,this.metal.List,this.metal.autocomplete,this.metal.Slider,this.metal.AutocompleteBadges,this.metal.SampleList),a=this.metal.IFrame,o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getAceMode",value:function(e){return"js"===e&&(e="javascript"),"ace/mode/"+e}},{key:"renderSample",value:function(){var e=this.editor.css.getValue(),t=this.editor.js.getValue(),n=this.editor.html.getValue();this.iframe.setContent(e,t,n)}},{key:"sampleSelected",value:function(){var e=this,t=this.sampleList.select.selectedIndex;if(t>-1){var n=this.sampleList.select.values[t],i=this.sampleList.items[n];["css","html","js"].forEach(function(t){e.editor[t].setValue(i[t])}),this.renderSample()}}},{key:"rendered",value:function(){var e=this,t=new i({sampleRootUrl:this.sampleRootUrl,element:this.element.querySelector(".metal-playground-select")}),n=this.sampleSelected.bind(this);this.sampleList=t,this.sampleList.select.on("stateChanged",n),["css","html","js"].forEach(function(t){var n=e.element.querySelector(".metal-playground-"+t+"-content"),i=window.ace.edit(n);i.setTheme("ace/theme/monokai"),i.getSession().setMode(e.getAceMode(t));var a=e.renderSample.bind(e);i.getSession().on("change",a),e.editor[t]=i}),this.iframe=new a({parentElement:this.element.querySelector(".metal-playground-result-content")});var o=this.iframe.createIFrame.bind(this.iframe);setTimeout(o,0)}}]),t}(t);n.register(o,e),o.STATE={editor:{value:{}},sampleRootUrl:{value:"https://raw.githubusercontent.com/peterborkuti/metal-playground-samples/master/"}},this.metal.Playground=o}.call(this)}).call(this);